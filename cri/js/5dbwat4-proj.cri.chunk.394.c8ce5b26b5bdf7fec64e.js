"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[394],{5394:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var l=a(7875),n=a(641),u=a(7972);const i=(0,l.Uk)("Delete all unnecessary newline"),r=(0,l.Uk)("Save"),o={setup(e){const t=(0,u.useRoute)(),o=(0,u.useRouter)(),s=(0,l.l1)(),c={deleteendl:()=>{d.value.content=d.value.content.replaceAll(/　+/g,"").replaceAll(/\n+/g,"\n")}},d=(0,n.iH)({title:"",author:"",content:"",timestamp:(new Date).getTime(),origin:"",rate:.5});(0,l.bv)((async()=>{})),(async()=>{if("edit"==s._type){let e=t.params.id;(await a.e(707).then(a.bind(a,5754))).API("getArch",{id:e}).then((async e=>{d.value=e}))}})();const v=async()=>{"edit"==s._type?await p():await m()},m=async()=>{(await a.e(707).then(a.bind(a,5754))).API("saveArch",d.value).then((async e=>{(await a.e(551).then(a.t.bind(a,2551,23))).default({title:"Record Successfully",text:"已上传.ID="+e.id,icon:"success",buttons:{1:{text:"Reset Form",value:"reset"},2:{text:"View it",value:"view"},3:{text:"return",value:"return"}}}).then((t=>{switch(t){case"reset":d.value={title:"",author:"",content:"",timestamp:(new Date).getTime(),origin:"",rate:.5};break;case"return":o.push("/");break;case"view":o.push("/view/"+e.id)}}))}))},p=async()=>{(await a.e(707).then(a.bind(a,5754))).API("editArch",{id:t.params.id,data:d.value}).then((async e=>{(await a.e(551).then(a.t.bind(a,2551,23))).default({title:"Record Successfully",text:"已更新.ID="+e.id,icon:"success",buttons:{1:{text:"Reset Form",value:"reset"},2:{text:"View it",value:"view"},3:{text:"return",value:"return"}}}).then((t=>{switch(t){case"reset":d.value={title:"",author:"",content:"",timestamp:(new Date).getTime(),origin:"",rate:.5};break;case"return":o.push("/");break;case"view":o.push("/view/"+e.id)}}))}))};return(e,t)=>{const a=(0,l.up)("var-input"),n=(0,l.up)("var-button");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(a,{placeholder:"标题",modelValue:d.value.title,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value.title=e)},null,8,["modelValue"]),(0,l.Wm)(a,{placeholder:"Author",modelValue:d.value.author,"onUpdate:modelValue":t[1]||(t[1]=e=>d.value.author=e)},null,8,["modelValue"]),(0,l.Wm)(a,{placeholder:"Origin",modelValue:d.value.origin,"onUpdate:modelValue":t[2]||(t[2]=e=>d.value.origin=e)},null,8,["modelValue"]),(0,l.Wm)(a,{textarea:"",placeholder:"Content",modelValue:d.value.content,"onUpdate:modelValue":t[3]||(t[3]=e=>d.value.content=e)},null,8,["modelValue"]),(0,l.kq)(' <div id="vditor"></div> '),(0,l.kq)(' <var-date-picker show-current v-model="timestamp"/> '),(0,l.Wm)(n,{type:"primary",onClick:c.deleteendl},{default:(0,l.w5)((()=>[i])),_:1},8,["onClick"]),(0,l.Wm)(n,{block:"",type:"primary",onClick:v},{default:(0,l.w5)((()=>[r])),_:1})],64)}}}}}]);