import{A as g}from"./APIHelper-89899791.js";import{useRoute as y,useRouter as w}from"./vue-router-85f8dd9e.js";import{s as C}from"./subjects-flattened-reversed-970fd5c2.js";import{N,a as $,S as D,R as I}from"./SearchOutline-37369a08.js";import{N as R}from"./DataTable-6b415fd4.js";import{b2 as i,ab as _,m as x,u as o,aH as d,bc as a,F as P,N as c}from"./index-6b27469d.js";import{N as f}from"./Button-a421b774.js";import{N as q}from"./Input-c49f615f.js";import{N as S}from"./Icon-bc12cdb3.js";import{N as B}from"./InputGroup-0a19f812.js";import"./light-cb8e5d18.js";import"./format-length-c9d165c6.js";import"./Icon-0741e3aa.js";import"./Warning-ad995842.js";import"./Close-df27b242.js";import"./Scrollbar-6ef5ad24.js";import"./runtime-dom.esm-bundler-4f377a37.js";import"./keysOf-5d5107c5.js";import"./use-locale-13d55c5c.js";import"./index-975a2d8f.js";import"./use-merged-state-236ae148.js";import"./use-memo-7138c88c.js";import"./utils-1657c4d7.js";import"./Popover-d5735fab.js";import"./index-cabd39fd.js";import"./flatten-0afec71b.js";import"./use-false-until-truthy-35c1fbae.js";import"./get-9cb40f85.js";import"./cssr-752b8ed7.js";import"./utils-eca1999b.js";import"./use-is-mounted-e356ec1d.js";import"./use-compitable-182c3d4e.js";import"./next-frame-once-7035a838.js";import"./fade-in-scale-up.cssr-59f6c429.js";import"./create-59670860.js";import"./Loading-a27cceda.js";import"./ChevronRight-f0e435af.js";import"./Suffix-8898b6d6.js";import"./Tag-156be23d.js";import"./index-cbfaa337.js";import"./Dropdown-6e48c879.js";import"./light-5edeff63.js";import"./_commonjsHelpers-de833af9.js";import"./index-d51aa4a2.js";import"./Checkbox-d6d0f1db.js";import"./RadioGroup-5d465f0a.js";import"./get-slot-1efb97e5.js";import"./Radio-0d9e1289.js";import"./Ellipsis-b74cfcb8.js";import"./Tooltip-46e4aeaa.js";import"./download-b096fc6b.js";import"./FadeInExpandTransition-65435983.js";const T={__name:"list",setup(j){y();const h=w(),l=i(!0),r=i(!1),p=i(""),n=i("UUID"),s=i([]),z=[{type:"selection"},{title:"uuid",key:"id"},{title:"title",key:"title"},{title:"Subjects",render(e){return c("span",{},C[""+e.bankid])}},{title:"submit time",render(e){return c(N,{time:e.timestamp,to:new Date().getTime(),type:"relative"})}},{title:"view",render(e){return c(f,{text:!0,onClick:()=>{h.push("/group/"+e.id)}},{default:()=>"View"})}}],U=i([]),k=e=>{U.value=e,console.log(e)},t=i({page:1,pageSize:10,showSizePicker:!0,itemCount:0,pageSizes:[5,10,20,50],onChange:e=>{t.value.page=e,l.value=!0,u()},onUpdatePageSize:e=>{t.value.pageSize=e,t.value.page=1,l.value=!0,u()}}),u=()=>{p.value==""?g.get(`/api/v2/group/list?offset=${(t.value.page-1)*t.value.pageSize}&pagesize=${t.value.pageSize}`).then(e=>{s.value=e.data,t.value.itemCount=e.count,l.value=!1,r.value=!1}):n.value=="UUID"?g.get(`/api/v2/group/list/search/uuid?q=${encodeURIComponent(p.value)}&offset=${(t.value.page-1)*t.value.pageSize}&pagesize=${t.value.pageSize}`).then(e=>{s.value=e.data,l.value=!1,r.value=!1}):n.value=="title"&&g.post(`/api/v2/group/list/search/title?offset=${(t.value.page-1)*t.value.pageSize}&pagesize=${t.value.pageSize}`,{query:p.value}).then(e=>{s.value=e.data,l.value=!1,r.value=!1})},b=e=>{p.value=e,r.value=!0,u()};return u(),(e,v)=>(_(),x(P,null,[o(a(B),null,{default:d(()=>[o(a(q),{placeholder:"Search",value:p.value,"onUpdate:value":v[0]||(v[0]=m=>p.value=m),loading:r.value,"on-input":b,clearable:""},null,8,["value","loading"]),o(a($),{value:n.value,"onUpdate:value":v[1]||(v[1]=m=>n.value=m),options:[{label:"UUID",value:"UUID"},{label:"\u6807\u9898",value:"title"}],style:{width:"160px"}},null,8,["value"]),o(a(f),{onClick:e.handleSearch},{icon:d(()=>[o(a(S),{component:a(D)},null,8,["component"])]),_:1},8,["onClick"]),o(a(f),{onClick:u},{icon:d(()=>[o(a(S),{component:a(I)},null,8,["component"])]),_:1})]),_:1}),o(a(R),{remote:"",loading:l.value,pagination:t.value,data:s.value,columns:z,"onUpdate:checkedRowKeys":k,"row-key":m=>m.id,"visual-scroll":""},null,8,["loading","pagination","data","row-key"])],64))}};export{T as default};
