import{p as R}from"./Close-df27b242.js";import{j as S,b2 as C,a1 as X,w as I,R as J,J as V,N as E,a5 as Z,ad as F,b8 as M,Z as j,h as P}from"./index-6b27469d.js";import{m as T}from"./runtime-dom.esm-bundler-4f377a37.js";import{g as H,u as K}from"./light-cb8e5d18.js";import{i as U}from"./utils-eca1999b.js";import{u as D}from"./use-memo-7138c88c.js";import{a as W}from"./Button-a421b774.js";import{V as Y}from"./Scrollbar-6ef5ad24.js";import{b as ee}from"./next-frame-once-7035a838.js";import{f as te}from"./flatten-0afec71b.js";import{g as re}from"./get-slot-1efb97e5.js";function ie(e){if(typeof e=="number")return{"":e.toString()};const t={};return e.split(/ +/).forEach(s=>{if(s==="")return;const[i,r]=s.split(":");r===void 0?t[""]=i:t[i]=r}),t}function x(e,t){var s;if(e==null)return;const i=ie(e);if(t===void 0)return i[""];if(typeof t=="string")return(s=i[t])!==null&&s!==void 0?s:i[""];if(Array.isArray(t)){for(let r=t.length-1;r>=0;--r){const o=t[r];if(o in i)return i[o]}return i[""]}else{let r,o=-1;return Object.keys(i).forEach(l=>{const n=Number(l);!Number.isNaN(n)&&t>=n&&n>=o&&(o=n,r=i[l])}),r}}function se(e){var t;const s=(t=e.dirs)===null||t===void 0?void 0:t.find(({dir:i})=>i===T);return!!(s&&s.value===!1)}const oe={xs:0,s:640,m:1024,l:1280,xl:1536,"2xl":1920};function ae(e){return`(min-width: ${e}px)`}const _={};function le(e=oe){if(!U)return S(()=>[]);if(typeof window.matchMedia!="function")return S(()=>[]);const t=C({}),s=Object.keys(e),i=(r,o)=>{r.matches?t.value[o]=!0:t.value[o]=!1};return s.forEach(r=>{const o=e[r];let l,n;_[o]===void 0?(l=window.matchMedia(ae(o)),l.addEventListener?l.addEventListener("change",d=>{n.forEach(p=>{p(d,r)})}):l.addListener&&l.addListener(d=>{n.forEach(p=>{p(d,r)})}),n=new Set,_[o]={mql:l,cbs:n}):(l=_[o].mql,n=_[o].cbs),n.add(i),l.matches&&n.forEach(d=>{d(l,r)})}),X(()=>{s.forEach(r=>{const{cbs:o}=_[e[r]];o.has(i)&&o.delete(i)})}),S(()=>{const{value:r}=t;return s.filter(o=>r[o])})}const k=1,z=H("n-grid"),q=1,ne={span:{type:[Number,String],default:q},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}},pe=I({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:ne,setup(){const{isSsrRef:e,xGapRef:t,itemStyleRef:s,overflowRef:i,layoutShiftDisabledRef:r}=J(z),o=V();return{overflow:i,itemStyle:s,layoutShiftDisabled:r,mergedXGap:S(()=>R(t.value||0)),deriveStyle:()=>{e.value;const{privateSpan:l=q,privateShow:n=!0,privateColStart:d=void 0,privateOffset:p=0}=o.vnode.props,{value:G}=t,y=R(G||0);return{display:n?"":"none",gridColumn:`${d??`span ${l}`} / span ${l}`,marginLeft:p?`calc((100% - (${l} - 1) * ${y}) / ${l} * ${p} + ${y} * ${p})`:""}}}},render(){var e,t;if(this.layoutShiftDisabled){const{span:s,offset:i,mergedXGap:r}=this;return E("div",{style:{gridColumn:`span ${s} / span ${s}`,marginLeft:i?`calc((100% - (${s} - 1) * ${r}) / ${s} * ${i} + ${r} * ${i})`:""}},this.$slots)}return E("div",{style:[this.itemStyle,this.deriveStyle()]},(t=(e=this.$slots).default)===null||t===void 0?void 0:t.call(e,{overflow:this.overflow}))}}),ue={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},Q=24,O="__ssr__",de={layoutShiftDisabled:Boolean,responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:Q},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}},fe=I({name:"Grid",inheritAttrs:!1,props:de,setup(e){const{mergedClsPrefixRef:t,mergedBreakpointsRef:s}=K(e),i=/^\d+$/,r=C(void 0),o=le((s==null?void 0:s.value)||ue),l=D(()=>!!(e.itemResponsive||!i.test(e.cols.toString())||!i.test(e.xGap.toString())||!i.test(e.yGap.toString()))),n=S(()=>{if(l.value)return e.responsive==="self"?r.value:o.value}),d=D(()=>{var u;return(u=Number(x(e.cols.toString(),n.value)))!==null&&u!==void 0?u:Q}),p=D(()=>x(e.xGap.toString(),n.value)),G=D(()=>x(e.yGap.toString(),n.value)),y=u=>{r.value=u.contentRect.width},m=u=>{ee(y,u)},g=C(!1),b=S(()=>{if(e.responsive==="self")return m}),f=C(!1),c=C();return Z(()=>{const{value:u}=c;u&&u.hasAttribute(O)&&(u.removeAttribute(O),f.value=!0)}),F(z,{layoutShiftDisabledRef:M(e,"layoutShiftDisabled"),isSsrRef:f,itemStyleRef:M(e,"itemStyle"),xGapRef:p,overflowRef:g}),{isSsr:!W,contentEl:c,mergedClsPrefix:t,style:S(()=>e.layoutShiftDisabled?{width:"100%",display:"grid",gridTemplateColumns:`repeat(${e.cols}, minmax(0, 1fr))`,columnGap:R(e.xGap),rowGap:R(e.yGap)}:{width:"100%",display:"grid",gridTemplateColumns:`repeat(${d.value}, minmax(0, 1fr))`,columnGap:R(p.value),rowGap:R(G.value)}),isResponsive:l,responsiveQuery:n,responsiveCols:d,handleResize:b,overflow:g}},render(){if(this.layoutShiftDisabled)return E("div",j({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style},this.$attrs),this.$slots);const e=()=>{var t,s,i,r,o,l,n;this.overflow=!1;const d=te(re(this)),p=[],{collapsed:G,collapsedRows:y,responsiveCols:m,responsiveQuery:g}=this;d.forEach(a=>{var N,h,v,w,B;if(((N=a==null?void 0:a.type)===null||N===void 0?void 0:N.__GRID_ITEM__)!==!0)return;if(se(a)){const $=P(a);$.props?$.props.privateShow=!1:$.props={privateShow:!1},p.push({child:$,rawChildSpan:0});return}a.dirs=((h=a.dirs)===null||h===void 0?void 0:h.filter(({dir:$})=>$!==T))||null,((v=a.dirs)===null||v===void 0?void 0:v.length)===0&&(a.dirs=null);const L=P(a),A=Number((B=x((w=L.props)===null||w===void 0?void 0:w.span,g))!==null&&B!==void 0?B:k);A!==0&&p.push({child:L,rawChildSpan:A})});let b=0;const f=(t=p[p.length-1])===null||t===void 0?void 0:t.child;if(f!=null&&f.props){const a=(s=f.props)===null||s===void 0?void 0:s.suffix;a!==void 0&&a!==!1&&(b=Number((r=x((i=f.props)===null||i===void 0?void 0:i.span,g))!==null&&r!==void 0?r:k),f.props.privateSpan=b,f.props.privateColStart=m+1-b,f.props.privateShow=(o=f.props.privateShow)!==null&&o!==void 0?o:!0)}let c=0,u=!1;for(const{child:a,rawChildSpan:N}of p){if(u&&(this.overflow=!0),!u){const h=Number((n=x((l=a.props)===null||l===void 0?void 0:l.offset,g))!==null&&n!==void 0?n:0),v=Math.min(N+h,m);if(a.props?(a.props.privateSpan=v,a.props.privateOffset=h):a.props={privateSpan:v,privateOffset:h},G){const w=c%m;v+w>m&&(c+=m-w),v+c+b>y*m?u=!0:c+=v}}u&&(a.props?a.props.privateShow!==!0&&(a.props.privateShow=!1):a.props={privateShow:!1})}return E("div",j({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style,[O]:this.isSsr||void 0},this.$attrs),p.map(({child:a})=>a))};return this.isResponsive&&this.responsive==="self"?E(Y,{onResize:this.handleResize},{default:e}):e()}});export{pe as N,fe as a};
