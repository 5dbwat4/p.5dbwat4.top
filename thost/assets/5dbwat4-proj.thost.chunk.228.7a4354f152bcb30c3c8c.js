"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[228],{6228:(e,t,l)=>{l.r(t),l.d(t,{default:()=>D});var a=l(7875),u=l(641),o=l(349),i=l(2895),r=l(7625),d=l(5079),n=l(5885),s=l(8714),w=l(7545),_=l(8),c=l(4849),v=l(3992),U=l(2313),k=l(5093),f=l(3148);const g=(0,a.Uk)("你需要配合一个后端API才能正常的使用thost的相关功能。这就要求你指定一个API地址。"),h=(0,a.Uk)("本版本的thost所需的API为："),m=(0,a.Uk)("_5dbwat4_proj_thost_r3_be"),p=(0,a.Uk)(" 版本为 "),S=(0,a.Uk)("r3"),y=(0,a.Uk)(" 检查API状态 "),Z=(0,a.Uk)("API验证成功。开始使用thost吧！"),I=(0,a.Uk)("确定 "),A=(0,a.Uk)(" API验证失败。以下是相关信息: "),W=(0,a.Uk)("你需要配合一个后端API才能正常的使用thost的相关功能。你之前可能已经指定过一个。我们需要确认你指定的API地址是可用的。"),P=(0,a.Uk)("本版本的thost所需的API为："),b=(0,a.Uk)(" 版本为 "),j=(0,a.Uk)("r3"),C=(0,a.Uk)("您指定的API地址是"),q=(0,a.Uk)("(更换API地址)"),x=(0,a.Uk)("API验证成功。开始使用thost吧！"),E=(0,a.Uk)("确定 "),H=(0,a.Uk)("以后加载完成后总是自动进入主页面 "),L=(0,a.Uk)(" API验证失败。以下是相关信息: "),z=(0,a.Uk)(" 正在运行逻辑，请稍等。 "),N={setup(e){const t="_5dbwat4_proj_thost_r3_be",l=(0,u.iH)("waiting"),N=(0,u.iH)("https://example.com"),J=(0,u.iH)("n"),O=()=>{J.value="checking",fetch(N.value+"/api/whoareyou").then((e=>e.json())).then((e=>{e.entity==t?(J.value="success",M.value.enterImmediatelyAfterCheckingAPI&&F()):(J.value="error",D.value="Not Match.==>\n"+JSON.stringify(e,null,4))})).catch((e=>{J.value="error",D.value="Error Fetching.==>\n"+e}))},D=(0,u.iH)("nothing"),F=()=>{localStorage.setItem("__5dbwat_proj__thost_apihost",N.value),console.log("xxx"),localStorage.setItem("__5dbwat_proj__thost_preference",JSON.stringify(M.value)),((e,t=[])=>{window.EventList=window.EventList||{},window.EventList[e](...t)})("entryAllowStateUpdate",[!0])};localStorage.getItem("__5dbwat_proj__thost_apihost")?(N.value=localStorage.getItem("__5dbwat_proj__thost_apihost"),l.value="checking",O()):l.value="unspecified";const M=(0,u.iH)(JSON.parse(localStorage.getItem("__5dbwat_proj__thost_preference")||'{"enterImmediatelyAfterCheckingAPI":false}'));return(e,B)=>((0,a.wg)(),(0,a.j4)((0,u.SU)(i.Z),{show:!0},{default:(0,a.w5)((()=>[(0,a._)("div",null,["unspecified"==l.value?((0,a.wg)(),(0,a.j4)((0,u.SU)(r.ZP),{key:0,style:{width:"600px"},title:"你可能需要指定一个API地址",bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{footer:(0,a.w5)((()=>[])),default:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(d.Z),null,{default:(0,a.w5)((()=>[g])),_:1}),(0,a.Wm)((0,u.SU)(d.Z),null,{default:(0,a.w5)((()=>[h,(0,a.Wm)((0,u.SU)(n.Z),{code:""},{default:(0,a.w5)((()=>[m])),_:1}),p,(0,a.Wm)((0,u.SU)(n.Z),{code:""},{default:(0,a.w5)((()=>[S])),_:1})])),_:1}),(0,a.Wm)((0,u.SU)(s.Z)),(0,a.Wm)((0,u.SU)(w.Z),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(_.Z),{value:N.value,"onUpdate:value":B[0]||(B[0]=e=>N.value=e)},null,8,["value"]),(0,a.Wm)((0,u.SU)(c.Z),{type:"primary",loading:"checking"==J.value,onClick:O},{default:(0,a.w5)((()=>[y])),_:1},8,["loading"])])),_:1}),"success"==J.value?((0,a.wg)(),(0,a.j4)((0,u.SU)(v.Z),{key:0,title:"API地址验证成功",type:"success"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(d.Z),null,{default:(0,a.w5)((()=>[Z])),_:1}),(0,a.Wm)((0,u.SU)(c.Z),{type:"primary",onClick:F,disabled:"success"!=J.value},{default:(0,a.w5)((()=>[I])),_:1},8,["disabled"])])),_:1})):(0,a.kq)("v-if",!0),"error"==J.value?((0,a.wg)(),(0,a.j4)((0,u.SU)(v.Z),{key:1,title:"API地址验证失败",type:"error"},{default:(0,a.w5)((()=>[A,(0,a.Wm)((0,u.SU)(U.Z),{log:D.value,rows:5},null,8,["log"])])),_:1})):(0,a.kq)("v-if",!0)])),_:1})):(0,a.kq)("v-if",!0),"checking"==l.value?((0,a.wg)(),(0,a.j4)((0,u.SU)(r.ZP),{key:1,style:{width:"600px"},title:"我们需要确认你指定的API地址是可用的",bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{footer:(0,a.w5)((()=>[])),default:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(d.Z),null,{default:(0,a.w5)((()=>[W])),_:1}),(0,a.Wm)((0,u.SU)(d.Z),null,{default:(0,a.w5)((()=>[P,(0,a.Wm)((0,u.SU)(n.Z),{code:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t))])),_:1}),b,(0,a.Wm)((0,u.SU)(n.Z),{code:""},{default:(0,a.w5)((()=>[j])),_:1})])),_:1}),(0,a.Wm)((0,u.SU)(d.Z),null,{default:(0,a.w5)((()=>[C,(0,a.Wm)((0,u.SU)(n.Z),{code:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(N.value),1)])),_:1}),(0,a.Wm)((0,u.SU)(c.Z),{type:"text",onClick:B[1]||(B[1]=e=>(l.value="unspecified",J.value="nothing"))},{default:(0,a.w5)((()=>[q])),_:1})])),_:1}),(0,a.Wm)((0,u.SU)(s.Z)),(0,a.Wm)((0,u.SU)(k.Z),{show:"checking"==J.value},{default:(0,a.w5)((()=>["checking"==J.value?((0,a.wg)(),(0,a.j4)((0,u.SU)(v.Z),{key:0,title:"正在等待响应",type:"info"})):(0,a.kq)("v-if",!0)])),_:1},8,["show"]),"success"==J.value?((0,a.wg)(),(0,a.j4)((0,u.SU)(v.Z),{key:0,title:"API地址验证成功",type:"success"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(d.Z),null,{default:(0,a.w5)((()=>[x])),_:1}),(0,a.Wm)((0,u.SU)(c.Z),{type:"primary",onClick:F,disabled:"success"!=J.value},{default:(0,a.w5)((()=>[E])),_:1},8,["disabled"]),(0,a.Wm)((0,u.SU)(d.Z),null,{default:(0,a.w5)((()=>[H,(0,a.Wm)((0,u.SU)(f.Z),{value:M.value.enterImmediatelyAfterCheckingAPI,"onUpdate:value":B[2]||(B[2]=e=>M.value.enterImmediatelyAfterCheckingAPI=e)},null,8,["value"])])),_:1})])),_:1})):(0,a.kq)("v-if",!0),"error"==J.value?((0,a.wg)(),(0,a.j4)((0,u.SU)(v.Z),{key:1,title:"API地址验证失败",type:"error"},{default:(0,a.w5)((()=>[L,(0,a.Wm)((0,u.SU)(U.Z),{log:D.value,rows:5},null,8,["log"])])),_:1})):(0,a.kq)("v-if",!0)])),_:1})):(0,a.kq)("v-if",!0),"waiting"==l.value?((0,a.wg)(),(0,a.j4)((0,u.SU)(r.ZP),{key:2,style:{width:"600px"},title:"Waiting",bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{default:(0,a.w5)((()=>[z])),_:1})):(0,a.kq)("v-if",!0)])])),_:1}))}},J={key:0},O={key:1},D={setup(e){const t=(0,u.iH)(!1);var l;return"entryAllowStateUpdate",l=(e,l)=>{console.log(e,l),t.value=e},window.EventList=window.EventList||{},window.EventList.entryAllowStateUpdate=l,(e,l)=>{const u=(0,a.up)("router-view");return t.value?((0,a.wg)(),(0,a.iD)("div",J,[(0,a.Wm)(u)])):((0,a.wg)(),(0,a.iD)("div",O,[(0,a.Wm)(N)]))}}}}}]);