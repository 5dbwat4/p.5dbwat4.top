"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[708],{9708:(e,t,a)=>{a.r(t),a.d(t,{default:()=>W});var l=a(7875),u=a(641),n=a(2240),i=a(8),s=a(4849),v=a(5093),o=a(5713),c=a(3923),d=a(5473),r=a(7972),h=a(4435);const p={key:0},k=[(0,l._)("span",null,"正在查询Syncbatch状态",-1)],w={key:1},g=(0,l._)("span",null,"尚未开始Syncbatch",-1),_=(0,l.Uk)("现在开始"),y={key:2},b=(0,l._)("span",null,"已经开始Syncbatch",-1),f={key:0},S=(0,l.Uk)("修改Title"),m=(0,l.Uk)("保存为Group"),U=(0,l.Uk)("终止"),Z=(0,l.Uk)("View"),j=(0,l._)("div",null,null,-1),W={setup(e){c.Z.registerLanguage("json",d.Z);const t=(0,u.iH)(0),a=(0,u.iH)({started:!1,currentids:[],title:""}),W=(0,u.iH)("");h.b.get("/api/syncbatch/sync-session").then((e=>{a.value=e.data,t.value=1,a.value.started&&(W.value=a.value.title,H())}));const C=()=>{t.value=2,h.b.post("/api/syncbatch/start-session",{title:W.value,time:(new Date).getTime()}).then((e=>{a.value=e.data,t.value=1,H()}))};let D=!0;(0,r.onBeforeRouteLeave)((()=>{D=!1}));const H=()=>{t.value=2,h.b.get("/api/syncbatch/sync-session").then((e=>{a.value=e.data,t.value=1,D&&setTimeout(H,1500)}))},T=()=>{t.value=2,h.b.post("/api/syncbatch/edit-title",{title:W.value}).then((e=>{a.value=e.data,t.value=1}))},q=()=>{t.value=2,h.b.get("/api/syncbatch/kill-session").then((e=>{t.value=1}))},I=(0,u.iH)(!1),O=(0,u.iH)(!1),J=(0,u.iH)(""),L=()=>{I.value=!0,h.b.post("/api/group/new",{entry:a.value.currentids.join(","),timestamp:(new Date).getTime(),title:a.value.title,desc:""}).then((e=>{I.value=!1,O.value=!0,J.value=e.id}))};return(e,d)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)((0,u.SU)(n.Z),{hljs:(0,u.SU)(c.Z)},{default:(0,l.w5)((()=>[0==t.value?((0,l.wg)(),(0,l.iD)("div",p,k)):(0,l.kq)("v-if",!0),1!=t.value||a.value.started?(0,l.kq)("v-if",!0):((0,l.wg)(),(0,l.iD)("div",w,[g,(0,l.Wm)((0,u.SU)(i.Z),{value:W.value,"onUpdate:value":d[0]||(d[0]=e=>W.value=e)},null,8,["value"]),(0,l.Wm)((0,u.SU)(s.Z),{onClick:C},{default:(0,l.w5)((()=>[_])),_:1})])),a.value.started?((0,l.wg)(),(0,l.iD)("div",y,[b,2==t.value?((0,l.wg)(),(0,l.iD)("span",f,"正在发送API请求")):(0,l.kq)("v-if",!0),(0,l.Wm)((0,u.SU)(v.Z),{show:2==t.value},{default:(0,l.w5)((()=>{return[(0,l.Wm)((0,u.SU)(o.Z),{code:(e=a.value,JSON.stringify(e,void 0,4))},null,8,["code"])];var e})),_:1},8,["show"]),(0,l.Wm)((0,u.SU)(i.Z),{value:W.value,"onUpdate:value":d[1]||(d[1]=e=>W.value=e)},null,8,["value"]),(0,l.Wm)((0,u.SU)(s.Z),{onClick:T},{default:(0,l.w5)((()=>[S])),_:1}),(0,l.Wm)((0,u.SU)(s.Z),{onClick:L},{default:(0,l.w5)((()=>[m])),_:1}),(0,l.Wm)((0,u.SU)(s.Z),{onClick:q},{default:(0,l.w5)((()=>[U])),_:1}),O.value?((0,l.wg)(),(0,l.j4)((0,u.SU)(s.Z),{key:1,onClick:d[2]||(d[2]=t=>e.$router.push("/group/"+J.value))},{default:(0,l.w5)((()=>[Z])),_:1})):(0,l.kq)("v-if",!0)])):(0,l.kq)("v-if",!0)])),_:1},8,["hljs"]),j],64))}}},4435:(e,t,a)=>{a.d(t,{b:()=>l});const l={get:async e=>await fetch(localStorage.getItem("__5dbwat_proj__thost_apihost")+e).then((e=>e.json())),post:async(e,t)=>await fetch(localStorage.getItem("__5dbwat_proj__thost_apihost")+e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((e=>e.json()))}}}]);