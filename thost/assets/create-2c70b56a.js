import{f as j}from"./light-3c431b54.js";import{c as D,a as q}from"./cssr-b950d06d.js";import{v as z,aZ as F,a2 as J,X as V,J as U,af as X}from"./index-c2ed52a5.js";const C="v-hidden",Z=q("[v-hidden]",{display:"none!important"}),H=z({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateCount:Function,onUpdateOverflow:Function},setup(e,{slots:n}){const t=F(null),r=F(null);function s(o){const{value:c}=t,{getCounter:h,getTail:a}=e;let u;if(h!==void 0?u=h():u=r.value,!c||!u)return;u.hasAttribute(C)&&u.removeAttribute(C);const{children:d}=c;if(o.showAllItemsBeforeCalculate)for(const g of d)g.hasAttribute(C)&&g.removeAttribute(C);const b=c.offsetWidth,L=[],y=n.tail?a==null?void 0:a():null;let N=y?y.offsetWidth:0,S=!1;const A=c.children.length-(n.tail?1:0);for(let g=0;g<A-1;++g){if(g<0)continue;const i=d[g];if(S){i.hasAttribute(C)||i.setAttribute(C,"");continue}else i.hasAttribute(C)&&i.removeAttribute(C);const l=i.offsetWidth;if(N+=l,L[g]=l,N>b){const{updateCounter:v}=e;for(let k=g;k>=0;--k){const m=A-1-k;v!==void 0?v(m):u.textContent=`${m}`;const w=u.offsetWidth;if(N-=L[k],N+w<=b||k===0){S=!0,g=k-1,y&&(g===-1?(y.style.maxWidth=`${b-w}px`,y.style.boxSizing="border-box"):y.style.maxWidth="");const{onUpdateCount:p}=e;p&&p(m);break}}}}const{onUpdateOverflow:K}=e;S?K!==void 0&&K(!0):(K!==void 0&&K(!1),u.setAttribute(C,""))}const f=j();return Z.mount({id:"vueuc/overflow",head:!0,anchorMetaName:D,ssr:f}),J(()=>s({showAllItemsBeforeCalculate:!1})),{selfRef:t,counterRef:r,sync:s}},render(){const{$slots:e}=this;return V(()=>this.sync({showAllItemsBeforeCalculate:!1})),U("div",{class:"v-overflow",ref:"selfRef"},[X(e,"default"),e.counter?e.counter():U("span",{style:{display:"inline-block"},ref:"counterRef"}),e.tail?e.tail():null])}});function W(e){return Array.isArray(e)?e:[e]}const P={STOP:"STOP"};function I(e,n){const t=n(e);e.children!==void 0&&t!==P.STOP&&e.children.forEach(r=>I(r,n))}function Q(e,n={}){const{preserveGroup:t=!1}=n,r=[],s=t?o=>{o.isLeaf||(r.push(o.key),f(o.children))}:o=>{o.isLeaf||(o.isGroup||r.push(o.key),f(o.children))};function f(o){o.forEach(s)}return f(e),r}function Y(e,n){const{isLeaf:t}=e;return t!==void 0?t:!n(e)}function _(e){return e.children}function ee(e){return e.key}function te(){return!1}function ne(e,n){const{isLeaf:t}=e;return!(t===!1&&!Array.isArray(n(e)))}function re(e){return e.disabled===!0}function oe(e,n){return e.isLeaf===!1&&!Array.isArray(n(e))}function O(e){var n;return e==null?[]:Array.isArray(e)?e:(n=e.checkedKeys)!==null&&n!==void 0?n:[]}function E(e){var n;return e==null||Array.isArray(e)?[]:(n=e.indeterminateKeys)!==null&&n!==void 0?n:[]}function se(e,n){const t=new Set(e);return n.forEach(r=>{t.has(r)||t.add(r)}),Array.from(t)}function ie(e,n){const t=new Set(e);return n.forEach(r=>{t.has(r)&&t.delete(r)}),Array.from(t)}function le(e){return(e==null?void 0:e.type)==="group"}function ae(e){const n=new Map;return e.forEach((t,r)=>{n.set(t.key,r)}),t=>{var r;return(r=n.get(t))!==null&&r!==void 0?r:null}}class R extends Error{constructor(){super(),this.message="SubtreeNotLoadedError: checking a subtree whose required nodes are not fully loaded."}}function ce(e,n,t,r){return x(n.concat(e),t,r,!1)}function ue(e,n){const t=new Set;return e.forEach(r=>{const s=n.treeNodeMap.get(r);if(s!==void 0){let f=s.parent;for(;f!==null&&!(f.disabled||t.has(f.key));)t.add(f.key),f=f.parent}}),t}function de(e,n,t,r){const s=x(n,t,r,!1),f=x(e,t,r,!0),o=ue(e,t),c=[];return s.forEach(h=>{(f.has(h)||o.has(h))&&c.push(h)}),c.forEach(h=>s.delete(h)),s}function G(e,n){const{checkedKeys:t,keysToCheck:r,keysToUncheck:s,indeterminateKeys:f,cascade:o,leafOnly:c,checkStrategy:h,allowNotLoaded:a}=e;if(!o)return r!==void 0?{checkedKeys:se(t,r),indeterminateKeys:Array.from(f)}:s!==void 0?{checkedKeys:ie(t,s),indeterminateKeys:Array.from(f)}:{checkedKeys:Array.from(t),indeterminateKeys:Array.from(f)};const{levelTreeNodeMap:u}=n;let d;s!==void 0?d=de(s,t,n,a):r!==void 0?d=ce(r,t,n,a):d=x(t,n,a,!1);const b=h==="parent",L=h==="child"||c,y=d,N=new Set,S=Math.max.apply(null,Array.from(u.keys()));for(let A=S;A>=0;A-=1){const K=A===0,g=u.get(A);for(const i of g){if(i.isLeaf)continue;const{key:l,shallowLoaded:v}=i;if(L&&v&&i.children.forEach(p=>{!p.disabled&&!p.isLeaf&&p.shallowLoaded&&y.has(p.key)&&y.delete(p.key)}),i.disabled||!v)continue;let k=!0,m=!1,w=!0;for(const p of i.children){const M=p.key;if(!p.disabled){if(w&&(w=!1),y.has(M))m=!0;else if(N.has(M)){m=!0,k=!1;break}else if(k=!1,m)break}}k&&!w?(b&&i.children.forEach(p=>{!p.disabled&&y.has(p.key)&&y.delete(p.key)}),y.add(l)):m&&N.add(l),K&&L&&y.has(l)&&y.delete(l)}}return{checkedKeys:Array.from(y),indeterminateKeys:Array.from(N)}}function x(e,n,t,r){const{treeNodeMap:s,getChildren:f}=n,o=new Set,c=new Set(e);return e.forEach(h=>{const a=s.get(h);a!==void 0&&I(a,u=>{if(u.disabled)return P.STOP;const{key:d}=u;if(!o.has(d)&&(o.add(d),c.add(d),oe(u.rawNode,f))){if(r)return P.STOP;if(!t)throw new R}})}),c}function fe(e,{includeGroup:n=!1,includeSelf:t=!0},r){var s;const f=r.treeNodeMap;let o=e==null?null:(s=f.get(e))!==null&&s!==void 0?s:null;const c={keyPath:[],treeNodePath:[],treeNode:o};if(o!=null&&o.ignored)return c.treeNode=null,c;for(;o;)!o.ignored&&(n||!o.isGroup)&&c.treeNodePath.push(o),o=o.parent;return c.treeNodePath.reverse(),t||c.treeNodePath.pop(),c.keyPath=c.treeNodePath.map(h=>h.key),c}function he(e){if(e.length===0)return null;const n=e[0];return n.isGroup||n.ignored||n.disabled?n.getNext():n}function ye(e,n){const t=e.siblings,r=t.length,{index:s}=e;return n?t[(s+1)%r]:s===t.length-1?null:t[s+1]}function B(e,n,{loop:t=!1,includeDisabled:r=!1}={}){const s=n==="prev"?ge:ye,f={reverse:n==="prev"};let o=!1,c=null;function h(a){if(a!==null){if(a===e){if(!o)o=!0;else if(!e.disabled&&!e.isGroup){c=e;return}}else if((!a.disabled||r)&&!a.ignored&&!a.isGroup){c=a;return}if(a.isGroup){const u=T(a,f);u!==null?c=u:h(s(a,t))}else{const u=s(a,!1);if(u!==null)h(u);else{const d=pe(a);d!=null&&d.isGroup?h(s(d,t)):t&&h(s(a,!0))}}}}return h(e),c}function ge(e,n){const t=e.siblings,r=t.length,{index:s}=e;return n?t[(s-1+r)%r]:s===0?null:t[s-1]}function pe(e){return e.parent}function T(e,n={}){const{reverse:t=!1}=n,{children:r}=e;if(r){const{length:s}=r,f=t?s-1:0,o=t?-1:s,c=t?-1:1;for(let h=f;h!==o;h+=c){const a=r[h];if(!a.disabled&&!a.ignored)if(a.isGroup){const u=T(a,n);if(u!==null)return u}else return a}}return null}const ve={getChild(){return this.ignored?null:T(this)},getParent(){const{parent:e}=this;return e!=null&&e.isGroup?e.getParent():e},getNext(e={}){return B(this,"next",e)},getPrev(e={}){return B(this,"prev",e)}};function ke(e,n){const t=n?new Set(n):void 0,r=[];function s(f){f.forEach(o=>{r.push(o),!(o.isLeaf||!o.children||o.ignored)&&(o.isGroup||t===void 0||t.has(o.key))&&s(o.children)})}return s(e),r}function me(e,n){const t=e.key;for(;n;){if(n.key===t)return!0;n=n.parent}return!1}function $(e,n,t,r,s,f=null,o=0){const c=[];return e.forEach((h,a)=>{var u;const d=Object.create(r);if(d.rawNode=h,d.siblings=c,d.level=o,d.index=a,d.isFirstChild=a===0,d.isLastChild=a+1===e.length,d.parent=f,!d.ignored){const b=s(h);Array.isArray(b)&&(d.children=$(b,n,t,r,s,d,o+1))}c.push(d),n.set(d.key,d),t.has(o)||t.set(o,[]),(u=t.get(o))===null||u===void 0||u.push(d)}),c}function be(e,n={}){var t;const r=new Map,s=new Map,{getDisabled:f=re,getIgnored:o=te,getIsGroup:c=le,getKey:h=ee}=n,a=(t=n.getChildren)!==null&&t!==void 0?t:_,u=n.ignoreEmptyChildren?i=>{const l=a(i);return Array.isArray(l)?l.length?l:null:l}:a,d=Object.assign({get key(){return h(this.rawNode)},get disabled(){return f(this.rawNode)},get isGroup(){return c(this.rawNode)},get isLeaf(){return Y(this.rawNode,u)},get shallowLoaded(){return ne(this.rawNode,u)},get ignored(){return o(this.rawNode)},contains(i){return me(this,i)}},ve),b=$(e,r,s,d,u);function L(i){if(i==null)return null;const l=r.get(i);return l&&!l.isGroup&&!l.ignored?l:null}function y(i){if(i==null)return null;const l=r.get(i);return l&&!l.ignored?l:null}function N(i,l){const v=y(i);return v?v.getPrev(l):null}function S(i,l){const v=y(i);return v?v.getNext(l):null}function A(i){const l=y(i);return l?l.getParent():null}function K(i){const l=y(i);return l?l.getChild():null}const g={treeNodes:b,treeNodeMap:r,levelTreeNodeMap:s,maxLevel:Math.max(...s.keys()),getChildren:u,getFlattenedNodes(i){return ke(b,i)},getNode:L,getPrev:N,getNext:S,getParent:A,getChild:K,getFirstAvailableNode(){return he(b)},getPath(i,l={}){return fe(i,l,g)},getCheckedKeys(i,l={}){const{cascade:v=!0,leafOnly:k=!1,checkStrategy:m="all",allowNotLoaded:w=!1}=l;return G({checkedKeys:O(i),indeterminateKeys:E(i),cascade:v,leafOnly:k,checkStrategy:m,allowNotLoaded:w},g)},check(i,l,v={}){const{cascade:k=!0,leafOnly:m=!1,checkStrategy:w="all",allowNotLoaded:p=!1}=v;return G({checkedKeys:O(l),indeterminateKeys:E(l),keysToCheck:i==null?[]:W(i),cascade:k,leafOnly:m,checkStrategy:w,allowNotLoaded:p},g)},uncheck(i,l,v={}){const{cascade:k=!0,leafOnly:m=!1,checkStrategy:w="all",allowNotLoaded:p=!1}=v;return G({checkedKeys:O(l),indeterminateKeys:E(l),keysToUncheck:i==null?[]:W(i),cascade:k,leafOnly:m,checkStrategy:w,allowNotLoaded:p},g)},getNonLeafKeys(i={}){return Q(b,i)}};return g}export{R as S,H as V,ae as a,be as c};
