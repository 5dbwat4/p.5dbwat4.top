import{a8 as c,l as I,t as l,aE as o,m as y,bd as u,b7 as a,s as p,F as S,ae as F,bc as te,ab as le,a9 as oe,aZ as d,bf as f,as as re,j as T,k as U,__tla as ne}from"./index-c2ed52a5.js";import{useRouter as se,useRoute as ue}from"./vue-router-ee92e3b2.js";import{n as pe}from"./toScreenDSingle-d0be9dca.js";import{_ as ie}from"./_plugin-vue_export-helper-c27b6911.js";import{N as q}from"./Divider-3c6a8fe5.js";import{N as me}from"./Ellipsis-96e2d292.js";import{N as K}from"./Space-0b2fef7a.js";import{Z as Q}from"./zujuan-api-e7336a15.js";import{A as de}from"./APIHelper-c6c5541a.js";import{N as _e}from"./Popover-4ea150e0.js";import{N as g}from"./Cascader-e2e09c75.js";import{N as _}from"./FormItem-c12520d5.js";import{N as ve}from"./Form-75fc25dc.js";import{N as R}from"./InputNumber-bd44b0b3.js";import{N as b}from"./Button-591cb8c7.js";import{N as A}from"./Card-bc241d1a.js";import{N as k}from"./p-87ab3748.js";import"./light-3c431b54.js";import"./Tooltip-121d8b6c.js";import"./Close-4e65a8ab.js";import"./Icon-9d083982.js";import"./flatten-30e3eebb.js";import"./get-slot-1efb97e5.js";import"./format-length-c9d165c6.js";import"./Warning-fc401418.js";import"./Scrollbar-5b7370f2.js";import"./runtime-dom.esm-bundler-51aad541.js";import"./keysOf-5d5107c5.js";import"./index-80752888.js";import"./use-false-until-truthy-96bf4c79.js";import"./get-8a3b42fc.js";import"./use-memo-13475312.js";import"./cssr-b950d06d.js";import"./utils-20c36e7e.js";import"./use-is-mounted-912be460.js";import"./use-merged-state-5c1c3246.js";import"./use-compitable-c3112252.js";import"./next-frame-once-7035a838.js";import"./utils-ae16cb7a.js";import"./fade-in-scale-up.cssr-6d358681.js";import"./create-2c70b56a.js";import"./Loading-b36f50c8.js";import"./ChevronRight-473b2df6.js";import"./use-locale-ca0d0990.js";import"./index-975a2d8f.js";import"./Suffix-26bafbe6.js";import"./Tag-9a87d369.js";import"./Checkbox-7001ae57.js";import"./index-cbfaa337.js";import"./use-collection-e298bf2f.js";import"./Input-b50999c9.js";import"./light-951b0264.js";import"./Add-068f2940.js";import"./FadeInExpandTransition-3bfdffc9.js";import"./light-951fcd76.js";let W,ce=Promise.all([(()=>{try{return ne}catch{}})()]).then(async()=>{let L,O,x,j,V,$,z,B,H,M;L=C=>(le("data-v-5adc52e0"),C=C(),oe(),C),O={class:"header-info"},x={class:"header-info"},j={class:"header-info"},V={class:"header-info"},$=["innerHTML"],z=L(()=>y("p",{class:"paperSource"},"Included by:",-1)),B={class:"paperSourceId"},H={__name:"questionBlock.zjw.a",setup(C){return(i,m)=>(c(),I("div",null,[l(a(K),null,{default:o(()=>[y("p",O,u(i.$attrs.qcontent.diff.name)+"("+u(i.$attrs.qcontent.diff.value)+") ",1),l(a(q),{vertical:""}),y("p",x,u(i.$attrs.qcontent.type.name),1),l(a(q),{vertical:""}),y("p",j,"ID:"+u(i.$attrs.qcontent.id),1),l(a(q),{vertical:""}),y("p",V,[p(" Knowledge: "),l(a(me),{style:{"max-width":"240px"}},{default:o(()=>[p(u(i.$attrs.qcontent.knowledgeInfo),1)]),_:1})])]),_:1}),y("div",{innerHTML:a(pe)(i.$attrs.qcontent.body,{source:i.$attrs.qcontent.title})},null,8,$),y("div",null,[z,(c(!0),I(S,null,F(i.$attrs.qcontent.paperSources,r=>(c(),I("p",{class:"paperSource",style:te({fontWeight:r.name.includes("\u6C5F\u82CF")?600:400})},[p(u(r.name),1),y("span",B," ID:"+u(r.id),1)],4))),256))])]))}},M=ie(H,[["__scopeId","data-v-5adc52e0"]]),W={__name:"entry",setup(C){se(),ue();const i=d(!1),m=d({subjectsmap:[],areasmap:[],diffsmap:[],sourcesmap:[],typesmap:{},orderbymap:[],yearsmap:[],gradesmap:[],knowledgeInfomap:{}});Promise.all([{varname:"subjectsmap",co:()=>f(()=>import("./subjects-1684b75a.js"),[],import.meta.url)},{varname:"areasmap",co:()=>f(()=>import("./areas-df820616.js"),[],import.meta.url)},{varname:"diffsmap",co:()=>f(()=>import("./diffs-b381e85b.js"),[],import.meta.url)},{varname:"sourcesmap",co:()=>f(()=>import("./sources-b9c74b0e.js"),[],import.meta.url)},{varname:"typesmap",co:()=>f(()=>import("./questypeList.tree-33de5868.js"),[],import.meta.url)},{varname:"orderbymap",co:()=>f(()=>import("./orderby-e842d970.js"),[],import.meta.url)},{varname:"yearsmap",co:()=>f(()=>import("./years-ca6a149d.js"),[],import.meta.url)},{varname:"gradesmap",co:()=>f(()=>import("./grades-40a61e2e.js"),[],import.meta.url)},{varname:"knowledgeInfomap",co:()=>f(()=>import("./knowl-full-58d4a853.js"),[],import.meta.url)}].map(s=>new Promise(async(t,e)=>{m.value[s.varname]=(await s.co()).default,t()}))).then(s=>{i.value=!0}),re(),d(1);const r=d({types:0,sources:0,pageIndex:1,pageSize:10,orderBy:2,areas:0,grades:0,diffs:0,knowledges:0,years:0}),h=d(12);d([]);const E=d({avgdiff:0,avgPaperSourceCount:0,avgUseCount:0}),P=d(!0),N=d(!1),v=d([]),G=async()=>{function s(){return"/app-server/v1/ques/list/"+h.value+"?"+Object.entries(r.value).map(t=>t[0]+"="+t[1]).join("&")}await Q(s()).then(t=>{v.value.push(...t.data.list),console.log(v.value),J(v.value)})};function J(s){let t=0,e=0,w=0;s.forEach(n=>{t+=n.diff.value,e+=n.useCount,w+=n.paperSources.length,n.danas_info||(n.danas_info={},n.danas_info.day_to_now_CTN=Math.floor((new Date().getTime()-new Date(n.time).getTime())/1e3/60/24),n.danas_info.day_to_now_CTN<7&&(n.danas_info.day_to_now_CTN=7),n.danas_info.uc_t_rate=n.useCount/n.danas_info.day_to_now_CTN,n.danas_info.ucpps_t_rate=(n.useCount+n.paperSources.length*10)/n.danas_info.day_to_now_CTN,n.danas_info.best_t_rate=(n.useCount+n.paperSources.length*10)/n.danas_info.day_to_now_CTN)}),E.value={avgdiff:t/s.length,avgUseCount:e/s.length,avgPaperSourceCount:w/s.length}}const X=()=>{P.value=!1,N.value=!0,v.value=v.value.sort((s,t)=>t.danas_info.best_t_rate-s.danas_info.best_t_rate)},D=d(5),Z=s=>{let t=v.value.slice(0,s);console.log(t),Q("/app-server/v1/basket/"+h.value,"POST",{ids:t.map(e=>e.id).join(",")})},Y=async()=>{let s=[],t=[];Promise.all(v.value.map(e=>new Promise((w,n)=>{de.get("/api/qapi/is_collected/"+h.value+"/"+e.id).then(ae=>{ae.found||t.includes(e.id)||(s.push(e),t.push(e.id)),w()})}))).then(e=>{console.log(s),v.value=s.sort((w,n)=>n.danas_info.best_t_rate-w.danas_info.best_t_rate)})},ee=()=>{P.value=!0,N.value=!1};return(s,t)=>(c(),I(S,null,[P.value?(c(),T(a(A),{key:0},{default:o(()=>[l(a(_),{label:"Subject"},{default:o(()=>[l(a(g),{value:h.value,"onUpdate:value":t[0]||(t[0]=e=>h.value=e),options:m.value.subjectsmap,"check-strategy":"child","show-path":!0,"on-update:value":e=>{r.value.knowledges=0,r.value.types=0,h.value=e}},null,8,["value","options","on-update:value"])]),_:1}),i.value?(c(),T(a(ve),{key:0,"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging"},{default:o(()=>[l(a(_),{label:"\u96BE\u5EA6(diffs)"},{default:o(()=>[l(a(g),{value:r.value.diffs,"onUpdate:value":t[1]||(t[1]=e=>r.value.diffs=e),options:m.value.diffsmap,"check-strategy":"child","show-path":!0},null,8,["value","options"])]),_:1}),l(a(_),{label:"areas"},{default:o(()=>[l(a(g),{value:r.value.areas,"onUpdate:value":t[2]||(t[2]=e=>r.value.areas=e),options:m.value.areasmap,"check-strategy":"child","show-path":!0},null,8,["value","options"])]),_:1}),l(a(_),{label:"sources"},{default:o(()=>[l(a(g),{value:r.value.sources,"onUpdate:value":t[3]||(t[3]=e=>r.value.sources=e),options:m.value.sourcesmap,"check-strategy":"child","show-path":!0},null,8,["value","options"])]),_:1}),l(a(_),{label:"types"},{default:o(()=>[l(a(g),{value:r.value.types,"onUpdate:value":t[4]||(t[4]=e=>r.value.types=e),options:m.value.typesmap[""+h.value],"check-strategy":"all","show-path":!0},null,8,["value","options"])]),_:1}),l(a(_),{label:"knowledgeInfo"},{default:o(()=>[l(a(g),{value:r.value.knowledges,"onUpdate:value":t[5]||(t[5]=e=>r.value.knowledges=e),options:m.value.knowledgeInfomap[""+h.value],"check-strategy":"all","show-path":!0},null,8,["value","options"])]),_:1}),l(a(_),{label:"\u6392\u5E8F(orderBy)"},{default:o(()=>[l(a(g),{value:r.value.orderBy,"onUpdate:value":t[6]||(t[6]=e=>r.value.orderBy=e),options:m.value.orderbymap,"check-strategy":"all","show-path":!0},null,8,["value","options"])]),_:1}),l(a(_),{label:"\u5E74\u4EFD(years)"},{default:o(()=>[l(a(g),{value:r.value.years,"onUpdate:value":t[7]||(t[7]=e=>r.value.years=e),options:m.value.yearsmap,"check-strategy":"all","show-path":!0},null,8,["value","options"])]),_:1}),l(a(_),{label:"\u5E74\u7EA7(grades)"},{default:o(()=>[l(a(g),{value:r.value.grades,"onUpdate:value":t[8]||(t[8]=e=>r.value.grades=e),options:m.value.gradesmap,"check-strategy":"all","show-path":!0},null,8,["value","options"])]),_:1}),l(a(_),{label:"pageIndex"},{default:o(()=>[l(a(R),{value:r.value.pageIndex,"onUpdate:value":t[9]||(t[9]=e=>r.value.pageIndex=e),min:0},null,8,["value"])]),_:1}),l(a(_),{label:"pageSize"},{default:o(()=>[l(a(R),{value:r.value.pageSize,"onUpdate:value":t[10]||(t[10]=e=>r.value.pageSize=e)},null,8,["value"])]),_:1}),l(a(b),{onClick:G},{default:o(()=>[p("\u52A0\u5165\u81F3DA List")]),_:1}),l(a(b),{onClick:X},{default:o(()=>[p("\u5206\u6790")]),_:1})]),_:1})):U("",!0)]),_:1})):U("",!0),l(a(A),null,{default:o(()=>[l(a(k),null,{default:o(()=>[p("Currently On Queue:")]),_:1}),l(a(k),null,{default:o(()=>[p("Count:"+u(v.value.length),1)]),_:1}),l(a(k),null,{default:o(()=>[p("\u5E73\u5747\u96BE\u5EA6:"+u(E.value.avgdiff),1)]),_:1}),l(a(k),null,{default:o(()=>[p("\u5E73\u5747\u7EC4\u5377\u6B21:"+u(E.value.avgUseCount),1)]),_:1}),l(a(k),null,{default:o(()=>[p("\u5E73\u5747\u7528\u4E8E\u8BD5\u5377:"+u(E.value.avgPaperSourceCount),1)]),_:1})]),_:1}),N.value?(c(),T(a(A),{key:1},{default:o(()=>[l(a(b),{onClick:ee},{default:o(()=>[p("...\u7EE7\u7EED")]),_:1}),l(a(b),{onClick:Y},{default:o(()=>[p("\u5220\u9664\u5DF2\u6536\u5F55")]),_:1}),l(a(b),{onClick:t[11]||(t[11]=e=>Z(15))},{default:o(()=>[p("\u6536\u5F5515\u9898")]),_:1}),l(a(b),{onClick:t[12]||(t[12]=e=>Z(D.value))},{default:o(()=>[p("\u6536\u5F55...")]),_:1}),l(a(R),{value:D.value,"onUpdate:value":t[13]||(t[13]=e=>D.value=e),width:80},null,8,["value"]),(c(!0),I(S,null,F(v.value,e=>(c(),T(a(_e),{trigger:"hover"},{trigger:o(()=>[l(a(K),null,{default:o(()=>[l(a(k),null,{default:o(()=>[p("Rate:"+u(e.danas_info.best_t_rate)+" | useCount:"+u(e.useCount)+" | updatedAt:"+u(e.time)+" | ID: "+u(e.id)+" | "+u(e.diff.name)+" | "+u(e.type.name)+" | ",1)]),_:2},1024),l(a(b),{text:"",onClick:w=>s.RemoveDAChunk(e)},{default:o(()=>[p("Remove")]),_:2},1032,["onClick"])]),_:2},1024)]),default:o(()=>[l(M,{style:{width:"700px",height:"300px","overflow-y":"scroll"},qcontent:e},null,8,["qcontent"])]),_:2},1024))),256))]),_:1})):U("",!0)],64))}}});export{ce as __tla,W as default};
