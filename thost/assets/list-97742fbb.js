import{A as g}from"./APIHelper-5dc80534.js";import{useRoute as N,useRouter as R}from"./vue-router-3740985a.js";import{S as w,R as _,N as y}from"./SearchOutline-492f0b63.js";import{aZ as i,a8 as I,l as U,t as o,aE as s,b7 as a,F as $,J as d}from"./runtime-core.esm-bundler-c066f4bf.js";import{N as P}from"./Input-af324e3e.js";import{a as c}from"./Button-d0cd9be2.js";import{N as f}from"./Icon-6184ebf4.js";import{N as b}from"./InputGroup-62ef3a3b.js";import"./light-d6058c0b.js";import"./format-length-c9d165c6.js";import"./Icon-d321f943.js";import"./Warning-3558c7da.js";import"./Close-ebf3a9fb.js";import"./Scrollbar-24cda971.js";import"./runtime-dom.esm-bundler-caa8590e.js";import"./Checkbox-475099bc.js";import"./use-merged-state-89f8109f.js";import"./FadeInExpandTransition-ff940b4d.js";import"./use-memo-b9add725.js";import"./flatten-a133123b.js";import"./get-slot-1efb97e5.js";import"./Popover-c9633131.js";import"./fade-in-scale-up.cssr-e8989780.js";import"./use-false-until-truthy-a506b738.js";import"./_baseIsEqual-dedfc21f.js";import"./get-e8fa5947.js";import"./utils-d7fa52af.js";import"./use-compitable-42538ef7.js";import"./next-frame-once-7035a838.js";import"./Suffix-586fb6ff.js";import"./Dropdown-4813805f.js";import"./ChevronRight-989c7384.js";import"./create-e19b3023.js";import"./Ellipsis-54a8d8d8.js";import"./Tooltip-971e9ca1.js";import"./utils-1333c5ba.js";import"./use-locale-1c262ea4.js";import"./index-975a2d8f.js";import"./Tag-76f96a47.js";import"./attribute-2ee9e579.js";import"./light-261e8307.js";import"./index-cbfaa337.js";const Ce={__name:"list",setup(x){N();const h=R(),r=i(!0),n=i(!1),l=i(""),u=i([]),S=[{type:"selection"},{title:"uuid",key:"id"},{title:"title",key:"title"},{title:"submit time",render(e){return d("p",{},new Date(e.timestamp).toISOString())}},{title:"view",render(e){return d(c,{text:!0,onClick:()=>{h.push("/group/"+e.id)}},{default:()=>"View"})}}],k=i([]),z=e=>{k.value=e,console.log(e)},t=i({page:1,pageSize:10,showSizePicker:!0,itemCount:0,pageSizes:[5,10,20,50],onChange:e=>{t.value.page=e,r.value=!0,p()},onUpdatePageSize:e=>{t.value.pageSize=e,t.value.page=1,r.value=!0,p()}}),p=()=>{l.value==""?g.get(`/api/v2/group/list?offset=${(t.value.page-1)*t.value.pageSize}&pagesize=${t.value.pageSize}`).then(e=>{u.value=e.data,t.value.itemCount=e.count,r.value=!1,n.value=!1}):g.get(`/api/v2/group/list/search/uuid?q=${encodeURIComponent(l.value)}&offset=${(t.value.page-1)*t.value.pageSize}&pagesize=${t.value.pageSize}`).then(e=>{u.value=e.data,r.value=!1,n.value=!1})},C=e=>{l.value=e,n.value=!0,p()};return p(),(e,v)=>(I(),U($,null,[o(a(b),null,{default:s(()=>[o(a(P),{placeholder:"Search",value:l.value,"onUpdate:value":v[0]||(v[0]=m=>l.value=m),loading:n.value,"on-input":C},null,8,["value","loading"]),o(a(c),{onClick:e.handleSearch},{icon:s(()=>[o(a(f),{component:a(w)},null,8,["component"])]),_:1},8,["onClick"]),o(a(c),{onClick:p},{icon:s(()=>[o(a(f),{component:a(_)},null,8,["component"])]),_:1})]),_:1}),o(a(y),{remote:"",loading:r.value,pagination:t.value,data:u.value,columns:S,"onUpdate:checkedRowKeys":z,"row-key":m=>m.id,"visual-scroll":""},null,8,["loading","pagination","data","row-key"])],64))}};export{Ce as default};
