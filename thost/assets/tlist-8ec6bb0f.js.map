{"version":3,"file":"tlist-8ec6bb0f.js","sources":["../../src/views/zujuanink-v3/views/export/tlist.vue"],"sourcesContent":["<template>\r\n<div v-if=\"step==1\">\r\n    <p>标题：</p>\r\n    <n-input v-model:value=\"GPtitle\"></n-input>\r\n    <p>Group uuid：</p>\r\n    <n-input v-model:value=\"GPUUID\"></n-input>\r\n<p>标题形式：</p>\r\n<p>1:</p>\r\n<div class=\"bordered\">\r\n    <p style=\"font-size:6.5pt;font-family:'Times New Roman' , 仿宋;margin:0px\">\r\n                Generated by thost | Group UUID: {{GPUUID}} | Title: {{GPtitle}}</p>\r\n</div>\r\n<p>2:</p>\r\n<div class=\"bordered\">\r\n<div  style=\"text-align:center;font-family:Cambria , 仿宋;margin:0px\">\r\n                <p style=\"font-size:10pt;\">{{GPtitle}}</p>\r\n                <p style=\"font-size:6.5pt;\">Generated by thost | UUID: <span\r\n                        style=\"font-family:'courier new'\">{{GPUUID}}</span></p>\r\n            </div>\r\n        </div>\r\n\r\n\r\n        <p>3:</p>\r\n        <div class=\"bordered\">\r\n\r\n            <div style=\"text-align:center;font-family:黑体;margin:0px\">\r\n                <p style=\"font-size:10pt;\">{{GPtitle}}</p>\r\n            </div>\r\n        </div>\r\n\r\n        <n-input-number v-model:value=\"GTitleFormat\"></n-input-number>\r\n<p>正文信息：1，完整；2.题型+难度；3.仅含题号</p>\r\n<n-input-number v-model:value=\"GContentFormat\"></n-input-number>\r\n\r\n\r\n<n-button @click=\"step=2;initGQPContent()\">NEXT</n-button>\r\n</div>\r\n\r\n<div v-show=\"step==2\">\r\n\r\n<div id=\"_GQP_content_core\"  :style=\"{width:'18.76cm',columns:1,'line-height':'normal'}\">\r\n\r\n</div>\r\n\r\n</div>\r\n</template>\r\n<script setup>\r\n\r\nimport {ref,nextTick} from \"vue\"\r\nimport {NInput,NInputNumber,NButton} from \"naive-ui\"\r\n\r\n\r\nimport { useRouter,useRoute } from \"vue-router\";\r\nconst router=useRouter(),route=useRoute()\r\nconst step=ref(1)\r\n\r\nconst GPtitle=ref(\"\"),GPUUID=ref(\"\"),GTitleFormat=ref(1),GContentFormat=ref(1)\r\n\r\nimport { normalizeqA } from \"./nomorlize_q\"\r\n\r\nconst initGQPContent=async()=>{\r\n    let htmlelem=document.createElement(\"div\")\r\n    let ctncode=\"\"\r\n        ctncode+=`    <p style=\"font-size:6.5pt;font-family:'Times New Roman' , 仿宋;margin:0px\">\r\n                Generated by thost | Title: ${GPtitle.value}</p>`\r\n                ctncode+=\"<div>\"\r\n    for (let i = 0; i < window.TList.length; i++) {\r\n        const qcontent=window.TList[i]\r\n            ctncode+=`\r\n            <div class=\"qqmain\" id=\"qmain-${i}\">\r\n            <div class=\"qblock\" id=\"qblock-${i}\">${normalizeqA(qcontent.body,{GContentFormat,qcontent,index:i+1})}\r\n            \r\n            <div class=\"extb\" id=\"extb-${i}\"></div>    </div>\r\n\r\n            \r\n            </div>\r\n            `\r\n    }\r\n    ctncode+=\"</div>\"\r\n    document.getElementById(\"_GQP_content_core\").innerHTML=ctncode\r\n    function toTable(opts,lns){\r\n    if(lns==1){\r\n        return \"<tbody><tr>\"+opts.join(\"\")+\"</tr></tbody>\"\r\n    }\r\n    if(lns==2){\r\n        return `<tbody><tr>${opts[0]}${opts[1]}</tr><tr>${opts[2]}${opts[3]}</tr></tbody>`\r\n    }\r\n    if(lns==4){\r\n        return \"<tbody><tr>\"+opts.join(\"</tr><tr>\")+\"</tr></tbody>\"\r\n    }\r\n}\r\nawait nextTick()\r\n    document.getElementById(\"_GQP_content_core\").querySelectorAll(\"table[name=optionsTable]\").forEach(v=>{\r\n        let ops=[],maxw=0\r\n        v.querySelectorAll(\"td\").forEach(oo=>{\r\n                maxw=Math.max(maxw,oo.querySelector(\"span\").clientWidth)\r\n                ops.push(oo.outerHTML)\r\n            })\r\n            console.log(maxw);\r\n        if(maxw>=v.clientWidth/2){\r\n\r\n        }else if(maxw>=v.clientWidth/4){\r\n            v.innerHTML=toTable(ops,2)\r\n            console.log(2);\r\n        }else{\r\n            v.innerHTML=toTable(ops,1)\r\n            console.log(4);\r\n        }\r\n        // console.log(v.innerHTML);\r\n        \r\n    })\r\n\r\n    window.HTMLExportString=document.getElementById(\"_GQP_content_core\").innerHTML\r\n    router.push(\"/gen/\"+GPUUID.value)\r\n    return \"Inited.\"\r\n}\r\n</script>\r\n\r\n\r\n<style>\r\n.bordered{\r\nborder: 1px dashed red;\r\n}\r\n</style>"],"names":["router","useRouter","useRoute","step","ref","GPtitle","GPUUID","GTitleFormat","GContentFormat","initGQPContent","ctncode","i","qcontent","normalizeqA","toTable","opts","lns","nextTick","v","ops","maxw","oo"],"mappings":"opDAqDA,MAAAA,EAAAC,EAAA,EAAAC,EAAA,EACA,MAAAC,EAAAC,EAAA,CAAA,EAEAC,EAAAD,EAAA,EAAA,EAAAE,EAAAF,EAAA,EAAA,EAAAG,EAAAH,EAAA,CAAA,EAAAI,EAAAJ,EAAA,CAAA,EAIAK,EAAA,SAAA,CACA,SAAA,cAAA,KAAA,EACA,IAAAC,EAAA,GACAA,GAAA;AAAA,8CACAL,EAAA,KAAA,OACAK,GAAA,QACA,QAAAC,EAAA,EAAAA,EAAA,OAAA,MAAA,OAAAA,IAAA,CACA,MAAAC,EAAA,OAAA,MAAAD,CAAA,EACAD,GAAA;AAAA,4CACAC,CAAA;AAAA,6CACAA,CAAA,KAAAE,EAAAD,EAAA,KAAA,CAAA,eAAAJ,EAAA,SAAAI,EAAA,MAAAD,EAAA,CAAA,CAAA,CAAA;AAAA;AAAA,yCAEAA,CAAA;AAAA;AAAA;AAAA;AAAA,aAKA,CACAD,GAAA,SACA,SAAA,eAAA,mBAAA,EAAA,UAAAA,EACA,SAAAI,EAAAC,EAAAC,EAAA,CACA,GAAAA,GAAA,EACA,MAAA,cAAAD,EAAA,KAAA,EAAA,EAAA,gBAEA,GAAAC,GAAA,EACA,MAAA,cAAAD,EAAA,CAAA,CAAA,GAAAA,EAAA,CAAA,CAAA,YAAAA,EAAA,CAAA,CAAA,GAAAA,EAAA,CAAA,CAAA,gBAEA,GAAAC,GAAA,EACA,MAAA,cAAAD,EAAA,KAAA,WAAA,EAAA,eAEA,CACA,aAAAE,EAAA,EACA,SAAA,eAAA,mBAAA,EAAA,iBAAA,0BAAA,EAAA,QAAAC,GAAA,CACA,IAAAC,EAAA,GAAAC,EAAA,EACAF,EAAA,iBAAA,IAAA,EAAA,QAAAG,GAAA,CACAD,EAAA,KAAA,IAAAA,EAAAC,EAAA,cAAA,MAAA,EAAA,WAAA,EACAF,EAAA,KAAAE,EAAA,SAAA,CACA,CAAA,EACA,QAAA,IAAAD,CAAA,EACAA,GAAAF,EAAA,YAAA,IAEAE,GAAAF,EAAA,YAAA,GACAA,EAAA,UAAAJ,EAAAK,EAAA,CAAA,EACA,QAAA,IAAA,CAAA,IAEAD,EAAA,UAAAJ,EAAAK,EAAA,CAAA,EACA,QAAA,IAAA,CAAA,GAIA,CAAA,EAEA,OAAA,iBAAA,SAAA,eAAA,mBAAA,EAAA,UACAnB,EAAA,KAAA,QAAAM,EAAA,KAAA,EACA,SACA"}