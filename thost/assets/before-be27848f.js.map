{"version":3,"file":"before-be27848f.js","sources":["../../src/views/zujuanink-v3/views/before.vue"],"sourcesContent":["<template>\r\n  <div class=\"loader-container\">\r\n    <div class=\"loader\"></div>\r\n    <p class=\"loader-info\">正在鉴权</p>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { API } from \"../../../shared/APIHelper\";\r\nimport { useNotification } from \"naive-ui\";\r\nconst notification = useNotification();\r\nimport { useRouter, useRoute } from \"vue-router\";\r\nconst router = useRouter(),\r\n  route = useRoute();\r\n\r\nAPI.get(\"/zujuan-ink-be-core/auth/status\").then((v) => {\r\n  if (v.auth) {\r\n    router.push(\"./home\");\r\n  } else {\r\n    if (localStorage.getItem(\"__thost_zujuanink_auth\")) {\r\n      const AutologinSetting = JSON.parse(\r\n        localStorage.getItem(\"__thost_zujuanink_auth\")\r\n      );\r\n      if (AutologinSetting.autologin) {\r\n        API.post(\"/zujuan-ink-be-core/auth/json/login\", {\r\n          password: AutologinSetting.authcode,\r\n        }).then((v) => {\r\n          notification.success({\r\n            content: \"已连接至API并成功鉴权。\",\r\n            duration: 2000,\r\n          });\r\n          router.push(\"./home\");\r\n        });\r\n      } else {\r\n        router.push(\"./settings\");\r\n      }\r\n    } else {\r\n      router.push(\"./settings\");\r\n    }\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.loader-container {\r\n  width: fit-content;\r\n  display: block;\r\n  margin: 0 auto;\r\n  text-align: center;\r\n}\r\n.loader-info {\r\n  font-family: Cambria, \"kaiti\", Cochin, Georgia, Times, \"Times New Roman\",\r\n    serif;\r\n}\r\n.loader {\r\n  width: 48px;\r\n  height: 48px;\r\n  border: 3px solid #362a79;\r\n  border-radius: 50%;\r\n  display: inline-block;\r\n  position: relative;\r\n  -webkit-animation: rotation 1s linear infinite;\r\n  animation: rotation 1s linear infinite;\r\n}\r\n.loader:after {\r\n  content: \"\";\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translate(-50%, -50%);\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n  border: 3px solid;\r\n  border-color: #8960d9 transparent;\r\n}\r\n@-webkit-keyframes rotation {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n@keyframes rotation {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n</style>\r\n"],"names":["notification","useNotification","router","useRouter","useRoute","API","v","AutologinSetting"],"mappings":"orBASA,MAAAA,EAAAC,EAAA,EAEAC,EAAAC,EAAA,EACA,OAAAC,EAAA,EAEAC,EAAA,IAAA,iCAAA,EAAA,KAAAC,GAAA,CACA,GAAAA,EAAA,KACAJ,EAAA,KAAA,QAAA,UAEA,aAAA,QAAA,wBAAA,EAAA,CACA,MAAAK,EAAA,KAAA,MACA,aAAA,QAAA,wBAAA,CACA,EACAA,EAAA,UACAF,EAAA,KAAA,sCAAA,CACA,SAAAE,EAAA,QACA,CAAA,EAAA,KAAAD,GAAA,CACAN,EAAA,QAAA,CACA,QAAA,gBACA,SAAA,GACA,CAAA,EACAE,EAAA,KAAA,QAAA,CACA,CAAA,EAEAA,EAAA,KAAA,YAAA,CAEA,MACAA,EAAA,KAAA,YAAA,CAGA,CAAA"}