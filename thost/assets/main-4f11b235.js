import{v as J,J as k,O as ie,aZ as S,i as O,a2 as le,az as ae,b3 as D,aa as se,X,a8 as y,j as w,aE as l,m as ce,b7 as n,t as a,s as u,k as R,bd as Y,ag as ue,l as K}from"./runtime-core.esm-bundler-c066f4bf.js";import{i as de,N as fe}from"./APIHelper-c9b99a18.js";import{N as U}from"./Card-40f9cb29.js";import{N as L}from"./p-d7e0cfbf.js";import{N as z}from"./text-7102f01a.js";import{N as G}from"./Divider-430ce100.js";import{N as me}from"./InputGroup-63dc8180.js";import{N as ge}from"./Input-cf865318.js";import{N as he,a as M}from"./Button-68cb5d7d.js";import{N as B}from"./Alert-cf605fdb.js";import{T as pe}from"./runtime-dom.esm-bundler-caa8590e.js";import{u as ve}from"./use-locale-5324fa07.js";import{i as W,r as _e,c as be,a as ye,b as xe,d as V,e as Te,f as Ie,u as Ne,g as re,h as we,w as Z}from"./light-5802f424.js";import{f as ke}from"./fade-in-scale-up.cssr-e615339f.js";import{s as Ce,N as Se}from"./Scrollbar-068db0c3.js";import{c as Ae,u as Re,N as Le}from"./Code-94d1a146.js";import{i as Pe}from"./Icon-fde79c06.js";import{N as Ee}from"./Spin-ff5dfbad.js";import{N as He}from"./Switch-ba8e479d.js";import{N as je}from"./Modal-d88b004e.js";import"./format-length-c9d165c6.js";import"./Warning-459cf3e9.js";import"./Close-10bb4ae3.js";import"./use-memo-b9add725.js";import"./FadeInExpandTransition-ff940b4d.js";import"./light-111bcf27.js";import"./use-compitable-42538ef7.js";import"./use-merged-state-89f8109f.js";import"./light-a0d3ac36.js";import"./Suffix-768f3d5e.js";import"./fade-in-height-expand.cssr-ecae3bc2.js";import"./index-975a2d8f.js";import"./flatten-a133123b.js";import"./use-false-until-truthy-a506b738.js";import"./utils-d7fa52af.js";import"./index-cbfaa337.js";var ze=/\s/;function Be(e){for(var t=e.length;t--&&ze.test(e.charAt(t)););return t}var Oe=/^\s+/;function Me(e){return e&&e.slice(0,Be(e)+1).replace(Oe,"")}var Q=0/0,We=/^[-+]0x[0-9a-f]+$/i,$e=/^0b[01]+$/i,Fe=/^0o[0-7]+$/i,Ue=parseInt;function ee(e){if(typeof e=="number")return e;if(Pe(e))return Q;if(W(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=W(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Me(e);var r=$e.test(e);return r||Fe.test(e)?Ue(e.slice(2),r?2:8):We.test(e)?Q:+e}var Ve=function(){return _e.Date.now()};const q=Ve;var qe="Expected a function",De=Math.max,Je=Math.min;function Xe(e,t,r){var o,c,m,h,s,d,f=0,_=!1,x=!1,P=!0;if(typeof e!="function")throw new TypeError(qe);t=ee(t)||0,W(r)&&(_=!!r.leading,x="maxWait"in r,m=x?De(ee(r.maxWait)||0,t):m,P="trailing"in r?!!r.trailing:P);function H(i){var v=o,C=c;return o=c=void 0,f=i,h=e.apply(C,v),h}function $(i){return f=i,s=setTimeout(T,t),_?H(i):h}function F(i){var v=i-d,C=i-f,E=t-v;return x?Je(E,m-C):E}function j(i){var v=i-d,C=i-f;return d===void 0||v>=t||v<0||x&&C>=m}function T(){var i=q();if(j(i))return g(i);s=setTimeout(T,F(i))}function g(i){return s=void 0,P&&o?H(i):(o=c=void 0,h)}function p(){s!==void 0&&clearTimeout(s),f=0,o=d=c=s=void 0}function N(){return s===void 0?h:g(q())}function b(){var i=q(),v=j(i);if(o=arguments,c=this,d=i,v){if(s===void 0)return $(d);if(x)return clearTimeout(s),s=setTimeout(T,t),H(d)}return s===void 0&&(s=setTimeout(T,t)),h}return b.cancel=p,b.flush=N,b}var Ye="Expected a function";function Ke(e,t,r){var o=!0,c=!0;if(typeof e!="function")throw new TypeError(Ye);return W(r)&&(o="leading"in r?!!r.leading:o,c="trailing"in r?!!r.trailing:c),Xe(e,t,{leading:o,maxWait:t,trailing:c})}const Ge=e=>{const{textColor2:t,modalColor:r,borderColor:o,fontSize:c,primaryColor:m}=e;return{loaderFontSize:c,loaderTextColor:t,loaderColor:r,loaderBorder:`1px solid ${o}`,loadingColor:m}},Ze=be({name:"Log",common:ye,peers:{Scrollbar:Ce,Code:Ae},self:Ge}),Qe=Ze,et=J({name:"LogLoader",props:{clsPrefix:{type:String,required:!0}},setup(){return{locale:ve("Log").localeRef}},render(){const{clsPrefix:e}=this;return k("div",{class:`${e}-log-loader`},k(he,{clsPrefix:e,strokeWidth:24,scale:.85}),k("span",{class:`${e}-log-loader__content`},this.locale.loading))}}),ne=xe("n-log"),tt=J({props:{line:{type:String,default:""}},setup(e){const{trimRef:t,highlightRef:r,languageRef:o,mergedHljsRef:c}=ie(ne),m=S(null),h=O(()=>t.value?e.line.trim():e.line);function s(){m.value&&(m.value.innerHTML=d(o.value,h.value))}function d(f,_){const{value:x}=c;return x&&f&&x.getLanguage(f)?x.highlight(_,{language:f}).value:_}return le(()=>{r.value&&s()}),ae(D(e,"line"),()=>{r.value&&s()}),{highlight:r,selfRef:m,maybeTrimmedLines:h}},render(){const{highlight:e,maybeTrimmedLines:t}=this;return k("pre",{ref:"selfRef"},e?null:t)}}),ot=V("log",`
 position: relative;
 box-sizing: border-box;
 transition: border-color .3s var(--n-bezier);
`,[Te("pre",`
 white-space: pre-wrap;
 word-break: break-word;
 margin: 0;
 `),V("log-loader",`
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 box-sizing: border-box;
 position: absolute;
 right: 16px;
 top: 8px;
 height: 34px;
 border-radius: 17px;
 line-height: 34px;
 white-space: nowrap;
 overflow: hidden;
 border: var(--n-loader-border);
 color: var(--n-loader-text-color);
 background-color: var(--n-loader-color);
 font-size: var(--n-loader-font-size);
 `,[ke(),Ie("content",`
 display: inline-block;
 vertical-align: bottom;
 line-height: 34px;
 padding-left: 40px;
 padding-right: 20px;
 white-space: nowrap;
 `),V("base-loading",`
 color: var(--n-loading-color);
 position: absolute;
 left: 12px;
 top: calc(50% - 10px);
 font-size: 20px;
 width: 20px;
 height: 20px;
 display: inline-block;
 `)])]),rt=Object.assign(Object.assign({},re.props),{loading:Boolean,trim:Boolean,log:String,fontSize:{type:Number,default:14},lines:{type:Array,default:()=>[]},lineHeight:{type:Number,default:1.25},language:String,rows:{type:Number,default:15},offsetTop:{type:Number,default:0},offsetBottom:{type:Number,default:0},hljs:Object,onReachTop:Function,onReachBottom:Function,onRequireMore:Function}),te=J({name:"Log",props:rt,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:r}=Ne(e),o=S(!1),c=O(()=>e.language!==void 0),m=O(()=>`calc(${Math.round(e.rows*e.lineHeight*e.fontSize)}px)`),h=O(()=>{const{log:g}=e;return g?g.split(`
`):e.lines}),s=S(null),d=re("Log","-log",ot,Qe,e,t);function f(g){const p=g.target,N=p.firstElementChild;if(o.value){X(()=>{o.value=!1});return}const b=p.offsetHeight,i=p.scrollTop,v=N.offsetHeight,C=i,E=v-i-b;if(C<=e.offsetTop){const{onReachTop:A,onRequireMore:I}=e;I&&I("top"),A&&A()}if(E<=e.offsetBottom){const{onReachBottom:A,onRequireMore:I}=e;I&&I("bottom"),A&&A()}}const _=Ke(x,300);function x(g){if(o.value){X(()=>{o.value=!1});return}if(s.value){const{containerRef:p,contentRef:N}=s.value;if(p&&N){const b=p.offsetHeight,i=p.scrollTop,v=N.offsetHeight,C=i,E=v-i-b,A=g.deltaY;if(C===0&&A<0){const{onRequireMore:I}=e;I&&I("top")}if(E<=0&&A>0){const{onRequireMore:I}=e;I&&I("bottom")}}}}function P(g){const{value:p}=s;if(!p)return;const{slient:N,top:b,position:i}=g;N&&(o.value=!0),b!==void 0?p.scrollTo({left:0,top:b}):(i==="bottom"||i==="top")&&p.scrollTo({position:i})}function H(g=!1){Z("log","`scrollToTop` is deprecated, please use `scrollTo({ position: 'top'})` instead."),P({position:"top",slient:g})}function $(g=!1){Z("log","`scrollToTop` is deprecated, please use `scrollTo({ position: 'bottom'})` instead."),P({position:"bottom",slient:g})}se(ne,{languageRef:D(e,"language"),mergedHljsRef:Re(e),trimRef:D(e,"trim"),highlightRef:c});const F={scrollTo:P},j=O(()=>{const{self:{loaderFontSize:g,loaderTextColor:p,loaderColor:N,loaderBorder:b,loadingColor:i},common:{cubicBezierEaseInOut:v}}=d.value;return{"--n-bezier":v,"--n-loader-font-size":g,"--n-loader-border":b,"--n-loader-color":N,"--n-loader-text-color":p,"--n-loading-color":i}}),T=r?we("log",void 0,j,e):void 0;return Object.assign(Object.assign({},F),{mergedClsPrefix:t,scrollbarRef:s,mergedTheme:d,styleHeight:m,mergedLines:h,scrollToTop:H,scrollToBottom:$,handleWheel:_,handleScroll:f,cssVars:r?void 0:j,themeClass:T?.themeClass,onRender:T?.onRender})},render(){const{mergedClsPrefix:e,mergedTheme:t,onRender:r}=this;return r?.(),k("div",{class:[`${e}-log`,this.themeClass],style:[{lineHeight:this.lineHeight,height:this.styleHeight},this.cssVars],onWheelPassive:this.handleWheel},[k(Se,{ref:"scrollbarRef",theme:t.peers.Scrollbar,themeOverrides:t.peerOverrides.Scrollbar,onScroll:this.handleScroll},{default:()=>k(Le,{internalNoHighlight:!0,internalFontSize:this.fontSize,theme:t.peers.Code,themeOverrides:t.peerOverrides.Code},{default:()=>this.mergedLines.map((o,c)=>k(tt,{key:c,line:o}))})}),k(pe,{name:"fade-in-scale-up-transition"},{default:()=>this.loading?k(et,{clsPrefix:e}):null})])}});var nt=(e,t)=>{window.EventList=window.EventList||{},window.EventList[e]=t},it=(e,t=[])=>(window.EventList=window.EventList||{},window.EventList[e](...t));const oe="_5dbwat4_proj_thost_r3_be",lt={__name:"APIReminder",setup(e){const t=S("waiting"),r=S("https://example.com"),o=S("n"),c=()=>{o.value="checking",fetch(r.value+"/api/whoareyou").then(d=>d.json()).then(d=>{d.entity==oe?(o.value="success",s.value.enterImmediatelyAfterCheckingAPI&&h()):(o.value="error",m.value=`Not Match.==>
`+JSON.stringify(d,null,4))}).catch(d=>{o.value="error",m.value=`Error Fetching.==>
`+d})},m=S("nothing"),h=()=>{localStorage.setItem("__5dbwat_proj__thost_apihost",r.value),console.log("xxx"),localStorage.setItem("__5dbwat_proj__thost_preference",JSON.stringify(s.value)),it("entryAllowStateUpdate",[!0])};localStorage.getItem("__5dbwat_proj__thost_apihost")?(r.value=localStorage.getItem("__5dbwat_proj__thost_apihost"),t.value="checking",c()):t.value="unspecified";const s=S(JSON.parse(localStorage.getItem("__5dbwat_proj__thost_preference")||'{"enterImmediatelyAfterCheckingAPI":false}'));return de(),(d,f)=>(y(),w(n(je),{show:!0},{default:l(()=>[ce("div",null,[t.value=="unspecified"?(y(),w(n(U),{key:0,style:{width:"600px"},title:"你可能需要指定一个API地址",bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{footer:l(()=>[]),default:l(()=>[a(n(L),null,{default:l(()=>[u("你需要配合一个后端API才能正常的使用thost的相关功能。这就要求你指定一个API地址。")]),_:1}),a(n(L),null,{default:l(()=>[u("本版本的thost所需的API为："),a(n(z),{code:""},{default:l(()=>[u("_5dbwat4_proj_thost_r3_be")]),_:1}),u(" 版本为 "),a(n(z),{code:""},{default:l(()=>[u("r3")]),_:1})]),_:1}),a(n(G)),a(n(me),null,{default:l(()=>[a(n(ge),{value:r.value,"onUpdate:value":f[0]||(f[0]=_=>r.value=_)},null,8,["value"]),a(n(M),{type:"primary",loading:o.value=="checking",onClick:c},{default:l(()=>[u(" 检查API状态 ")]),_:1},8,["loading"])]),_:1}),o.value=="success"?(y(),w(n(B),{key:0,title:"API地址验证成功",type:"success"},{default:l(()=>[a(n(L),null,{default:l(()=>[u("API验证成功。开始使用thost吧！")]),_:1}),a(n(M),{type:"primary",onClick:h,disabled:o.value!="success"},{default:l(()=>[u("确定 ")]),_:1},8,["disabled"])]),_:1})):R("",!0),o.value=="error"?(y(),w(n(B),{key:1,title:"API地址验证失败",type:"error"},{default:l(()=>[u(" API验证失败。以下是相关信息: "),a(n(te),{log:m.value,rows:5},null,8,["log"])]),_:1})):R("",!0)]),_:1})):R("",!0),t.value=="checking"?(y(),w(n(U),{key:1,style:{width:"600px"},title:"我们需要确认你指定的API地址是可用的",bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{footer:l(()=>[]),default:l(()=>[a(n(L),null,{default:l(()=>[u("你需要配合一个后端API才能正常的使用thost的相关功能。你之前可能已经指定过一个。我们需要确认你指定的API地址是可用的。")]),_:1}),a(n(L),null,{default:l(()=>[u("本版本的thost所需的API为："),a(n(z),{code:""},{default:l(()=>[u(Y(oe))]),_:1}),u(" 版本为 "),a(n(z),{code:""},{default:l(()=>[u("r3")]),_:1})]),_:1}),a(n(L),null,{default:l(()=>[u("您指定的API地址是"),a(n(z),{code:""},{default:l(()=>[u(Y(r.value),1)]),_:1}),a(n(M),{type:"text",onClick:f[1]||(f[1]=_=>(t.value="unspecified",o.value="nothing"))},{default:l(()=>[u("(更换API地址)")]),_:1})]),_:1}),a(n(G)),a(n(Ee),{show:o.value=="checking"},{default:l(()=>[o.value=="checking"?(y(),w(n(B),{key:0,title:"正在等待响应",type:"info"})):R("",!0)]),_:1},8,["show"]),o.value=="success"?(y(),w(n(B),{key:0,title:"API地址验证成功",type:"success"},{default:l(()=>[a(n(L),null,{default:l(()=>[u("API验证成功。开始使用thost吧！")]),_:1}),a(n(M),{type:"primary",onClick:h,disabled:o.value!="success"},{default:l(()=>[u("确定 ")]),_:1},8,["disabled"]),a(n(L),null,{default:l(()=>[u("以后加载完成后总是自动进入主页面 "),a(n(He),{value:s.value.enterImmediatelyAfterCheckingAPI,"onUpdate:value":f[2]||(f[2]=_=>s.value.enterImmediatelyAfterCheckingAPI=_)},null,8,["value"])]),_:1})]),_:1})):R("",!0),o.value=="error"?(y(),w(n(B),{key:1,title:"API地址验证失败",type:"error"},{default:l(()=>[u(" API验证失败。以下是相关信息: "),a(n(te),{log:m.value,rows:5},null,8,["log"])]),_:1})):R("",!0)]),_:1})):R("",!0),t.value=="waiting"?(y(),w(n(U),{key:2,style:{width:"600px"},title:"Waiting",bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{default:l(()=>[u(" 正在运行逻辑，请稍等。 ")]),_:1})):R("",!0)])]),_:1}))}},at={key:0},st={key:1},qt={__name:"main",setup(e){const t=S(!1);return nt("entryAllowStateUpdate",(r,o)=>{console.log(r,o),t.value=r}),(r,o)=>{const c=ue("router-view");return y(),w(n(fe),null,{default:l(()=>[n(t)?(y(),K("div",at,[a(c)])):(y(),K("div",st,[a(lt)]))]),_:1})}}};export{qt as default};
