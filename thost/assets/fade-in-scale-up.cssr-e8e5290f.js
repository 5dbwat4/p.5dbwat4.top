import{f as H}from"./flatten-7ea74e97.js";import{w as z,d as I,f as m,z as P}from"./light-061b806c.js";import{a as x,o as f,c as J,g as X}from"./Scrollbar-56892bdd.js";import{aZ as $,aY as Z,az as L,s as Y,F as M,C as G,v as j,b3 as Q,i as W,J as b,T as N,a2 as ee,_ as te}from"./runtime-core.esm-bundler-42be6625.js";function fe(e,t="default",n=void 0){const r=e[t];if(!r)return z("getFirstSlotVNode",`slot[${t}] is empty`),null;const i=H(r(n));return i.length===1?i[0]:(z("getFirstSlotVNode",`slot[${t}] should have exactly one child`),null)}function ne(e){const t=$(!!e.value);if(t.value)return Z(t);const n=L(e,r=>{r&&(t.value=!0,n())});return Z(t)}const he=I("n-modal-body"),pe=I("n-modal"),ye=I("n-drawer-body"),me=I("n-popover-body");function k(e,t,n="default"){const r=t[n];if(r===void 0)throw new Error(`[vueuc/${e}]: slot[${n}] is empty.`);return r()}function F(e,t=!0,n=[]){return e.forEach(r=>{if(r!==null){if(typeof r!="object"){(typeof r=="string"||typeof r=="number")&&n.push(Y(String(r)));return}if(Array.isArray(r)){F(r,t,n);return}if(r.type===M){if(r.children===null)return;Array.isArray(r.children)&&F(r.children,t,n)}else r.type!==G&&n.push(r)}}),n}function xe(e,t,n="default"){const r=t[n];if(r===void 0)throw new Error(`[vueuc/${e}]: slot[${n}] is empty.`);const i=F(r());if(i.length===1)return i[0];throw new Error(`[vueuc/${e}]: slot[${n}] should have exactly one child.`)}const c="@@coContext",re={mounted(e,{value:t,modifiers:n}){e[c]={handler:void 0},typeof t=="function"&&(e[c].handler=t,x("clickoutside",e,t,{capture:n.capture}))},updated(e,{value:t,modifiers:n}){const r=e[c];typeof t=="function"?r.handler?r.handler!==t&&(f("clickoutside",e,r.handler,{capture:n.capture}),r.handler=t,x("clickoutside",e,t,{capture:n.capture})):(e[c].handler=t,x("clickoutside",e,t,{capture:n.capture})):r.handler&&(f("clickoutside",e,r.handler,{capture:n.capture}),r.handler=void 0)},unmounted(e,{modifiers:t}){const{handler:n}=e[c];n&&f("clickoutside",e,n,{capture:t.capture}),e[c].handler=void 0}},be=re;function ie(e,t){console.error(`[vdirs/${e}]: ${t}`)}class se{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(t,n){const{elementZIndex:r}=this;if(n!==void 0){t.style.zIndex=`${n}`,r.delete(t);return}const{nextZIndex:i}=this;r.has(t)&&r.get(t)+1===this.nextZIndex||(t.style.zIndex=`${i}`,r.set(t,i),this.nextZIndex=i+1,this.squashState())}unregister(t,n){const{elementZIndex:r}=this;r.has(t)?r.delete(t):n===void 0&&ie("z-index-manager/unregister-element","Element not found when unregistering."),this.squashState()}squashState(){const{elementCount:t}=this;t||(this.nextZIndex=2e3),this.nextZIndex-t>2500&&this.rearrange()}rearrange(){const t=Array.from(this.elementZIndex.entries());t.sort((n,r)=>n[1]-r[1]),this.nextZIndex=2e3,t.forEach(n=>{const r=n[0],i=this.nextZIndex++;`${i}`!==r.style.zIndex&&(r.style.zIndex=`${i}`)})}}const E=new se,l="@@ziContext",ae={mounted(e,t){const{value:n={}}=t,{zIndex:r,enabled:i}=n;e[l]={enabled:!!i,initialized:!1},i&&(E.ensureZIndex(e,r),e[l].initialized=!0)},updated(e,t){const{value:n={}}=t,{zIndex:r,enabled:i}=n,o=e[l].enabled;i&&!o&&(E.ensureZIndex(e,r),e[l].initialized=!0),e[l].enabled=!!i},unmounted(e,t){if(!e[l].initialized)return;const{value:n={}}=t,{zIndex:r}=n;E.unregister(e,r)}},Ie=ae;function A(e){return typeof e=="string"?document.querySelector(e):e()}const ge=j({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(e){return{showTeleport:ne(Q(e,"show")),mergedTo:W(()=>{const{to:t}=e;return t??"body"})}},render(){return this.showTeleport?this.disabled?k("lazy-teleport",this.$slots):b(N,{disabled:this.disabled,to:this.mergedTo},k("lazy-teleport",this.$slots)):null}});function D(e){return e instanceof HTMLElement}function K(e){for(let t=0;t<e.childNodes.length;t++){const n=e.childNodes[t];if(D(n)&&(R(n)||K(n)))return!0}return!1}function V(e){for(let t=e.childNodes.length-1;t>=0;t--){const n=e.childNodes[t];if(D(n)&&(R(n)||V(n)))return!0}return!1}function R(e){if(!oe(e))return!1;try{e.focus({preventScroll:!0})}catch{}return document.activeElement===e}function oe(e){if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.getAttribute("disabled"))return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return e.type!=="hidden"&&e.type!=="file";case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}}let d=[];const ve=j({name:"FocusTrap",props:{disabled:Boolean,active:Boolean,autoFocus:{type:Boolean,default:!0},onEsc:Function,initialFocusTo:String,finalFocusTo:String,returnFocusOnDeactivated:{type:Boolean,default:!0}},setup(e){const t=J(),n=$(null),r=$(null);let i=!1,o=!1;const S=typeof document>"u"?null:document.activeElement;function h(){return d[d.length-1]===t}function g(s){var a;s.code==="Escape"&&h()&&((a=e.onEsc)===null||a===void 0||a.call(e,s))}ee(()=>{L(()=>e.active,s=>{s?(q(),x("keydown",document,g)):(f("keydown",document,g),i&&w())},{immediate:!0})}),te(()=>{f("keydown",document,g),i&&w()});function T(s){if(!o&&h()){const a=v();if(a===null||a.contains(X(s)))return;u("first")}}function v(){const s=n.value;if(s===null)return null;let a=s;for(;a=a.nextSibling,!(a===null||a instanceof Element&&a.tagName==="DIV"););return a}function q(){var s;if(!e.disabled){if(d.push(t),e.autoFocus){const{initialFocusTo:a}=e;a===void 0?u("first"):(s=A(a))===null||s===void 0||s.focus({preventScroll:!0})}i=!0,document.addEventListener("focus",T,!0)}}function w(){var s;if(e.disabled||(document.removeEventListener("focus",T,!0),d=d.filter(p=>p!==t),h()))return;const{finalFocusTo:a}=e;a!==void 0?(s=A(a))===null||s===void 0||s.focus({preventScroll:!0}):e.returnFocusOnDeactivated&&S instanceof HTMLElement&&(o=!0,S.focus({preventScroll:!0}),o=!1)}function u(s){if(h()&&e.active){const a=n.value,p=r.value;if(a!==null&&p!==null){const y=v();if(y==null||y===p){o=!0,a.focus({preventScroll:!0}),o=!1;return}o=!0;const _=s==="first"?K(y):V(y);o=!1,_||(o=!0,a.focus({preventScroll:!0}),o=!1)}}}function U(s){if(o)return;const a=v();a!==null&&(s.relatedTarget!==null&&a.contains(s.relatedTarget)?u("last"):u("first"))}function O(s){o||(s.relatedTarget!==null&&s.relatedTarget===n.value?u("last"):u("first"))}return{focusableStartRef:n,focusableEndRef:r,focusableStyle:"position: absolute; height: 0; width: 0;",handleStartFocus:U,handleEndFocus:O}},render(){const{default:e}=this.$slots;if(e===void 0)return null;if(this.disabled)return e();const{active:t,focusableStyle:n}=this;return b(M,null,[b("div",{"aria-hidden":"true",tabindex:t?"0":"-1",ref:"focusableStartRef",style:n,onFocus:this.handleStartFocus}),e(),b("div",{"aria-hidden":"true",style:n,ref:"focusableEndRef",tabindex:t?"0":"-1",onFocus:this.handleEndFocus})])}}),{cubicBezierEaseIn:B,cubicBezierEaseOut:C}=P;function Ee({transformOrigin:e="inherit",duration:t=".2s",enterScale:n=".9",originalTransform:r="",originalTransition:i=""}={}){return[m("&.fade-in-scale-up-transition-leave-active",{transformOrigin:e,transition:`opacity ${t} ${B}, transform ${t} ${B} ${i&&","+i}`}),m("&.fade-in-scale-up-transition-enter-active",{transformOrigin:e,transition:`opacity ${t} ${C}, transform ${t} ${C} ${i&&","+i}`}),m("&.fade-in-scale-up-transition-enter-from, &.fade-in-scale-up-transition-leave-to",{opacity:0,transform:`${r} scale(${n})`}),m("&.fade-in-scale-up-transition-leave-from, &.fade-in-scale-up-transition-enter-to",{opacity:1,transform:`${r} scale(1)`})]}export{ve as F,ge as L,pe as a,k as b,be as c,ye as d,xe as e,Ee as f,fe as g,he as m,me as p,Ie as z};
