{"version":3,"file":"list-c03445e6.js","sources":["../../node_modules/.pnpm/@vicons+ionicons5@0.12.0/node_modules/@vicons/ionicons5/es/CreateOutline.js","../../src/views/mistakes_coll/comp.viewMCItemSing.vue","../../src/views/mistakes_coll/list.vue"],"sourcesContent":["import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 512 512'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M384 224v184a40 40 0 0 1-40 40H104a40 40 0 0 1-40-40V168a40 40 0 0 1 40-40h167.48',\n    fill: 'none',\n    stroke: 'currentColor',\n    'stroke-linecap': 'round',\n    'stroke-linejoin': 'round',\n    'stroke-width': '32'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M459.94 53.25a16.06 16.06 0 0 0-23.22-.56L424.35 65a8 8 0 0 0 0 11.31l11.34 11.32a8 8 0 0 0 11.34 0l12.06-12c6.1-6.09 6.67-16.01.85-22.38z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_4 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M399.34 90L218.82 270.2a9 9 0 0 0-2.31 3.93L208.16 299a3.91 3.91 0 0 0 4.86 4.86l24.85-8.35a9 9 0 0 0 3.93-2.31L422 112.66a9 9 0 0 0 0-12.66l-9.95-10a9 9 0 0 0-12.71 0z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_5 = [_hoisted_2, _hoisted_3, _hoisted_4]\nexport default defineComponent({\n  name: 'CreateOutline',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createElementBlock('svg', _hoisted_1, _hoisted_5)\n  }\n})\n","<template>\r\n    <n-card v-if=\"LoadingQ\"\r\n    ><n-skeleton :repeat=\"8\"></n-skeleton></n-card>\r\n<n-card v-else>\r\n    <n-text>收录于：</n-text><n-time :time=\"McInfo.T.collTime\" :to=\"getNow\" type=\"relative\" />\r\n    <n-text>| Tags:</n-text>    \r\n    <n-tag v-for=\"tag in McInfo.T.tags\" @click=\"$router.push('/mistakes_coll/list/filter/tag/'+tag.value)\">{{ tag.label }}</n-tag>\r\n<div v-html=\"generateHTMLCodeQ4CardDisplay(McInfo.T,McInfo.Q)\"></div>\r\n<n-button @click=\"deleteq()\">Delete</n-button>\r\n<n-button @click=\"$router.push('/mistakes_coll/edit/'+McInfo.T.id)\">Edit</n-button>\r\n<n-button @click=\"showQA()\">Show Q &amp; A</n-button>\r\n<n-checkbox :value=\"McInfo.T.id\"></n-checkbox>\r\n<div v-if=\"showQA_flag\">\r\n    <p>答案</p>\r\n<div v-html=\"McInfo.T.answer\"></div>\r\n<p>解析</p>\r\n<div v-html=\"McInfo.T.parse\"></div>\r\n<p>注释</p>\r\n<div v-html=\"McInfo.T.note\"></div>\r\n</div>\r\n<!-- <div >\r\n    <img :src=\"XKWGetFile.a\" style=\"width:600px;display:block;\">\r\n    <img :src=\"XKWGetFile.p\" style=\"width:600px;display:block;\">\r\n</div> --></n-card>\r\n</template>\r\n\r\n<script setup>\r\n\r\nimport { onMounted, ref,useAttrs } from \"vue\"\r\nimport {useRoute,useRouter} from \"vue-router\"\r\nimport { normalizeq } from \"@/shared/normalize_q/toScreenDSingle\"\r\nimport swal from \"sweetalert\"\r\nimport { NButton,NSkeleton,NCard,NTime,NTag,NCheckbox,NText } from \"naive-ui\"\r\nimport {API} from \"@/shared/APIHelper\" \r\nimport { useSettings } from '@/stored/settings'\r\nimport {generateHTMLCodeQ4CardDisplay}from \"./generateHTMLCode\"\r\n\r\nconst store = useSettings()\r\nconst route=useRoute(),router=useRouter()\r\n\r\nconst LoadingQ=ref(true)\r\n\r\nconst getNow=(new Date()).getTime()\r\n\r\nconst XKWGetFile=ref({a:\"\",p:\"\"})\r\n\r\nconst showQA_flag=ref(false)\r\nconst attrs=useAttrs()\r\nconst McInfo=ref({T:{},Q:{}})\r\n\r\nAPI.get(\"/api/data/mistakes_coll/get/full_with_question/\"+attrs.ItemId).then(Op=>{\r\nMcInfo.value.T=Op.mistakes_coll\r\nMcInfo.value.Q=Op.quesRecord\r\nLoadingQ.value=false\r\n})\r\n\r\nconst showQA=()=>{\r\n    showQA_flag.value=true\r\n//     API.get(\"/api/xkw-helper/getCachedImg/\"+T.value.bankid+\"/\"+T.value.qid+\"/600\").then(r=>{\r\n//         XKWGetFile.value={\r\n//             a:API.host+\"/api/xkw-helper/route-pic?purl=\"+btoa(r.answer.replace(\"@2\",\"@3\")),\r\n//             p:API.host+\"/api/xkw-helper/route-pic?purl=\"+btoa(r.parse.replace(\"@2\",\"@3\")),\r\n//         }\r\n// })\r\n}\r\n//e217b45e97cef0e2850ca10b3360e62867b4\r\n// const deleteq=()=>{\r\n//     swal(\"Are you sure?\",{\r\n//         dangerMode:true,buttons:true\r\n//     }).then(v=>{\r\n//         if(v){\r\n//             API.get(\"/api/qapi/delete/\"+route.params.id).then(v=>{\r\n//                 swal(JSON.stringify(v,null,4))\r\n//             })\r\n//         }\r\n//     })\r\n// }\r\n\r\n\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","<template>\r\n <n-input-group>\r\n<n-input placeholder=\"Search\" v-model:value=\"searchParams\" :loading=\"LoadingSearch\" :on-input=\"SearchUpdate\"/>\r\n<n-button @click=\"handleSearch\">     <template #icon><n-icon :component=\"SearchOutline\"/></template></n-button>\r\n<n-cascader\r\n      v-model:value=\"bankid\"\r\n      :options=\"subjectsmap\"\r\n      check-strategy=\"child\"\r\n      :show-path=\"true\"\r\n      @update:value=\"Refresh\"\r\n    />\r\n<n-button @click=\"Refresh\">     <template #icon><n-icon :component=\"RefreshOutline\"/></template></n-button>\r\n\r\n<n-tooltip trigger=\"hover\">\r\n    <template #trigger>\r\n        <n-button  strong @click=\"exportHandle\">\r\n    <template #icon>\r\n        <n-icon :component=\"ExitOutline\"></n-icon>\r\n      </template>\r\n    </n-button>\r\n    </template>\r\n    导出<br/>\r\n    Export\r\n    </n-tooltip>\r\n\r\n<n-dropdown :options=\"MoreOptions\">\r\n      <n-button>\r\n      <template #icon>\r\n        <n-icon :component=\"EllipsisVerticalOutline\"></n-icon>\r\n      </template>\r\n    </n-button>\r\n  </n-dropdown>\r\n</n-input-group>\r\n<n-checkbox-group v-model:value=\"checkedMCI\"  @update:checked=\"handleUpdateChecked\">\r\n   \r\n\r\n\r\n<div>\r\n    \r\n    <mcitem v-for=\"item in data\" :ItemId=\"item.id\"></mcitem>\r\n    <!-- <n-checkbox :value=\"Beijing\" label=\"Beijing\" /> -->\r\n</div>\r\n</n-checkbox-group>\r\n<n-pagination v-model:page=\"paginationReactive.page\"     :item-count=\"paginationReactive.itemCount\"     show-size-picker\r\n    :page-sizes=\"paginationReactive.pageSizes\"\r\n    :on-update:page-size=\"Refresh\" :on-update:page=\"Refresh\"/>\r\n\r\n\r\n    <n-modal\r\n    v-model:show=\"showExportModal\"\r\n    class=\"custom-card\"\r\n    preset=\"card\"\r\n    title=\"Naming\"\r\n    :bordered=\"false\"\r\n    size=\"huge\"\r\n  >\r\n    <p>为导出的错题集Session命名</p>\r\n<n-input v-model:value=\"exportTitle\"></n-input>\r\n<n-button @click=\"submitSession\">好的</n-button>\r\n  </n-modal>\r\n</template>\r\n<script setup>\r\nimport { NButton, NPagination,NInputGroup,NInput,NIcon,NTime,NCascader,\r\nNTooltip,NDropdown,NCheckboxGroup,NP,NModal } from \"naive-ui\";\r\nimport { h, ref,useAttrs } from \"vue\";\r\nimport { API } from \"@/shared/APIHelper\"\r\nimport {useRoute,useRouter} from \"vue-router\"\r\nimport { SearchOutline,RefreshOutline,ExitOutline,EllipsisVerticalOutline,\r\nCreateOutline } from \"@vicons/ionicons5\";\r\nimport mcitem from \"./comp.viewMCItemSing.vue\"\r\nimport subjectsmap from \"@/shared/base-zj-data/subjects.json\"\r\nconst route=useRoute(),router=useRouter()\r\nconst attrs=useAttrs()\r\nconst loadingData=ref(true),LoadingSearch=ref(false),searchParams=ref(\"\")\r\nconst data=ref([])\r\nconst checkedMCI=ref([])\r\nconst bankid=ref(0)\r\n\r\n      const  paginationReactive = ref({\r\n      page: 1,\r\n      pageSize: 10,\r\n      showSizePicker: true,\r\n      itemCount:0,\r\n      pageSizes: [5,10,20,50,100,200],\r\n      onChange: (page) => {\r\n        paginationReactive.value.page = page\r\n        loadingData.value=true\r\n        Refresh()\r\n      },\r\n      onUpdatePageSize: (pageSize) => {\r\n        paginationReactive.value.pageSize = pageSize\r\n        paginationReactive.value.page = 1\r\n        loadingData.value=true\r\n        Refresh()\r\n      }\r\n    })\r\n\r\n    const Refresh=()=>{\r\n        let urlgen=\"\"\r\n        if(attrs.page==\"basic\"){\r\n            urlgen=`/api/data/mistakes_coll/list.id?offset=${(paginationReactive.value.page-1)*paginationReactive.value.pageSize}&pagesize=${paginationReactive.value.pageSize}${bankid.value!=0?\"&bankid=\"+bankid.value:\"\"}`\r\n        }else if(attrs.page==\"tag\"){\r\n            urlgen=`/api/data/mistakes_coll/list.id/filter/tag/${route.params.id}?offset=${(paginationReactive.value.page-1)*paginationReactive.value.pageSize}&pagesize=${paginationReactive.value.pageSize}${bankid.value!=0?\"&bankid=\"+bankid.value:\"\"}`\r\n        }\r\n        API.get(urlgen).then(v=>{\r\n    data.value=v.data\r\n    paginationReactive.value.itemCount=v.count\r\n    loadingData.value=false\r\n    LoadingSearch.value=false\r\n})\r\n    }\r\n\r\n    Refresh()\r\n\r\n\r\n    const exportTitle=ref(\"\"),showExportModal=ref(false)\r\n    const  exportHandle=()=>{\r\n        console.log(checkedMCI.value);\r\n        showExportModal.value=true\r\n    }\r\n    const handleUpdateChecked=()=>{console.log(checkedMCI.value);}\r\n\r\n    const submitSession=()=>{\r\n        API.post(\"/api/data/mistakes_coll/session/create\",{\r\nlist      :checkedMCI.value.join(\",\")   ,\r\ntimestamp :(new Date()).getTime()       ,\r\nbankid    :bankid.value                 ,\r\ntitle     :exportTitle.value            ,\r\ngenerator :`${attrs.page}${attrs.page==\"tag\"?\"@\"+route.params.id:\"\"}${bankid.value!=0?\"+bankid@\"+bankid.value:\"\"}`                          \r\n        }).then(vs=>{\r\n            router.push(\"/mistakes_coll/preexport-1/\"+vs.id)\r\n        })\r\n    }\r\n\r\n\r\n\r\n    const renderIcon = (icon) => {\r\n  return () => {\r\n    return h(NIcon, null, {\r\n      default: () => h(icon)\r\n    });\r\n  };\r\n};\r\n    const MoreOptions=[\r\n        {\r\n          label: \"编辑Tags\",\r\n          key: \"edit-tags\",\r\n          icon: renderIcon(CreateOutline),\r\n          props: {\r\n            onClick: () => {\r\n              router.push(\"/mistakes_coll/edit-tags\")\r\n              \r\n            }\r\n          }\r\n        }\r\n      ]\r\n</script>"],"names":["_hoisted_1","_hoisted_2","_createElementVNode","_hoisted_3","_hoisted_4","_hoisted_5","CreateOutline","defineComponent","_ctx","_cache","_openBlock","_createElementBlock","useSettings","useRoute","useRouter","LoadingQ","ref","getNow","showQA_flag","attrs","useAttrs","McInfo","API","Op","showQA","route","router","loadingData","LoadingSearch","searchParams","data","checkedMCI","bankid","paginationReactive","page","Refresh","pageSize","urlgen","v","exportTitle","showExportModal","exportHandle","handleUpdateChecked","submitSession","vs","MoreOptions","icon","h","NIcon"],"mappings":"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","x_google_ignoreList":[0]}