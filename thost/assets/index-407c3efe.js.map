{"version":3,"file":"index-407c3efe.js","sources":["../../src/views/regener/index.vue"],"sourcesContent":["<template>\r\n<n-card v-if=\"step==1\">\r\n<n-input v-model:value=\"meterial\" type=\"textarea\" />\r\n<n-input v-model:value=\"bid\"/>\r\n<n-button @click=\"help1\">RUN</n-button>\r\n</n-card>\r\n<n-card v-if=\"step==2\">\r\n    <div v-html=\"ranges.join('<br/>')\"></div>\r\n    <div v-html=\"meterial.replaceAll('\\n','<br/>')\"></div>\r\n        <n-button @click=\"help2\">RUN</n-button>\r\n        <n-button @click=\"help3\">RUN using ifr</n-button>\r\n</n-card>\r\n<n-card v-if=\"step==32\">\r\n    <n-button @click=\"regenatteachedHelper\">GOTO zujuan.xkw.com</n-button>\r\n</n-card>\r\n<n-card v-if=\"step==32\">\r\n    <div v-for=\"ror in ranges\" :key=\"ror.key\">\r\n        <div  v-if=\"ror.display\">\r\n        <p>{{ror.met}}</p>\r\n        <iframe  :src=\"'https://zujuan.xkw.com/quessearch/?keyword='+ror.met\"></iframe>\r\n        <n-button @click=\"ranges[helpertmp_i].display=false;helpertmp_i++;ranges[helpertmp_i].display=true\">&lt; next</n-button>\r\n        <n-button @click=\"ranges[helpertmp_i].display=false;helpertmp_i--;ranges[helpertmp_i].display=true\">prev &gt;</n-button>\r\n        </div>\r\n    </div>\r\n\r\n</n-card>\r\n<n-card v-if=\"step==31\">\r\n    <div v-for=\"ror in ranges\" :key=\"ror.met\">\r\n        <p>{{ror.met}}</p>\r\n        <div v-html=\"ror.tdp.body\"></div>\r\n        <p>QID:{{ror.tdp.id}}   ||   {{foundlist[ror.tdp.id]}}</p>\r\n        <n-button @click=\"Save(ror.tdp.id)\" :loading=\"saving[ror.tdp.id]\">SAVE</n-button>\r\n        <n-button @click=\"ror.tdp=ror.list[--ror.index]\">&lt; CHANGE</n-button>\r\n        <n-button @click=\"ror.tdp=ror.list[++ror.index]\">CHANGE &gt;</n-button>\r\n    </div>\r\n\r\n</n-card>\r\n<div></div>\r\n</template>\r\n\r\n<script setup>\r\nimport {NInput,NButton,NCard}from \"naive-ui\"\r\nimport { ref } from \"vue\";\r\nimport { API } from \"../../shared/APIHelper\";\r\n\r\n\r\n\r\nconst meterial=ref(\"\"),step=ref(1),ranges=ref([]),bid=ref(\"\"),foundlist=ref({}),saving=ref({})\r\n\r\nconst _kpafunc=(e)=>{\r\n    if(e.key==\"Enter\"){\r\n        let range=window.getSelection().toString() \r\n        // .slice(0,25)\r\n        ranges.value.push(range)\r\n    }\r\n}\r\nconst help1=()=>{\r\nstep.value=2\r\ndocument.addEventListener(\"keypress\",_kpafunc)\r\n}\r\nconst help2=async()=>{\r\nstep.value=31\r\nlet ooo=ranges.value\r\nranges.value=ranges.value.map(o=>{return {met:o,list:[],tdp:{}}})\r\nfor (let i = 0; i < ranges.value.length; i++) {\r\n    await API.get(\"/api/xkw-helper/qsearch/\"+bid.value+\"/\"+ranges.value[i].met.slice(0,40)).then(r=>{\r\n        ranges.value[i].list=r.data.list\r\n        ranges.value[i].index=0\r\n        ranges.value[i].tdp=ranges.value[i].list[ranges.value[i].index]\r\n        r.data.list.forEach((o,j) => {\r\n            if(j<6){\r\n                WhetherFound(bid.value,o.id)\r\n            }\r\n        });\r\n    })\r\n}\r\n\r\n}\r\n\r\nconst helpertmp_i=ref(0)\r\nconst help3=async()=>{\r\nstep.value=32\r\nlet ooo=ranges.value\r\nranges.value=ranges.value.map(o=>{return {met:o,list:[],tdp:{}}})\r\nfor (let i = 0; i < ranges.value.length; i++) {\r\nranges.value[i].display=false\r\n}\r\nranges.value[0].display=!false\r\n\r\n}\r\n\r\nconst WhetherFound=async(bid,qid)=>{\r\n    await API.get(\"/api/qapi/is_collected/\"+bid+\"/\"+qid).then(r=>{\r\n        foundlist.value[qid]=JSON.stringify(r)\r\n    })\r\n}\r\n\r\nconst Save=async(qid)=>{\r\n    saving.value[qid]=true\r\n    await API.get(\"/api/data/add/\"+bid.value+\"/\"+qid)\r\n}\r\n\r\n\r\n\r\nconst regenatteachedHelper=()=>{\r\n    API.post(\"/api/regen-attach/state-update/contentupd\",ranges.value.map(v=>encodeURIComponent( v.met.replaceAll(\"\\r\\n\",\" \").replaceAll(/[ \\t]/g,\" \").slice(0,100)))).then(p=>{\r\n            location.href=API.host+\"/api/regen-attach/router/begin\"\r\n        })\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"names":["meterial","ref","step","ranges","bid","foundlist","saving","_kpafunc","range","help1","help2","o","i","API","r","j","WhetherFound","helpertmp_i","help3","qid","Save","regenatteachedHelper","v","p"],"mappings":"28BA+CA,MAAAA,EAAAC,EAAA,EAAA,EAAAC,EAAAD,EAAA,CAAA,EAAAE,EAAAF,EAAA,CAAA,CAAA,EAAAG,EAAAH,EAAA,EAAA,EAAAI,EAAAJ,EAAA,CAAA,CAAA,EAAAK,EAAAL,EAAA,EAAA,EAEAM,EAAA,GAAA,CACA,GAAA,EAAA,KAAA,QAAA,CACA,IAAAC,EAAA,OAAA,aAAA,EAAA,SAAA,EAEAL,EAAA,MAAA,KAAAK,CAAA,CACA,CACA,EACAC,EAAA,IAAA,CACAP,EAAA,MAAA,EACA,SAAA,iBAAA,WAAAK,CAAA,CACA,EACAG,EAAA,SAAA,CACAR,EAAA,MAAA,GACAC,EAAA,MACAA,EAAA,MAAAA,EAAA,MAAA,IAAAQ,IAAA,CAAA,IAAAA,EAAA,KAAA,CAAA,EAAA,IAAA,CAAA,CAAA,EAAA,EACA,QAAAC,EAAA,EAAAA,EAAAT,EAAA,MAAA,OAAAS,IACA,MAAAC,EAAA,IAAA,2BAAAT,EAAA,MAAA,IAAAD,EAAA,MAAAS,CAAA,EAAA,IAAA,MAAA,EAAA,EAAA,CAAA,EAAA,KAAAE,GAAA,CACAX,EAAA,MAAAS,CAAA,EAAA,KAAAE,EAAA,KAAA,KACAX,EAAA,MAAAS,CAAA,EAAA,MAAA,EACAT,EAAA,MAAAS,CAAA,EAAA,IAAAT,EAAA,MAAAS,CAAA,EAAA,KAAAT,EAAA,MAAAS,CAAA,EAAA,KAAA,EACAE,EAAA,KAAA,KAAA,QAAA,CAAAH,EAAAI,IAAA,CACAA,EAAA,GACAC,EAAAZ,EAAA,MAAAO,EAAA,EAAA,CAEA,CAAA,CACA,CAAA,CAGA,EAEAM,EAAAhB,EAAA,CAAA,EACAiB,EAAA,SAAA,CACAhB,EAAA,MAAA,GACAC,EAAA,MACAA,EAAA,MAAAA,EAAA,MAAA,IAAAQ,IAAA,CAAA,IAAAA,EAAA,KAAA,CAAA,EAAA,IAAA,CAAA,CAAA,EAAA,EACA,QAAAC,EAAA,EAAAA,EAAAT,EAAA,MAAA,OAAAS,IACAT,EAAA,MAAAS,CAAA,EAAA,QAAA,GAEAT,EAAA,MAAA,CAAA,EAAA,QAAA,EAEA,EAEAa,EAAA,MAAAZ,EAAAe,IAAA,CACA,MAAAN,EAAA,IAAA,0BAAAT,EAAA,IAAAe,CAAA,EAAA,KAAAL,GAAA,CACAT,EAAA,MAAAc,CAAA,EAAA,KAAA,UAAAL,CAAA,CACA,CAAA,CACA,EAEAM,EAAA,MAAAD,GAAA,CACAb,EAAA,MAAAa,CAAA,EAAA,GACA,MAAAN,EAAA,IAAA,iBAAAT,EAAA,MAAA,IAAAe,CAAA,CACA,EAIAE,EAAA,IAAA,CACAR,EAAA,KAAA,4CAAAV,EAAA,MAAA,IAAAmB,GAAA,mBAAAA,EAAA,IAAA,WAAA;AAAA,EAAA,GAAA,EAAA,WAAA,SAAA,GAAA,EAAA,MAAA,EAAA,GAAA,CAAA,CAAA,CAAA,EAAA,KAAAC,GAAA,CACA,SAAA,KAAAV,EAAA,KAAA,gCACA,CAAA,CACA;"}