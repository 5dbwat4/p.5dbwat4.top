{"version":3,"mappings":"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","names":["getLastAPIOption","_default","setAPIOption","apm","example","router","useRouter","useRoute","LoadingBasicInfo","ref","BasicInfo","__vitePreload","ra","res","rej","view","TList","enterRoom","options","fetchForNewT","i","API","v","router_push","generateFetchURL","ZujuanAPI"],"sources":["../../src/views/zujuanink-v3/storage-rel.js","../../src/views/zujuanink-v3/basicinfo/init-blank-q.js","../../src/views/zujuanink-v3/views/preparing-room/queslist.vue"],"sourcesContent":["function getLastAPIOption(){\r\n    const _default={\r\n        APIType:\"zujuan-main-list\",\r\n        APIargments:{\r\n            searchp: {\r\n              types: 0,\r\n              sources: 0,\r\n              pageIndex: 1,\r\n              pageSize: 10,\r\n              orderBy: 2,\r\n              areas: 0,\r\n              grades: 0,\r\n              diffs: 0,\r\n              knowledges: 0,\r\n              years: 0,\r\n            },\r\n            bid: 13,\r\n          }\r\n    }\r\n\r\n    return localStorage.getItem(\"__zujuan-ink__lastAPIOption\")?JSON.parse(localStorage.getItem(\"__zujuan-ink__lastAPIOption\")):_default\r\n}\r\nfunction setAPIOption(apm){\r\n    return localStorage.setItem(\"__zujuan-ink__lastAPIOption\",JSON.stringify(apm))\r\n}\r\n\r\nexport{getLastAPIOption,setAPIOption}","export default {\r\n    audio: \"\",\r\n    body: \"Loading.请等待第一个Chunk被hit\",\r\n    childCount: 1,\r\n    collect: false,\r\n    diff: {\r\n      id: 3,\r\n      name: \"适中\",\r\n      value: 0.65,\r\n    },\r\n    id: -1,\r\n    indexCount: 4,\r\n    knowledgeInfo: \"loading\",\r\n    paperSources: [],\r\n    time: \"2023-07-15 18:02:51\",\r\n    title: \"loading\",\r\n    type: {\r\n      choice: false,\r\n      id: 2904,\r\n      name: \"loading\",\r\n    },\r\n    useCount: 596,\r\n    video: \"\",\r\n  }","<template>\r\n    <n-card v-if=\"view==1\">\r\n      <n-form-item label=\"Subject\"> \r\n        <!-- <n-input-number v-model:value=\"options.APIargments.bid\" /> -->\r\n        <n-cascader\r\n      v-model:value=\"options.APIargments.bid\"\r\n      :options=\"BasicInfo.subjectsmap\"\r\n      check-strategy=\"child\"\r\n      :show-path=\"true\"\r\n      :on-update:value=\"(v)=>{options.APIargments.searchp.knowledges=0,\r\n      options.APIargments.searchp.types=0,\r\n        options.APIargments.bid=v}\"\r\n    />\r\n    </n-form-item>\r\n        <n-form\r\n    label-placement=\"left\"\r\n    label-width=\"auto\"\r\n    require-mark-placement=\"right-hanging\" v-if=\"LoadingBasicInfo\">\r\n    <n-form-item  label=\"难度(diffs)\"> \r\n      <n-cascader v-model:value=\"options.APIargments.searchp.diffs\"\r\n      :options=\"BasicInfo.diffsmap\" check-strategy=\"child\" :show-path=\"true\"\r\n    />  </n-form-item>\r\n\r\n\r\n    <n-form-item  label=\"areas\"> \r\n      <n-cascader v-model:value=\"options.APIargments.searchp.areas\"\r\n      :options=\"BasicInfo.areasmap\" check-strategy=\"child\" :show-path=\"true\"\r\n    />  </n-form-item>\r\n\r\n\r\n    <n-form-item  label=\"sources\"> \r\n      <n-cascader v-model:value=\"options.APIargments.searchp.sources\"\r\n      :options=\"BasicInfo.sourcesmap\" check-strategy=\"child\" :show-path=\"true\"\r\n    />  </n-form-item>\r\n\r\n\r\n    <n-form-item  label=\"types\"> \r\n      <n-cascader v-model:value=\"options.APIargments.searchp.types\"\r\n      :options=\"BasicInfo.typesmap[''+options.APIargments.bid]\" check-strategy=\"all\" :show-path=\"true\"\r\n    />  </n-form-item>\r\n\r\n    <n-form-item  label=\"knowledgeInfo\"> \r\n      <n-cascader v-model:value=\"options.APIargments.searchp.knowledges\"\r\n      :options=\"BasicInfo.knowledgeInfomap[''+options.APIargments.bid]\" check-strategy=\"all\" :show-path=\"true\"\r\n    />  </n-form-item>\r\n\r\n    <n-form-item  label=\"排序(orderBy)\"> \r\n      <n-cascader v-model:value=\"options.APIargments.searchp.orderBy\"\r\n      :options=\"BasicInfo.orderbymap\" check-strategy=\"all\" :show-path=\"true\"\r\n    />  </n-form-item>\r\n    <n-form-item  label=\"年份(years)\"> \r\n      <n-cascader v-model:value=\"options.APIargments.searchp.years\"\r\n      :options=\"BasicInfo.yearsmap\" check-strategy=\"all\" :show-path=\"true\"\r\n    />  </n-form-item>\r\n    <n-form-item  label=\"年级(grades)\"> \r\n      <n-cascader v-model:value=\"options.APIargments.searchp.grades\"\r\n      :options=\"BasicInfo.gradesmap\" check-strategy=\"all\" :show-path=\"true\"\r\n    />  </n-form-item>\r\n    <n-form-item  label=\"pageIndex\"> \r\n      <n-input-number v-model:value=\"options.APIargments.searchp.pageIndex\" :min=\"0\"\r\n    />  </n-form-item>\r\n    <n-form-item  label=\"pageSize\"> \r\n      <n-input-number v-model:value=\"options.APIargments.searchp.pageSize\"\r\n    />  </n-form-item>\r\n\r\n   <n-button @click=\"enterRoom\">ENTER</n-button>\r\n    </n-form>\r\n\r\n\r\n\r\n\r\n</n-card>\r\n\r\n<n-card v-if=\"view==2\" content-style=\"text-align:center;\" >\r\n<n-spin/>\r\n<n-p>正在获取题面</n-p>\r\n</n-card>\r\n\r\n</template>\r\n\r\n<script setup>\r\n\r\nimport { ref,useAttrs } from \"vue\";\r\nimport { NForm,NFormItem,NCard,NModal,NButton,NInputNumber,NTabs,NTab,NTabPane,NCascader,NSwitch,NSpin,NP } from \"naive-ui\";\r\nimport { useRouter,useRoute } from \"vue-router\";\r\nconst router=useRouter(),route=useRoute()\r\n\r\nconst LoadingBasicInfo=ref(true)\r\nconst BasicInfo=ref({\r\n\r\n\"subjectsmap\":[],          \r\n\"areasmap\":[],             \r\n\"diffsmap\":[],             \r\n\"sourcesmap\":[],           \r\n\"typesmap\":{},             \r\n\"orderbymap\":[],           \r\n\"yearsmap\":[],             \r\n\"gradesmap\":[],            \r\n\"knowledgeInfomap\":{},     \r\n})\r\nPromise.all([\r\n{varname:\"subjectsmap\",co:()=>import(\"../../basicinfo/subjects.json\")},\r\n{varname:\"areasmap\",co:()=>import(\"../../basicinfo/areas.json\")},\r\n{varname:\"diffsmap\",co:()=>import(\"../../basicinfo/diffs.json\")},\r\n{varname:\"sourcesmap\",co:()=>import(\"../../basicinfo/sources.json\")},\r\n{varname:\"typesmap\",co:()=>import(\"../../basicinfo/types.json\")},\r\n{varname:\"orderbymap\",co:()=>import(\"../../basicinfo/orderby.json\")},\r\n{varname:\"yearsmap\",co:()=>import(\"../../basicinfo/years.json\")},\r\n{varname:\"gradesmap\",co:()=>import(\"../../basicinfo/grades.json\")},\r\n{varname:\"knowledgeInfomap\",co:()=>import(\"../../basicinfo/knowl-full.json\")}\r\n].map((ra)=>{\r\n  return new Promise(async(res,rej)=>{\r\n    BasicInfo.value[ra.varname]=(await ra.co()).default\r\n    res()\r\n  })\r\n}))\r\n\r\n// import subjectsmap from \"../../basicinfo/subjects.json\"\r\n// import areasmap from \"../../basicinfo/areas.json\"\r\n// import diffsmap from \"../../basicinfo/diffs.json\"\r\n// import sourcesmap from \"../../basicinfo/sources.json\"\r\n// import typesmap from \"../../basicinfo/types.json\"\r\n// import orderbymap from \"../../basicinfo/orderby.json\"\r\n// import yearsmap from \"../../basicinfo/years.json\"\r\n// import gradesmap from \"../../basicinfo/grades.json\"\r\n// import knowledgeInfomap from \"../../basicinfo/knowl-full.json\"\r\n\r\nimport {getLastAPIOption,setAPIOption} from \"../../storage-rel\"\r\nimport { ZujuanAPI } from \"../../utils/zujuan-api\";\r\n\r\n// const subjectsmap=import(\"./basicinfo/subjects.json\",import.meta.url)\r\nconst attrs=useAttrs()\r\nconst OBJECT_KEYS = (o) => Object.keys(o);\r\nconst options=ref(getLastAPIOption())\r\nconst view=ref(1)\r\n\r\n\r\nconst Preference=ref({\r\n  showUBlock:false\r\n})\r\nimport example from \"../../basicinfo/init-blank-q\"\r\nimport { API } from \"../../../../shared/APIHelper\";\r\nimport { router_push } from \"../../utils/router-goto\";\r\nconst tmp=ref(12)\r\n//settings logic\r\n\r\nconst showSetting = ref(false);\r\n\r\nconst UpdateOptions= ()=>{\r\n  showSetting.value=false\r\n  attrs.updateOptions(options.value)\r\n}\r\n\r\nconst TList=ref([example])\r\n\r\nconst enterRoom=async()=>{\r\n    setAPIOption(options.value)\r\nview.value=2\r\n  await   fetchForNewT()\r\n  window.bankid=options.value.APIargments.bid\r\n  for (let i = 0; i < TList.value.length; i++) {\r\n    await API.get(\"/zujuan-ink-be-core/data/checkExistanceGetPersonalizedInfo/\"+options.value.APIargments.bid +\"/\"+TList.value[i].id).then(async(v)=>{\r\n      if(!v.data){\r\n      TList.value[i].quid=(await API.post(\"/zujuan-ink-be-core/data/add\",{\r\nbody           :  TList.value[i].body ,\r\ntimestamp      :  (new Date()).getTime() ,\r\nqid            :  TList.value[i].id ,\r\nbankid         :  window.bankid ,\r\ntitle          :  TList.value[i].title ,\r\ndiffv          :  TList.value[i].diff.id ,\r\nknowledgeInfo  :  TList.value[i].knowledgeInfo ,\r\ntypeid         :  TList.value[i].type.id  ,\r\n\r\n  })).data\r\n  TList.value[i].failedcoll=false\r\n      TList.value[i].coll=false\r\n    }else{\r\n      TList.value[i].quid=v.data.id\r\n      TList.value[i].failedcoll=v.data.failedcoll\r\n      TList.value[i].coll=v.data.coll\r\n    }\r\n    })\r\n    \r\n    \r\n  }\r\n  window.TList=TList.value\r\nwindow.qcomponent=\"zjw\"\r\n    router_push(router,\"/room\")\r\n}\r\n\r\n\r\n\r\n\r\nconst fetchForNewT = async () => {\r\n    // Loading.value = true;\r\n    function generateFetchURL() {\r\n      return (\r\n        \"/app-server/v1/ques/list/\" +\r\n        options.value.APIargments.bid +\r\n        \"?\" +\r\n        Object.entries(options.value.APIargments.searchp)\r\n          .map((v) => v[0] + \"=\" + v[1])\r\n          .join(\"&\")\r\n      );\r\n    }\r\n    await ZujuanAPI(generateFetchURL()).then((v) => {\r\n      // console.log(TList.value[0] , example , TList.value[0]==example)/;\r\n      if (TList.value[0].id == -1) {\r\n        TList.value = v.data.list;\r\n      }else{\r\n      TList.value.push(...v.data.list);\r\n      }\r\n      if (v.data.finished) options.value.rightFormCycle = true;\r\n  \r\n    //   Loading.value = false;\r\n    });\r\n  };\r\n</script>"],"file":"assets/queslist-07d32052.js"}