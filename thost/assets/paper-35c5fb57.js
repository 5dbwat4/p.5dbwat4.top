import{Z as ee}from"./zujuan-api-117f357c.js";import{A as M}from"./APIHelper-697d5a21.js";import{useRouter as te,useRoute as re}from"./vue-router-66374999.js";import{a as ae,N as V,r as oe}from"./router-goto-7c1ec3b3.js";import{s as ne}from"./sweetalert.min-9dab74b7.js";import{d as ie,u as se}from"./light-061b806c.js";import{p as C}from"./Close-7ee9b945.js";import{i as R,aZ as w,_ as le,v as Y,O as ue,G as fe,J as B,a2 as de,aa as pe,b3 as O,W as z,g as U,a8 as ce,j as me,aE as h,t as c,b7 as p,s as j}from"./runtime-core.esm-bundler-42be6625.js";import{m as H}from"./runtime-dom.esm-bundler-4c01a608.js";import{i as ve}from"./utils-13313164.js";import{u as q}from"./use-memo-8d560c6d.js";import{d as he,b as F}from"./Button-cc4d8cf9.js";import{V as be}from"./Scrollbar-56892bdd.js";import{f as Se}from"./flatten-7ea74e97.js";import{g as we}from"./get-slot-1efb97e5.js";import{b as ge}from"./get-bc00c446.js";import{N as Q}from"./Card-6456efb4.js";import{N as X}from"./InputNumber-f94cacab.js";import{N as ye}from"./p-b2e24c58.js";import{N as Re}from"./Input-25fff9b3.js";import"./format-length-c9d165c6.js";import"./Icon-9bae1ecc.js";import"./Warning-342b5d14.js";import"./keysOf-5d5107c5.js";import"./resolve-slot-612957d7.js";import"./CONFIG-d506a2d4.js";import"./_commonjsHelpers-725317a4.js";import"./FadeInExpandTransition-8360c680.js";import"./call-7e0089d6.js";import"./use-locale-a958ab8c.js";import"./index-975a2d8f.js";import"./use-merged-state-cb002afc.js";import"./light-a899ddec.js";import"./light-1325cd86.js";function _e(r){if(typeof r=="number")return{"":r.toString()};const e={};return r.split(/ +/).forEach(t=>{if(t==="")return;const[a,o]=t.split(":");o===void 0?e[""]=a:e[a]=o}),e}function I(r,e){var t;if(r==null)return;const a=_e(r);if(e===void 0)return a[""];if(typeof e=="string")return(t=a[e])!==null&&t!==void 0?t:a[""];if(Array.isArray(e)){for(let o=e.length-1;o>=0;--o){const n=e[o];if(n in a)return a[n]}return a[""]}else{let o,n=-1;return Object.keys(a).forEach(i=>{const s=Number(i);!Number.isNaN(s)&&e>=s&&s>=n&&(n=s,o=a[i])}),o}}function Ne(r){var e;const t=(e=r.dirs)===null||e===void 0?void 0:e.find(({dir:a})=>a===H);return!!(t&&t.value===!1)}const xe={xs:0,s:640,m:1024,l:1280,xl:1536,"2xl":1920};function $e(r){return`(min-width: ${r}px)`}const E={};function Ce(r=xe){if(!ve)return R(()=>[]);if(typeof window.matchMedia!="function")return R(()=>[]);const e=w({}),t=Object.keys(r),a=(o,n)=>{o.matches?e.value[n]=!0:e.value[n]=!1};return t.forEach(o=>{const n=r[o];let i,s;E[n]===void 0?(i=window.matchMedia($e(n)),i.addEventListener?i.addEventListener("change",f=>{s.forEach(l=>{l(f,o)})}):i.addListener&&i.addListener(f=>{s.forEach(l=>{l(f,o)})}),s=new Set,E[n]={mql:i,cbs:s}):(i=E[n].mql,s=E[n].cbs),s.add(a),i.matches&&s.forEach(f=>{f(i,o)})}),le(()=>{t.forEach(o=>{const{cbs:n}=E[r[o]];n.has(a)&&n.delete(a)})}),R(()=>{const{value:o}=e;return t.filter(n=>o[n])})}const Z=1,T=ie("n-grid"),K=1,Ge={span:{type:[Number,String],default:K},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}},J=Y({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:Ge,setup(){const{isSsrRef:r,xGapRef:e,itemStyleRef:t,overflowRef:a,layoutShiftDisabledRef:o}=ue(T),n=fe();return{overflow:a,itemStyle:t,layoutShiftDisabled:o,mergedXGap:R(()=>C(e.value||0)),deriveStyle:()=>{r.value;const{privateSpan:i=K,privateShow:s=!0,privateColStart:f=void 0,privateOffset:l=0}=n.vnode.props,{value:m}=e,_=C(m||0);return{display:s?"":"none",gridColumn:`${f??`span ${i}`} / span ${i}`,marginLeft:l?`calc((100% - (${i} - 1) * ${_}) / ${i} * ${l} + ${_} * ${l})`:""}}}},render(){var r,e;if(this.layoutShiftDisabled){const{span:t,offset:a,mergedXGap:o}=this;return B("div",{style:{gridColumn:`span ${t} / span ${t}`,marginLeft:a?`calc((100% - (${t} - 1) * ${o}) / ${t} * ${a} + ${o} * ${a})`:""}},this.$slots)}return B("div",{style:[this.itemStyle,this.deriveStyle()]},(e=(r=this.$slots).default)===null||e===void 0?void 0:e.call(r,{overflow:this.overflow}))}}),ke={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},L=24,A="__ssr__",Ie={layoutShiftDisabled:Boolean,responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:L},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}},Ee=Y({name:"Grid",inheritAttrs:!1,props:Ie,setup(r){const{mergedClsPrefixRef:e,mergedBreakpointsRef:t}=se(r),a=/^\d+$/,o=w(void 0),n=Ce((t==null?void 0:t.value)||ke),i=q(()=>!!(r.itemResponsive||!a.test(r.cols.toString())||!a.test(r.xGap.toString())||!a.test(r.yGap.toString()))),s=R(()=>{if(i.value)return r.responsive==="self"?o.value:n.value}),f=q(()=>{var d;return(d=Number(I(r.cols.toString(),s.value)))!==null&&d!==void 0?d:L}),l=q(()=>I(r.xGap.toString(),s.value)),m=q(()=>I(r.yGap.toString(),s.value)),_=d=>{o.value=d.contentRect.width},S=d=>{ge(_,d)},G=w(!1),N=R(()=>{if(r.responsive==="self")return S}),v=w(!1),g=w();return de(()=>{const{value:d}=g;d&&d.hasAttribute(A)&&(d.removeAttribute(A),v.value=!0)}),pe(T,{layoutShiftDisabledRef:O(r,"layoutShiftDisabled"),isSsrRef:v,itemStyleRef:O(r,"itemStyle"),xGapRef:l,overflowRef:G}),{isSsr:!he,contentEl:g,mergedClsPrefix:e,style:R(()=>r.layoutShiftDisabled?{width:"100%",display:"grid",gridTemplateColumns:`repeat(${r.cols}, minmax(0, 1fr))`,columnGap:C(r.xGap),rowGap:C(r.yGap)}:{width:"100%",display:"grid",gridTemplateColumns:`repeat(${f.value}, minmax(0, 1fr))`,columnGap:C(l.value),rowGap:C(m.value)}),isResponsive:i,responsiveQuery:s,responsiveCols:f,handleResize:N,overflow:G}},render(){if(this.layoutShiftDisabled)return B("div",z({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style},this.$attrs),this.$slots);const r=()=>{var e,t,a,o,n,i,s;this.overflow=!1;const f=Se(we(this)),l=[],{collapsed:m,collapsedRows:_,responsiveCols:S,responsiveQuery:G}=this;f.forEach(u=>{var k,y,b,x;if(((k=u==null?void 0:u.type)===null||k===void 0?void 0:k.__GRID_ITEM__)!==!0)return;if(Ne(u)){const $=U(u);$.props?$.props.privateShow=!1:$.props={privateShow:!1},l.push({child:$,rawChildSpan:0});return}u.dirs=((y=u.dirs)===null||y===void 0?void 0:y.filter(({dir:$})=>$!==H))||null;const D=U(u),P=Number((x=I((b=D.props)===null||b===void 0?void 0:b.span,G))!==null&&x!==void 0?x:Z);P!==0&&l.push({child:D,rawChildSpan:P})});let N=0;const v=(e=l[l.length-1])===null||e===void 0?void 0:e.child;if(v!=null&&v.props){const u=(t=v.props)===null||t===void 0?void 0:t.suffix;u!==void 0&&u!==!1&&(N=(o=(a=v.props)===null||a===void 0?void 0:a.span)!==null&&o!==void 0?o:Z,v.props.privateSpan=N,v.props.privateColStart=S+1-N,v.props.privateShow=(n=v.props.privateShow)!==null&&n!==void 0?n:!0)}let g=0,d=!1;for(const{child:u,rawChildSpan:k}of l){if(d&&(this.overflow=!0),!d){const y=Number((s=I((i=u.props)===null||i===void 0?void 0:i.offset,G))!==null&&s!==void 0?s:0),b=Math.min(k+y,S);if(u.props?(u.props.privateSpan=b,u.props.privateOffset=y):u.props={privateSpan:b,privateOffset:y},m){const x=g%S;b+x>S&&(g+=S-x),b+g+N>_*S?d=!0:g+=b}}d&&(u.props?u.props.privateShow!==!0&&(u.props.privateShow=!1):u.props={privateShow:!1})}return B("div",z({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style,[A]:this.isSsr||void 0},this.$attrs),l.map(({child:u})=>u))};return this.isResponsive&&this.responsive==="self"?B(be,{onResize:this.handleResize},{default:r}):r()}});async function Be(r,e){for(let t=0;t<e.length;t++)await M.get("/zujuan-ink-be-core/data/checkExistanceGetPersonalizedInfo/"+r+"/"+e[t].id).then(async a=>{a.data?(e[t].quid=a.data.id,e[t].failedcoll=a.data.failedcoll,e[t].coll=a.data.coll,e[t].done=a.data.done):(e[t].quid=(await M.post("/zujuan-ink-be-core/data/add",{body:e[t].body,timestamp:new Date().getTime(),qid:e[t].id,bankid:r,title:e[t].title,diffv:e[t].diff.id,knowledgeInfo:e[t].knowledgeInfo,typeid:e[t].type.id})).data,e[t].failedcoll=!1,e[t].done=!1,e[t].coll=!1)});return e}function W(r){var e=r&&typeof r.valueOf=="function"?r.valueOf():r;return typeof e=="number"&&Number.isFinite(e)}const ct={__name:"paper",setup(r){const e=te(),t=re(),a=w(0),o=w(0),n=w("");t.query.bankid&&(o.value=parseInt(t.query.bankid)),t.query.paper&&(a.value=parseInt(t.query.PaperId));const i=()=>{!W(o.value)&&W(a.value)&&ne({title:"请输入合法的数字",icon:"error"}),ee(`/app-server/v1/paper/detail/${o.value}/${a.value}`,"GET").then(async f=>{window.TList=f.data.quesList,window.TList=await Be(o.value,window.TList),window.qcomponent="zjw",oe(e,"/room")})},s=()=>{const f=/zujuan\.xkw\.com\/(\d*)p(\d*).html/.exec(n.value);f&&(o.value=parseInt(f[1]),a.value=parseInt(f[2]))};return(f,l)=>(ce(),me(p(Ee),{"x-gap":"12",cols:2},{default:h(()=>[c(p(J),null,{default:h(()=>[c(p(Q),{hoverable:""},{default:h(()=>[c(p(ae),{"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging"},{default:h(()=>[c(p(V),{label:"BankId"},{default:h(()=>[c(p(X),{value:o.value,"onUpdate:value":l[0]||(l[0]=m=>o.value=m)},null,8,["value"])]),_:1}),j(),c(p(V),{label:"paperId"},{default:h(()=>[c(p(X),{value:a.value,"onUpdate:value":l[1]||(l[1]=m=>a.value=m)},null,8,["value"])]),_:1}),c(p(F),{onClick:i},{default:h(()=>[j("进入")]),_:1})]),_:1})]),_:1})]),_:1}),c(p(J),null,{default:h(()=>[c(p(Q),{hoverable:""},{default:h(()=>[c(p(ye),null,{default:h(()=>[j("您可以输入试卷对应的网址")]),_:1}),c(p(Re),{placeholder:"e.g. https://zujuan.xkw.com/12p1623524.html",onChange:s,value:n.value,"onUpdate:value":l[2]||(l[2]=m=>n.value=m)},null,8,["value"]),c(p(F),{onClick:l[3]||(l[3]=m=>{s(),i()})},{default:h(()=>[j("进入")]),_:1})]),_:1})]),_:1})]),_:1}))}};export{ct as default};
