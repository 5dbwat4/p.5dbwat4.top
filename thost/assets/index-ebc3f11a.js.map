{"version":3,"file":"index-ebc3f11a.js","sources":["../../src/views/list/extention-preview.vue","../../src/views/list/index.vue"],"sourcesContent":["<template>\r\n<div v-html=\"content\"></div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, useAttrs } from \"vue\";\r\nimport { API } from \"../../shared/APIHelper\";\r\n\r\nconst attrs=useAttrs()\r\nconst content=ref(\"\")\r\n\r\nAPI.get(\"/api/qapi/get/\"+attrs.id).then(o=>{\r\ncontent.value=o.q\r\n})\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","<template>\r\n<n-button @click=\"$router.push('/list/uuids_all')\">ALL UUIDS</n-button>\r\n<n-data-table remote\r\n:data=\"data\" :columns=\"columns\"   :loading=\"loading\"\r\n    @update:checked-row-keys=\"handleCheck\" :row-key=\"(row)=>row.id\" visual-scroll />\r\n\r\n     <n-input-group>\r\n      <n-input-group-label>偏移(offset)</n-input-group-label>\r\n     <n-input-number :min=\"0\" v-model:value=\"offset\"/>\r\n     <n-input-group-label>总数(limit)</n-input-group-label>\r\n     <n-input-number  :min=\"0\" v-model:value=\"limit\"/>\r\n      <n-button @click=\"relist\">前往</n-button>\r\n      <n-button @click=\"relist_nextos\">下一组</n-button>\r\n    </n-input-group>\r\n        <n-button @click=\"gotobatch\">BATCH</n-button>\r\n<p>{{data.map(v=>v.id).join(\",\")}}</p>\r\n</template>\r\n\r\n<script setup>\r\nimport { NButton, NDataTable,NInputNumber,NInputGroup,NInputGroupLabel } from \"naive-ui\";\r\nimport { h, ref } from \"vue\";\r\n\r\nimport {useRoute,useRouter} from \"vue-router\"\r\nimport ExtrntionPreview from \"./extention-preview.vue\"\r\nimport {API} from \"../../shared/APIHelper\"\r\nconst route=useRoute(),router=useRouter()\r\n\r\n\r\n\r\nconst data=ref([])\r\n\r\nconst columns=[{\r\n    type:\"selection\"\r\n},{\r\n    type:\"expand\",\r\n    renderExpand(row){\r\n        return h(ExtrntionPreview,{\r\n            id:row.id\r\n        })\r\n    }\r\n},{\r\n    title:\"uuid\",\r\n    key:\"id\"\r\n},{\r\n    title:\"submit time\",\r\n    render(row){\r\n        return h(\"p\",{},(new Date(row.timestamp)).toISOString())\r\n    }\r\n},{\r\n    title:\"extra\",\r\n    key:\"extra\"\r\n},{\r\n    title:\"view\",\r\n    render(row){\r\n        return h(NButton,{\r\n            text:true,\r\n            onClick:()=>{\r\n                router.push(\"/view/\"+row.id)\r\n            }\r\n        },{default:()=>\"View\"})\r\n    }\r\n}]\r\n\r\nconst checkedRowKeysRef=ref([])\r\nconst handleCheck=(rowKeys) =>{\r\n        checkedRowKeysRef.value = rowKeys;\r\n        console.log(rowKeys);\r\n      }\r\n\r\n      ,gotobatch=()=>{\r\n        router.push(\"/batch/\"+checkedRowKeysRef.value.join(\",\"))\r\n      }\r\n\r\n\r\nconst loading=ref(true),offset=ref(parseInt(route.query.offset||\"0\")),limit=ref(parseInt(route.query.limit||\"50\"))\r\n// if(route.query.subject){\r\n\r\n// }\r\n// fetch(\"/api/list/v2\",{method:\"POST\",\"headers\":{\"Content-Type\":\"application/json\"},body:\r\n// JSON.stringify(route.query||{})}).then(v=>v.json()).then(v=>{data.value=v})\r\n\r\n// switch(route.props.type){\r\n//     case \"pure\":{\r\n//         fetch(\"/api/list/v2\",{method:\"POST\"}).then(v=>v.json()).then(v=>{data.value=v})\r\n//     }\r\n// }\r\n// fetch(\"/api/list/v1\",{method:\"POST\"}).then(v=>v.json()).then(v=>{data.value=v})\r\nconsole.log(route.query);\r\nif(!route.query.filter){\r\n    API.get(\"/api/list/v2/directget/\"+offset.value+\"/\"+limit.value).then(v=>{data.value=v;loading.value=false})\r\n}\r\nif(route.query.filter==\"subject\"){\r\n    // console.log(\"djtfuf\");\r\n    \r\n    API.get(\"/api/list/v2/filter/subject/\"+route.query.subject+\"/\"+offset.value+\"/\"+limit.value).then(v=>{data.value=v;loading.value=false})\r\n}\r\n\r\n// const relist=()=>{\r\n//     let rpa=route.query\r\n//     rpa.offset=offset.value\r\n//     rpa.limit=limit.value\r\n\r\n//     console.log(rpa);\r\n//     router.push({\r\n//         \"path\":\"/list\",\r\n//         \"query\":\r\n//         \"query\":rpa\r\n//     })\r\n//     // route.query.offset=5\r\n// }\r\n\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"],"names":["attrs","useAttrs","content","ref","API","o","route","useRoute","router","useRouter","data","columns","row","h","ExtrntionPreview","NButton","checkedRowKeysRef","handleCheck","rowKeys","gotobatch","loading","offset","limit","v"],"mappings":"4nDAQA,MAAMA,EAAMC,EAAU,EAChBC,EAAQC,EAAI,EAAE,EAEpB,OAAAC,EAAI,IAAI,iBAAiBJ,EAAM,EAAE,EAAE,KAAKK,GAAG,CAC3CH,EAAQ,MAAMG,EAAE,CAChB,CAAC,mFCYD,MAAMC,EAAMC,EAAQ,EAAGC,EAAOC,EAAW,EAInCC,EAAKP,EAAI,EAAE,EAEXQ,EAAQ,CAAC,CACX,KAAK,WACT,EAAE,CACE,KAAK,SACL,aAAaC,EAAI,CACb,OAAOC,EAAEC,EAAiB,CACtB,GAAGF,EAAI,EACnB,CAAS,CACJ,CACL,EAAE,CACE,MAAM,OACN,IAAI,IACR,EAAE,CACE,MAAM,cACN,OAAOA,EAAI,CACP,OAAOC,EAAE,IAAI,CAAA,EAAI,IAAI,KAAKD,EAAI,SAAS,EAAG,aAAa,CAC1D,CACL,EAAE,CACE,MAAM,QACN,IAAI,OACR,EAAE,CACE,MAAM,OACN,OAAOA,EAAI,CACP,OAAOC,EAAEE,EAAQ,CACb,KAAK,GACL,QAAQ,IAAI,CACRP,EAAO,KAAK,SAASI,EAAI,EAAE,CAC9B,CACb,EAAU,CAAC,QAAQ,IAAI,MAAM,CAAC,CACzB,CACL,CAAC,EAEKI,EAAkBb,EAAI,EAAE,EACxBc,EAAaC,GAAW,CACtBF,EAAkB,MAAQE,EAC1B,QAAQ,IAAIA,CAAO,CACpB,EAEAC,EAAU,IAAI,CACbX,EAAO,KAAK,UAAUQ,EAAkB,MAAM,KAAK,GAAG,CAAC,CACxD,EAGDI,EAAQjB,EAAI,EAAI,EAAEkB,EAAOlB,EAAI,SAASG,EAAM,MAAM,QAAQ,GAAG,CAAC,EAAEgB,EAAMnB,EAAI,SAASG,EAAM,MAAM,OAAO,IAAI,CAAC,EAajH,eAAQ,IAAIA,EAAM,KAAK,EACnBA,EAAM,MAAM,QACZF,EAAI,IAAI,0BAA0BiB,EAAO,MAAM,IAAIC,EAAM,KAAK,EAAE,KAAKC,GAAG,CAACb,EAAK,MAAMa,EAAEH,EAAQ,MAAM,EAAK,CAAC,EAE3Gd,EAAM,MAAM,QAAQ,WAGnBF,EAAI,IAAI,+BAA+BE,EAAM,MAAM,QAAQ,IAAIe,EAAO,MAAM,IAAIC,EAAM,KAAK,EAAE,KAAKC,GAAG,CAACb,EAAK,MAAMa,EAAEH,EAAQ,MAAM,EAAK,CAAC"}