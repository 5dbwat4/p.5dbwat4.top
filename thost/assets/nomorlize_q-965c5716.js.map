{"version":3,"file":"nomorlize_q-965c5716.js","sources":["../../src/shared/nomorlize_q.js"],"sourcesContent":["function normalizeq(q,Nopt){\r\n    const ool=document.createElement(\"div\")\r\n    q=q.replaceAll(\"【题文】\",\"\")\r\n    ool.innerHTML=q\r\n\r\n    ool.querySelectorAll(\"img\").forEach(v=>{\r\n        if(v.src.includes(\"/formula/\")){\r\n            v.src=v.src.replace(\".png\",\".svg\")\r\n            v.style.width=(v.width*.8)+\"px\"\r\n            v.setAttribute(\"width\",(v.width*.8))\r\n            v.setAttribute(\"height\",\"\")\r\n        }\r\n        if(v.src.includes(\"/dksih/\")){\r\n            let tmp=/\\?resizew=(\\d*)/.exec(v.src)\r\n            if(tmp&&tmp.length!=0){\r\n                if(tmp[1]>500)tmp[1]=500\r\n                v.style.width=tmp[1]+\"px\"\r\n                v.src=v.src.replace(/\\?resizew=(\\d*)/,\"\")\r\n                v.setAttribute(\"width\",tmp[1])\r\n                v.setAttribute(\"height\",\"\")\r\n            }\r\n            v.outerHTML=`\r\n        \r\n            <div style=\"width: fit-content;display: inline-block;text-align: center;\" class=\"__ccccimage\">${v.outerHTML}\r\n    <p style=\"margin: 0 0;font-family: kaiti;\">（第${Nopt.tindex}题图）</p></div>`\r\n            v.setAttribute(\"data-pictid\",Nopt.tindex)\r\n        }\r\n    })\r\n\r\n\r\n    ool.querySelectorAll(\"p\").forEach(v=>{\r\n        if(!v.style.fontFamily){\r\n            v.style.fontFamily=\"Times New Roman , 宋体\"\r\n        }\r\n        if(!v.style.fontSize){\r\n            v.style.fontSize=\"9.5pt\"\r\n        }\r\n\r\n        // v.style.lineHeight=\"12pt\"\r\n        v.style.margin=\"0px\"\r\n    })\r\n\r\n\r\n    // ool.querySelectorAll(\"table[name=optionsTable]\").forEach(v=>{\r\n    //     if(v.querySelectorAll(\"td\").length==4){\r\n    //         // console.log(\"oo\",v);\r\n    //         let opts=[],lns=1\r\n    //         v.querySelectorAll(\"td\").forEach(oo=>{\r\n    //             opts.push(oo.outerHTML)\r\n    //         })\r\n    //         v.addEventListener(\"click\",()=>{\r\n    //             console.log(\"click\");\r\n    //             const {ctn,next_lns}=toTable(opts,lns)\r\n    //             v.innerHTML=ctn\r\n    //             lns=next_lns\r\n    //         })\r\n    //     }\r\n\r\n    // })\r\n    \r\n    ool.querySelectorAll(\"table[name=optionsTable]\").forEach(v=>{\r\n        if(v.querySelectorAll(\"td\").length==4){\r\n            // console.log(\"oo\",v);\r\n            let opts=[],lns=1\r\n            v.querySelectorAll(\"td\").forEach(oo=>{\r\n                opts.push(oo.outerHTML)\r\n            })\r\n            // v.addEventListener(\"click\",()=>{\r\n            //     console.log(\"click\");\r\n                const {ctn,next_lns}=toTable(opts,4)\r\n                v.innerHTML=ctn\r\n                // lns=next_lns\r\n            // })\r\n        }\r\n\r\n    })\r\n    // ool.querySelectorAll(\"table[name=optionsTable] td\").forEach(v=>{\r\n    //     if(!v.style.fontFamily){\r\n    //         v.style.fontFamily=\"Times New Roman , 宋体\"\r\n    //     }\r\n    //     if(!v.style.fontSize){\r\n    //         v.style.fontSize=\"9.5pt\"\r\n    //     }\r\n\r\n    //     // v.style.lineHeight=\"12pt\"\r\n    //     v.style.margin=\"0px\"\r\n    // })\r\n    ool.querySelectorAll(\"table[name=optionsTable] td\").forEach(v=>{\r\n        v.innerHTML=\"<span style='width:fit-content;display:block;'>\"+v.innerHTML+\"</span>\"\r\n        if(!v.style.fontFamily){\r\n            v.style.fontFamily=\"Times New Roman , 宋体\"\r\n        }\r\n        if(!v.style.fontSize){\r\n            v.style.fontSize=\"9.5pt\"\r\n        }\r\n        // console.log(v.querySelector(\"span\").clientWidth);\r\n\r\n        // v.style.lineHeight=\"12pt\"\r\n        v.style.margin=\"0px\"\r\n    })\r\n\r\n    //18.76/4\r\n\r\n    ool.style.fontFamily=\"Times New Roman , 宋体\"\r\n\r\n\r\n    // if(Nopt.ret2){\r\n    //     ool.querySelectorAll(\"span\").forEach(v=>{\r\n    //         v.innerHTML=v.innerHTML.replace(/【小题(\\d*)】/,\"$1.\")\r\n    //     })\r\n    //     ool.querySelectorAll(\"bk\").forEach(v=>{\r\n    //         v.innerHTML=\"<u>&nbsp;&nbsp;&nbsp;\"+v.attributes.index.nodeValue+\"&nbsp;&nbsp;&nbsp;</u>\"\r\n            \r\n    //     })\r\n    // }\r\n\r\n    // console.log(ool.innerHTML);\r\n\r\n// console.log(ool.outerHTML);\r\n\r\n\r\nool.childNodes.forEach(e=>{\r\n    if(e.nodeName==\"#text\"){\r\n        const chi=document.createElement(\"p\")\r\n        chi.style.display=\"inline\"\r\n        chi.style.margin=\"0\"\r\n    \r\n        chi.innerText=e.textContent\r\n        if(e.textContent.includes(\"______________________________________________________\")){\r\n            chi.style.wordBreak=\"break-all\"\r\n        }\r\n        e.parentNode.replaceChild(chi,e)\r\n    }\r\n})\r\nool.querySelectorAll(\"sub\").forEach(\r\n    (ee)=>{\r\n    ee.style.display=\"inline\"\r\n})\r\nool.querySelectorAll(\"sup\").forEach(\r\n    (ee)=>{\r\n    ee.style.display=\"inline\"\r\n})\r\n\r\nool.querySelectorAll(\"bk[type=underline]\").forEach(\r\n    (ee)=>{\r\n    if(ee.innerText.includes(\"_\")){\r\n        ee.style.color=\"lightgray\"\r\n  ee.style.fontSize= \"13pt\";\r\n//   ee.style.textDecorationLine= \"underline\";\r\n//   ee.style.textDecorationStyle= \"dashed\";\r\n//   ee.style.textDecorationColor=\"black\";\r\n//   ee.style.textDecorationThickness=\" 0.5px\";\r\n    }\r\n})\r\n\r\nif(Nopt.includeti){\r\n    console.log(\"rrr\");\r\n    ool.insertAdjacentHTML(\"afterbegin\",`<strong>${Nopt.tindex}. </strong>`)\r\n}\r\nif(Nopt.gtittype==3){\r\n    ool.insertAdjacentHTML(\"afterbegin\",`<strong>${Nopt.tindex}.</strong> (${Nopt.ootInfo[0]},${Nopt.ootInfo[1]}) `)\r\n}\r\nif(Nopt.gtittype==4){\r\n    ool.insertAdjacentHTML(\"afterbegin\",`<strong>${Nopt.tindex}.</strong> `)\r\n}\r\n\r\n\r\nool.querySelectorAll(\"p\").forEach(ee=>{\r\n    if(ee.innerText==\"\\n\\n\"){\r\n        ee.parentNode.removeChild(ee)\r\n    }\r\n})\r\nool.querySelectorAll(\"br\").forEach(vv=>{\r\n    if(vv.nextSibling?.tagName==\"BR\"){\r\n        vv.nextSibling.style.display=\"none\"\r\n    }\r\n})\r\nool.querySelectorAll(\"br\").forEach(vv=>{\r\n        if(vv.style.display==\"none\"){\r\n            vv.parentNode.removeChild(vv)\r\n        }\r\n})\r\n\r\n\r\n    return ool.outerHTML\r\n}\r\n\r\n\r\nfunction toTable(opts,lns){\r\n    if(lns==1){\r\n        return {ctn:\"<tbody><tr>\"+opts.join(\"\")+\"</tr></tbody>\",next_lns:2}\r\n    }\r\n    if(lns==2){\r\n        return {ctn:`<tbody><tr>${opts[0]}${opts[1]}</tr><tr>${opts[2]}${opts[3]}</tr></tbody>`,next_lns:4}\r\n    }\r\n    if(lns==4){\r\n        return {ctn:\"<tbody><tr>\"+opts.join(\"</tr><tr>\")+\"</tr></tbody>\",next_lns:1}\r\n    }\r\n}\r\n\r\nexport{normalizeq}\r\n"],"names":["normalizeq","q","Nopt","ool","v","tmp","opts","oo","ctn","next_lns","toTable","chi","ee","vv","lns"],"mappings":"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"}