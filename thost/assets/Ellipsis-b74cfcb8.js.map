{"version":3,"file":"Ellipsis-b74cfcb8.js","sources":["../../node_modules/.pnpm/naive-ui@2.38.1_vue@3.4.25/node_modules/naive-ui/es/ellipsis/styles/light.mjs","../../node_modules/.pnpm/naive-ui@2.38.1_vue@3.4.25/node_modules/naive-ui/es/ellipsis/src/styles/index.cssr.mjs","../../node_modules/.pnpm/naive-ui@2.38.1_vue@3.4.25/node_modules/naive-ui/es/ellipsis/src/Ellipsis.mjs"],"sourcesContent":["import { createTheme } from \"../../_mixins/index.mjs\";\nimport { commonLight } from \"../../_styles/common/index.mjs\";\nimport { tooltipLight } from \"../../tooltip/styles/index.mjs\";\nconst ellipsisLight = createTheme({\n  name: 'Ellipsis',\n  common: commonLight,\n  peers: {\n    Tooltip: tooltipLight\n  }\n});\nexport default ellipsisLight;","import { cB, cNotM, cM } from \"../../../_utils/cssr/index.mjs\";\nexport default cB('ellipsis', {\n  overflow: 'hidden'\n}, [cNotM('line-clamp', `\n white-space: nowrap;\n display: inline-block;\n vertical-align: bottom;\n max-width: 100%;\n `), cM('line-clamp', `\n display: -webkit-inline-box;\n -webkit-box-orient: vertical;\n `), cM('cursor-pointer', `\n cursor: pointer;\n `)]);","import { defineComponent, h, ref, computed, mergeProps, onDeactivated } from 'vue';\nimport { NTooltip } from \"../../tooltip/index.mjs\";\nimport { useMergedClsPrefix } from \"../../_mixins/use-config.mjs\";\nimport { useTheme } from \"../../_mixins/index.mjs\";\nimport { ellipsisLight } from \"../styles/index.mjs\";\nimport style from \"./styles/index.cssr.mjs\";\nexport function createLineClampClass(clsPrefix) {\n  return `${clsPrefix}-ellipsis--line-clamp`;\n}\nexport function createCursorClass(clsPrefix, cursor) {\n  return `${clsPrefix}-ellipsis--cursor-${cursor}`;\n}\nexport const ellipsisProps = Object.assign(Object.assign({}, useTheme.props), {\n  expandTrigger: String,\n  lineClamp: [Number, String],\n  tooltip: {\n    type: [Boolean, Object],\n    default: true\n  }\n});\nexport default defineComponent({\n  name: 'Ellipsis',\n  inheritAttrs: false,\n  props: ellipsisProps,\n  setup(props, {\n    slots,\n    attrs\n  }) {\n    const mergedClsPrefixRef = useMergedClsPrefix();\n    const mergedTheme = useTheme('Ellipsis', '-ellipsis', style, ellipsisLight, props, mergedClsPrefixRef);\n    const triggerRef = ref(null);\n    const triggerInnerRef = ref(null);\n    const tooltipRef = ref(null);\n    const expandedRef = ref(false);\n    const ellipsisStyleRef = computed(() => {\n      const {\n        lineClamp\n      } = props;\n      const {\n        value: expanded\n      } = expandedRef;\n      if (lineClamp !== undefined) {\n        return {\n          textOverflow: '',\n          '-webkit-line-clamp': expanded ? '' : lineClamp\n        };\n      } else {\n        return {\n          textOverflow: expanded ? '' : 'ellipsis',\n          '-webkit-line-clamp': ''\n        };\n      }\n    });\n    function getTooltipDisabled() {\n      let tooltipDisabled = false;\n      const {\n        value: expanded\n      } = expandedRef;\n      if (expanded) return true;\n      const {\n        value: trigger\n      } = triggerRef;\n      if (trigger) {\n        const {\n          lineClamp\n        } = props;\n        // we need to apply style here, since the dom may be updated in\n        // nextTick, measure dom size will derive wrong result\n        syncEllipsisStyle(trigger);\n        if (lineClamp !== undefined) {\n          tooltipDisabled = trigger.scrollHeight <= trigger.offsetHeight;\n        } else {\n          const {\n            value: triggerInner\n          } = triggerInnerRef;\n          if (triggerInner) {\n            tooltipDisabled = triggerInner.getBoundingClientRect().width <= trigger.getBoundingClientRect().width;\n          }\n        }\n        syncCursorStyle(trigger, tooltipDisabled);\n      }\n      return tooltipDisabled;\n    }\n    const handleClickRef = computed(() => {\n      return props.expandTrigger === 'click' ? () => {\n        var _a;\n        const {\n          value: expanded\n        } = expandedRef;\n        if (expanded) {\n          (_a = tooltipRef.value) === null || _a === void 0 ? void 0 : _a.setShow(false);\n        }\n        expandedRef.value = !expanded;\n      } : undefined;\n    });\n    onDeactivated(() => {\n      var _a;\n      if (props.tooltip) {\n        (_a = tooltipRef.value) === null || _a === void 0 ? void 0 : _a.setShow(false);\n      }\n    });\n    const renderTrigger = () => h(\"span\", Object.assign({}, mergeProps(attrs, {\n      class: [`${mergedClsPrefixRef.value}-ellipsis`, props.lineClamp !== undefined ? createLineClampClass(mergedClsPrefixRef.value) : undefined, props.expandTrigger === 'click' ? createCursorClass(mergedClsPrefixRef.value, 'pointer') : undefined],\n      style: ellipsisStyleRef.value\n    }), {\n      ref: \"triggerRef\",\n      onClick: handleClickRef.value,\n      onMouseenter:\n      // get tooltip disabled will derive cursor style\n      props.expandTrigger === 'click' ? getTooltipDisabled : undefined\n    }), props.lineClamp ? slots : h(\"span\", {\n      ref: \"triggerInnerRef\"\n    }, slots));\n    function syncEllipsisStyle(trigger) {\n      if (!trigger) return;\n      const latestStyle = ellipsisStyleRef.value;\n      const lineClampClass = createLineClampClass(mergedClsPrefixRef.value);\n      if (props.lineClamp !== undefined) {\n        syncTriggerClass(trigger, lineClampClass, 'add');\n      } else {\n        syncTriggerClass(trigger, lineClampClass, 'remove');\n      }\n      for (const key in latestStyle) {\n        // guard can make it a little faster\n        if (trigger.style[key] !== latestStyle[key]) {\n          ;\n          trigger.style[key] = latestStyle[key];\n        }\n      }\n    }\n    function syncCursorStyle(trigger, tooltipDisabled) {\n      const cursorClass = createCursorClass(mergedClsPrefixRef.value, 'pointer');\n      if (props.expandTrigger === 'click' && !tooltipDisabled) {\n        syncTriggerClass(trigger, cursorClass, 'add');\n      } else {\n        syncTriggerClass(trigger, cursorClass, 'remove');\n      }\n    }\n    function syncTriggerClass(trigger, styleClass, action) {\n      if (action === 'add') {\n        if (!trigger.classList.contains(styleClass)) {\n          trigger.classList.add(styleClass);\n        }\n      } else {\n        if (trigger.classList.contains(styleClass)) {\n          trigger.classList.remove(styleClass);\n        }\n      }\n    }\n    return {\n      mergedTheme,\n      triggerRef,\n      triggerInnerRef,\n      tooltipRef,\n      handleClick: handleClickRef,\n      renderTrigger,\n      getTooltipDisabled\n    };\n  },\n  render() {\n    var _a;\n    const {\n      tooltip,\n      renderTrigger,\n      $slots\n    } = this;\n    if (tooltip) {\n      const {\n        mergedTheme\n      } = this;\n      return h(NTooltip, Object.assign({\n        ref: \"tooltipRef\",\n        placement: \"top\"\n      }, tooltip, {\n        getDisabled: this.getTooltipDisabled,\n        theme: mergedTheme.peers.Tooltip,\n        themeOverrides: mergedTheme.peerOverrides.Tooltip\n      }), {\n        trigger: renderTrigger,\n        default: (_a = $slots.tooltip) !== null && _a !== void 0 ? _a : $slots.default\n      });\n    } else return renderTrigger();\n  }\n});"],"names":["ellipsisLight","createTheme","commonLight","tooltipLight","ellipsisLight$1","style","cB","cNotM","cM","createLineClampClass","clsPrefix","createCursorClass","cursor","ellipsisProps","useTheme","NEllipsis","defineComponent","props","slots","attrs","mergedClsPrefixRef","useMergedClsPrefix","mergedTheme","triggerRef","ref","triggerInnerRef","tooltipRef","expandedRef","ellipsisStyleRef","computed","lineClamp","expanded","getTooltipDisabled","tooltipDisabled","trigger","syncEllipsisStyle","triggerInner","syncCursorStyle","handleClickRef","_a","onDeactivated","renderTrigger","h","mergeProps","latestStyle","lineClampClass","syncTriggerClass","key","cursorClass","styleClass","action","tooltip","$slots","NTooltip"],"mappings":"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","x_google_ignoreList":[0,1,2]}