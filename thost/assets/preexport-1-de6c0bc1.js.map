{"version":3,"file":"preexport-1-de6c0bc1.js","sources":["../../src/views/mistakes_coll/themes/head-theme-0.vue","../../src/views/mistakes_coll/themes/head-theme-1.vue","../../src/views/mistakes_coll/themes/head-theme-2.vue","../../src/views/mistakes_coll/preexport-1.vue"],"sourcesContent":["<template>\r\n      <p\r\n        style=\"font-size: 6.5pt; font-family: Cambria, 仿宋; margin: 0px\"\r\n      >\r\n        Generated by thost | Group UUID:\r\n        <span style=\"font-family: 'courier new'\">{{ $attrs.data.guid }}</span> |\r\n        Title: {{ $attrs.data.title }}\r\n      </p>\r\n</template>\r\n<script setup>\r\n\r\n</script>","<template>\r\n <div\r\n        style=\"text-align: center; font-family: Cambria, 仿宋; margin: 0px\"\r\n      >\r\n        <p style=\"font-size: 10pt\">{{ $attrs.data.title }}</p>\r\n        <p style=\"font-size: 6.5pt\">\r\n          Generated by thost | UUID:\r\n          <span style=\"font-family: 'courier new'\">{{ $attrs.data.guid }}</span>\r\n        </p>\r\n      </div>\r\n</template>\r\n<script setup>\r\n\r\n</script>","<template>\r\n<div\r\n        style=\"text-align: center; font-family: 黑体; margin: 0px\"\r\n      >\r\n        <p style=\"font-size: 10pt\">{{ $attrs.data.title }}</p>\r\n      </div>\r\n</template>\r\n<script setup>\r\n\r\n</script>","<template>\r\n    <!-- <n-button class=\"noprint\" @click=\"shown.q = !shown.q\">Q</n-button>\r\n    <n-button class=\"noprint\" @click=\"shown.a = !shown.a\">A</n-button>\r\n    <n-button class=\"noprint\" @click=\"shown.p = !shown.p\">P</n-button> -->\r\n  \r\n    <!-- <n-button class=\"noprint\" type=\"success\" @click=\"_Tour__open=true\"\r\n      >开始引导</n-button\r\n    > -->\r\n    <!-- <n-button class=\"noprint\" @click=\"currentClicker = addExtBlank\"\r\n      >单击题面时增加空格</n-button\r\n    >\r\n    <n-button class=\"noprint\" @click=\"fontreset\">字体转为Times</n-button> -->\r\n    <n-button\r\n      class=\"noprint\"\r\n      @click=\"\r\n        printhelper_columns == 2\r\n          ? (printhelper_columns = 1)\r\n          : (printhelper_columns = 2)\r\n      \"\r\n      >改变列数\r\n    </n-button>\r\n    <!-- <n-button\r\n      class=\"noprint\"\r\n      @click=\"\r\n        currentClicker = () => {};\r\n        optiontableInit();\r\n      \"\r\n      >修正opttable</n-button\r\n    > -->\r\n    <n-button class=\"noprint\" @click=\"Noptions_ret2 = true\">Retheme 2</n-button>\r\n    <n-button class=\"noprint\" ref=\"btn1\" @click=\"titleformat++\">Title format</n-button>\r\n    <n-button class=\"noprint\" ref=\"btn2\" @click=\"infoformat++\">Info format</n-button>\r\n    <n-button class=\"noprint\" ref=\"btn3\" @click=\"op2change()\"\r\n      >进入不包含fixed content的修正页面</n-button\r\n    >\r\n    <div :style=\"{ width: '18.76cm', 'line-height': 'normal' }\" id=\"oonom\">\r\n      <div class=\"noprint\">\r\n        <div class=\"labi-container\">\r\n          <div\r\n            class=\"labi-block\"\r\n            v-for=\"rr in [1, 2, 3, 4, 5, 6, 7]\"\r\n            :key=\"rr\"\r\n            :style=\"{ height: 1045 + 'px' }\"\r\n          >\r\n            Page # {{ rr }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div\r\n        id=\"corehtml\"\r\n        :style=\"{\r\n          width: '18.95cm',\r\n          columns: printhelper_columns,\r\n          'line-height': 'normal',\r\n        }\"\r\n      >\r\n  \r\n       <head-theme-0  v-if=\"titleformat % titleformatCount == 0\" :data=\"GroupDataPassed\"/>\r\n       <head-theme-1  v-if=\"titleformat % titleformatCount == 1\" :data=\"GroupDataPassed\"/>\r\n       <head-theme-2  v-if=\"titleformat % titleformatCount == 2\" :data=\"GroupDataPassed\"/>\r\n        \r\n        <div\r\n          v-for=\"(oo, i) in chunk2array(Tlist)\"\r\n          :key=\"oo.id\"\r\n          @click=\"currentClicker(oo.id)\"\r\n          class=\"___core_block\"\r\n          :data_id=\"i\"\r\n        >\r\n<div v-html=\"generateHTMLCodeQwithStyling(oo.mistakes_coll,oo.quesRecord,i+1)\"></div>\r\n  \r\n          <div v-if=\"shown.q\" :style=\"{display:'block',height:(oo._extb_height||0)+'px'}\" class=\"extblank\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  \r\n  \r\n  \r\n  \r\n  \r\n    <!-- <a-tour :open=\"open\" :mask=\"false\" type=\"primary\" :steps=\"_Tour_step\" /> -->\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { onMounted, ref } from \"vue\";\r\n  import { useRoute, useRouter } from \"vue-router\";\r\n  \r\n  \r\n  \r\n  \r\n  const route = useRoute(),\r\n    router = useRouter();\r\n  \r\n  import { NButton } from \"naive-ui\";\r\n  \r\n  \r\n  import { qtypes } from \"@/shared/define_basic_qtypes\";\r\n  \r\n  import { API } from \"@/shared/APIHelper\";\r\n  \r\n  \r\n  import {normalizeq}from \"@/shared/normalize_q/toPrint_MistakesCollSpecialized\"\r\n  \r\n  import HeadTheme0 from \"./themes/head-theme-0.vue\";\r\n  import HeadTheme1 from \"./themes/head-theme-1.vue\";\r\n  import HeadTheme2 from \"./themes/head-theme-2.vue\";\r\n  import BlockTheme0 from \"./themes/block-theme-0.vue\";\r\n  import BlockTheme1 from \"./themes/block-theme-1.vue\";\r\n  import BlockTheme2 from \"./themes/block-theme-2.vue\";\r\nimport { generateHTMLCodeQwithStyling } from \"./generateHTMLCode\";\r\n  const titleformat = ref(0),\r\n    infoformat = ref(0),\r\n    titleformatCount = 3,\r\n    infoformatCount = 3;\r\n  \r\n  \r\n  const shown = ref({\r\n    q: true,\r\n    a: false,\r\n    p: false,\r\n  });\r\n  \r\n  \r\n  \r\n  const grouptitle = ref(\"\");\r\n  \r\n  const GroupDataPassed = ref({\r\n    title:\"\",\r\n    guid:route.params.id\r\n  })\r\n  \r\n  const Tlist = ref({});\r\n  const Noptions_ret2 = ref(false);\r\n  API.get(\"/api/data/mistakes_coll/session/get/\"+route.params.id).then((sss) => {\r\n    sss.list.split(\",\").forEach((v) => {\r\n      Tlist.value[v] = qtypes;\r\n    });\r\n  \r\n    GroupDataPassed.value.title= grouptitle.value = sss.title;\r\n  \r\n  \r\n  \r\n    Promise.all(\r\n      sss.list.split(\",\").map(\r\n        (v) =>\r\n          new Promise((res, rej) => {\r\n            API.get(\"/api/data/mistakes_coll/get/full_with_question/\" + v).then((i) => {\r\n              Tlist.value[v] = i;\r\n            });\r\n          })\r\n      )\r\n    ).then(() => {});\r\n    // fetch(\"/api/get\",{\"method\":\"POST\",\"body\":JSON.stringify({id:v}),\"headers\":{\"Content-Type\":\"application/json\"}}).then(o=>o.json()).then(i=>{\r\n    //     Tlist.value[v]=i\r\n    // })\r\n    // }))).then(()=>{\r\n  \r\n    // })\r\n  });\r\n  \r\n  //adddddd\r\n  \r\n  const _JSONparse = (v) => {\r\n      return JSON.parse(v);\r\n    },\r\n    chunk2array = (mm) => Object.entries(mm).map((o) => o[1]);\r\n  \r\n  const currentClicker = ref((v) => {});\r\n  \r\n  const addExtBlank = (id) => {\r\n    Tlist.value[id]._extb_height = (Tlist.value[id]._extb_height || 0) + 50;\r\n    console.log(Tlist.value[id]._extb_height);\r\n  };\r\n  \r\n  const printhelper_columns = ref(1);\r\n  \r\n  const op2change = () => {\r\n    localStorage.setItem(\r\n      \"___thost___html_export\",\r\n      document.getElementById(\"corehtml\").outerHTML\r\n    );\r\n    router.push(\"/grouping/preexport-2/\" + route.params.id);\r\n  };\r\n  \r\n  const __Fontfamily = ref(\"Cambria , 宋体\");\r\n  const fontreset = () => {\r\n    __Fontfamily.value = \"Times New Roman , 宋体!important\";\r\n  };\r\n  const optiontableInit = () => {\r\n    document.querySelectorAll(\"table[name=optionsTable]\").forEach((v) => {\r\n      if (v.querySelectorAll(\"td\").length == 4) {\r\n        console.log(\"oo\", v);\r\n        let opts = [],\r\n          lns = 1;\r\n        v.querySelectorAll(\"td\").forEach((oo) => {\r\n          opts.push(oo.outerHTML);\r\n        });\r\n        v.addEventListener(\"click\", () => {\r\n          console.log(\"click\");\r\n          const { ctn, next_lns } = toTable(opts, lns);\r\n          v.innerHTML = ctn;\r\n          lns = next_lns;\r\n        });\r\n      }\r\n    });\r\n  \r\n    function toTable(opts, lns) {\r\n      if (lns == 1) {\r\n        return {\r\n          ctn: \"<tbody><tr>\" + opts.join(\"\") + \"</tr></tbody>\",\r\n          next_lns: 2,\r\n        };\r\n      }\r\n      if (lns == 2) {\r\n        return {\r\n          ctn: `<tbody><tr>${opts[0]}${opts[1]}</tr><tr>${opts[2]}${opts[3]}</tr></tbody>`,\r\n          next_lns: 4,\r\n        };\r\n      }\r\n      if (lns == 4) {\r\n        return {\r\n          ctn: \"<tbody><tr>\" + opts.join(\"</tr><tr>\") + \"</tr></tbody>\",\r\n          next_lns: 1,\r\n        };\r\n      }\r\n    }\r\n  };\r\n  \r\n  const HandleEnFormat = () => {};\r\n  \r\n  const _LOG = console.log;\r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  //---------------tour\r\n  \r\n  // const _Tour__open=ref(false)\r\n  // const btn1=ref(null),btn2=ref(null),btn3=ref(null)\r\n  \r\n  // const _Tour_step=[{\r\n  //     title: '调节标题格式',\r\n  //     description: '如果这是一张【整卷】，那么你需要将标题改为居中格式。单击一次此按钮。',\r\n  \r\n  //     target: () => btn1.value && btn1.value.$el,\r\n  //   },{\r\n  //     title: '调节题号格式',\r\n  //     description: '如果这是一张【整卷】，那么你需要修改题号样式。单击一次此按钮。',\r\n  \r\n  //     target: () => btn2.value && btn2.value.$el,\r\n  //   },{\r\n  //     title: '下一部分',\r\n  //     description: '单击此按钮进入下一部分',\r\n  \r\n  //     target: () => btn3.value && btn3.value.$el,\r\n  //   }]\r\n  </script>\r\n  \r\n  <style>\r\n  @media print {\r\n    .noprint {\r\n      display: none;\r\n    }\r\n  }\r\n  \r\n  .labi-container {\r\n    display: block;\r\n    height: fit-content;\r\n    width: 100%;\r\n    position: absolute;\r\n    z-index: -1;\r\n  }\r\n  \r\n  .labi-block {\r\n    display: block;\r\n    width: 100%;\r\n    border-bottom-color: black;\r\n    border-bottom-width: 2px;\r\n    position: relative;\r\n    border-bottom-style: dotted;\r\n    text-align: right;\r\n    right: 30px;\r\n  }\r\n  \r\n  /* img { */\r\n  /* max-width: 350px; */\r\n  /* } */\r\n  \r\n  td {\r\n    padding: 0;\r\n  }\r\n  </style>\r\n  \r\n  \r\n  <!-- <style src=\"../../shared/zujuan-stupid-style-inject.css\" /> -->\r\n  <style>\r\n  wave {\r\n      text-decoration-style: wavy;\r\n      text-decoration-line: underline;\r\n      text-underline-position: auto;\r\n      /* white-space: pre-wrap; */\r\n  }\r\n  \r\n  dot{\r\n      position: relative;\r\n      text-emphasis-style: dot;\r\n      text-emphasis-position: under left;\r\n      text-emphasis-color: inherit;\r\n      box-sizing: border-box;\r\n      padding-top: .25rem\r\n  }\r\n  \r\n  u {\r\n      text-decoration: underline;\r\n      text-underline-position: under;\r\n      white-space: break-spaces\r\n  }\r\n  \r\n  span>em {\r\n      font-style: normal;\r\n      font-weight: bold;\r\n  }\r\n  </style>"],"names":["_hoisted_1","_sfc_render","_ctx","_cache","_createTextVNode","_createElementVNode","_hoisted_2","_toDisplayString","_hoisted_3","_openBlock","_createElementBlock","route","useRoute","router","useRouter","titleformat","ref","infoformat","titleformatCount","shown","grouptitle","GroupDataPassed","Tlist","Noptions_ret2","API","sss","v","qtypes","res","rej","i","chunk2array","mm","o","currentClicker","printhelper_columns","op2change"],"mappings":"s6BAKcA,EAAA,CAAA,MAAA,CAAA,YAAA,QAAA,cAAA,cAAA,OAAA,KAAA,CAAA,4CAJR,SAAAC,EAAAC,EAAAC,EAAA,qBAIEC,EAAA,oCAAA,EAAsEC,EAAA,OAAAC,EAAAC,EAAAL,EAAA,OAAA,KAAA,IAAA,EAAA,CAAA,8ECDnEF,EAAA,CAAA,MAAA,CAAA,aAAA,SAAA,cAAA,cAAA,OAAA,KAAA,CAAA,EACAM,EAAA,CAAA,MAAA,CAAA,YAAA,MAAA,CAAA,EAEKE,EAAA,CAAA,MAAA,CAAA,YAAA,OAAA,CAAA,4CANf,SAAAP,EAAAC,EAAAC,EAAA,CAGO,OAAAM,EAAA,EAAAC,EAAA,MAAAV,EAAA,CACAK,EAAA,IAAAC,EAAAC,EAAAL,EAAA,OAAA,KAAA,KAAA,EAAA,CAAA,WAEEE,EAAA,8BAAA,2ECHCJ,GAAA,CAAA,MAAA,CAAA,aAAA,SAAA,cAAA,KAAA,OAAA,KAAA,CAAA,kCAHX,SAAAC,GAAAC,EAAAC,EAAA,CAGQ,OAAAM,EAAA,EAAAC,EAAA,MAAAV,GAAA,sQC+ER,MAAAW,EAAAC,EAAA,EAOAC,EAAAC,EAAA,EAEAC,EAAAC,EAAA,CAAA,EAkBAC,EAAAD,EAAA,CAAA,EACAE,EAAA,EAKAC,EAAAH,EAAA,CACA,EAAA,GACA,EAAA,GACA,EAAA,EACA,CAAA,EAIAI,EAAAJ,EAAA,EAAA,EAEAK,EAAAL,EAAA,CACA,MAAA,GACA,KAAAL,EAAA,OAAA,EACA,CAAA,EAEAW,EAAAN,EAAA,CAAA,CAAA,EACAO,EAAAP,EAAA,EAAA,EACAQ,EAAA,IAAA,uCAAAb,EAAA,OAAA,EAAA,EAAA,KAAAc,GAAA,CACAA,EAAA,KAAA,MAAA,GAAA,UAAAC,GAAA,CACAJ,EAAA,MAAAI,CAAA,EAAAC,CACA,CAAA,EAEAN,EAAA,MAAA,MAAAD,EAAA,MAAAK,EAAA,MAIA,QAAA,IACAA,EAAA,KAAA,MAAA,GAAA,EAAA,IACAC,GACA,IAAA,QAAA,CAAAE,EAAAC,IAAA,CACAL,EAAA,IAAA,kDAAAE,CAAA,EAAA,KAAAI,GAAA,CACAR,EAAA,MAAAI,CAAA,EAAAI,CACA,CAAA,CACA,CAAA,CACA,CACA,EAAA,KAAA,IAAA,CAAA,CAAA,CAOA,CAAA,EAOA,MAAAC,EAAAC,GAAA,OAAA,QAAAA,CAAA,EAAA,IAAAC,GAAAA,EAAA,CAAA,CAAA,EAOAC,EAAAlB,EAAAU,GAAA,CAAA,CAAA,EAEAS,EAAAnB,EAAA,CAAA,EAEAoB,EAAA,IAAA,CACA,aAAA,QACA,yBACA,SAAA,eAAA,UAAA,EAAA,SACA,EACAvB,EAAA,KAAA,yBAAAF,EAAA,OAAA,EAAA,CACA,EAgDA,OAAAK,EAAA,cAAA"}