import{l as S,c as B,a as D,j as E,b as x,a0 as H,d as C}from"./light-cb8e5d18.js";import{t as I,N as A}from"./Tooltip-46e4aeaa.js";import{w as M,b2 as d,j as O,a3 as Z,N as g,Z as G}from"./index-6b27469d.js";const P=S({name:"Ellipsis",common:B,peers:{Tooltip:I}}),R=P,j=D("ellipsis",{overflow:"hidden"},[E("line-clamp",`
 white-space: nowrap;
 display: inline-block;
 vertical-align: bottom;
 max-width: 100%;
 `),x("line-clamp",`
 display: -webkit-inline-box;
 -webkit-box-orient: vertical;
 `),x("cursor-pointer",`
 cursor: pointer;
 `)]);function v(t){return`${t}-ellipsis--line-clamp`}function m(t,n){return`${t}-ellipsis--cursor-${n}`}const y=Object.assign(Object.assign({},C.props),{expandTrigger:String,lineClamp:[Number,String],tooltip:{type:[Boolean,Object],default:!0}}),_=M({name:"Ellipsis",inheritAttrs:!1,props:y,setup(t,{slots:n,attrs:r}){const s=H(),a=C("Ellipsis","-ellipsis",j,R,t,s),f=d(null),b=d(null),u=d(null),c=d(!1),h=O(()=>{const{lineClamp:e}=t,{value:i}=c;return e!==void 0?{textOverflow:"","-webkit-line-clamp":i?"":e}:{textOverflow:i?"":"ellipsis","-webkit-line-clamp":""}});function w(){let e=!1;const{value:i}=c;if(i)return!0;const{value:l}=f;if(l){const{lineClamp:o}=t;if(L(l),o!==void 0)e=l.scrollHeight<=l.offsetHeight;else{const{value:k}=b;k&&(e=k.getBoundingClientRect().width<=l.getBoundingClientRect().width)}N(l,e)}return e}const T=O(()=>t.expandTrigger==="click"?()=>{var e;const{value:i}=c;i&&((e=u.value)===null||e===void 0||e.setShow(!1)),c.value=!i}:void 0);Z(()=>{var e;t.tooltip&&((e=u.value)===null||e===void 0||e.setShow(!1))});const $=()=>g("span",Object.assign({},G(r,{class:[`${s.value}-ellipsis`,t.lineClamp!==void 0?v(s.value):void 0,t.expandTrigger==="click"?m(s.value,"pointer"):void 0],style:h.value}),{ref:"triggerRef",onClick:T.value,onMouseenter:t.expandTrigger==="click"?w:void 0}),t.lineClamp?n:g("span",{ref:"triggerInnerRef"},n));function L(e){if(!e)return;const i=h.value,l=v(s.value);t.lineClamp!==void 0?p(e,l,"add"):p(e,l,"remove");for(const o in i)e.style[o]!==i[o]&&(e.style[o]=i[o])}function N(e,i){const l=m(s.value,"pointer");t.expandTrigger==="click"&&!i?p(e,l,"add"):p(e,l,"remove")}function p(e,i,l){l==="add"?e.classList.contains(i)||e.classList.add(i):e.classList.contains(i)&&e.classList.remove(i)}return{mergedTheme:a,triggerRef:f,triggerInnerRef:b,tooltipRef:u,handleClick:T,renderTrigger:$,getTooltipDisabled:w}},render(){var t;const{tooltip:n,renderTrigger:r,$slots:s}=this;if(n){const{mergedTheme:a}=this;return g(A,Object.assign({ref:"tooltipRef",placement:"top"},n,{getDisabled:this.getTooltipDisabled,theme:a.peers.Tooltip,themeOverrides:a.peerOverrides.Tooltip}),{trigger:r,default:(t=s.tooltip)!==null&&t!==void 0?t:s.default})}else return r()}});export{_ as N,y as a,m as b,v as c,R as e,j as s};
