import{useRoute as F,useRouter as P}from"./vue-router-3740985a.js";import{a2 as S,aZ as T,a8 as _,l as b,m as y,t as o,aE as c,s,bd as k,b7 as i,F as q,ae as V,k as D}from"./runtime-core.esm-bundler-c066f4bf.js";import{a as d}from"./Button-68cb5d7d.js";import{N as h}from"./p-d7e0cfbf.js";import{N as E}from"./Divider-430ce100.js";import"./light-5802f424.js";import"./use-memo-b9add725.js";import"./FadeInExpandTransition-ff940b4d.js";import"./runtime-dom.esm-bundler-caa8590e.js";import"./light-111bcf27.js";const j={class:"hanged"},z={key:0,class:"noprint"},O={class:"labi-container"},U=y("div",{id:"coreop"},null,-1),re={__name:"preexport-2",setup(X){S(()=>{document.getElementById("coreop").innerHTML=localStorage.getItem("___thost___html_export")});const w=F(),L=P(),f=T(!0),a=T({imageonclick:"none",bkonclick:"none",bodyonclick:"none",blockonclick:"none"}),A=()=>{document.getElementById("coreop").style.wordBreak="break-all"};S(()=>{(()=>{const e=n=>{a.value.imageonclick=="imageresize"&&(n.target.dataset.width||(n.target.dataset.width=n.target.width),n.target.dataset.width=parseInt(n.target.dataset.width)-30,n.target.style.width=n.target.dataset.width+"px",n.target.width=n.target.dataset.width)},t=n=>{a.value.imageonclick=="imageresize"&&(n.preventDefault(),n.target.dataset.width||(n.target.dataset.width=n.target.width),n.target.dataset.width=parseInt(n.target.dataset.width)+8,n.target.style.width=n.target.dataset.width+"px",n.target.width=n.target.dataset.width)};document.getElementById("coreop").querySelectorAll("img").forEach(n=>{n.src.includes("/dksih/")&&(n.addEventListener("click",e),n.addEventListener("contextmenu",t))})})(),(()=>{const e=n=>{a.value.bkonclick=="extentblank"&&n.target.innerText.includes("_")&&(n.target.innerText=new Array(n.target.innerText.length+15).join("_"))},t=n=>{a.value.bkonclick=="extentblank"&&(n.preventDefault(),n.target.innerText.includes("_")&&(n.target.innerText=new Array(n.target.innerText.length-5).join("_")))};document.getElementById("coreop").querySelectorAll("bk").forEach(n=>{n.addEventListener("click",e),n.addEventListener("contextmenu",t)})})(),document.getElementById("coreop").addEventListener("mouseover",e=>{a.value.bodyonclick=="deletedom"&&e.target.classList.add("shadow")}),document.getElementById("coreop").addEventListener("mouseout",e=>{a.value.bodyonclick=="deletedom"&&e.target.classList.remove("shadow")}),document.getElementById("coreop").addEventListener("click",e=>{a.value.bodyonclick=="deletedom"&&e.target.parentNode.removeChild(e)}),(()=>{const e=n=>{a.value.imageonclick=="deleteNum"&&(console.log(n),n.target.parentElement.querySelector("p").style.display="none")},t=n=>{a.value.imageonclick=="deleteNum"&&(n.preventDefault(),n.target.querySelector("p").style.display="block")};document.getElementById("coreop").querySelectorAll(".__ccccimage").forEach(n=>{n.addEventListener("click",e),n.addEventListener("contextmenu",t)})})(),(()=>{let e=[];const t=l=>{if(a.value.imageonclick=="picreset")if(e.includes(l.target)){let u=e.map(p=>p.parentElement);const x=document.querySelector(".___core_block").clientWidth;let m=u[0],g=x-m.clientWidth;for(let p=1;p<u.length;p++){if(console.log(u[p],g,u[p].clientWidth),u[p].nextElementSibling?.tagName=="SPAN"&&u[p].nextElementSibling?.hasAttribute("qml-space-size")&&u[p].nextElementSibling.parentNode.removeChild(u[p].nextElementSibling),u[p].clientWidth>=g){m=u[p],g=x-m.clientWidth;continue}m.insertAdjacentElement("afterend",u[p]),m=u[p],g=g-u[p].clientWidth}e.forEach(p=>{p.classList.remove("shadow")}),e=[]}else e.push(l.target),l.target.classList.add("shadow")},r=l=>{a.value.imageonclick=="picreset"&&(l.preventDefault(),l.target.dataset.width||(l.target.dataset.width=l.target.width),l.target.dataset.width=parseInt(l.target.dataset.width)+8,l.target.style.width=l.target.dataset.width+"px",l.target.width=l.target.dataset.width)};document.getElementById("coreop").querySelectorAll("img").forEach(l=>{l.src.includes("/dksih/")&&(l.addEventListener("click",t),l.addEventListener("contextmenu",r))})})(),(()=>{const e=(n,l)=>{a.value.blockonclick=="blockextent"&&(console.log(n,l),l.querySelector(".extblank").dataset.height||(l.querySelector(".extblank").dataset.height=0),l.querySelector(".extblank").dataset.height=parseInt(l.querySelector(".extblank").dataset.height)+50,l.querySelector(".extblank").style.height=l.querySelector(".extblank").dataset.height+"px")},t=(n,l)=>{a.value.blockonclick=="blockextent"&&(n.preventDefault(),l.querySelector(".extblank").dataset.height||(l.querySelector(".extblank").dataset.height=0),l.querySelector(".extblank").dataset.height=parseInt(l.querySelector(".extblank").dataset.height)-10,l.querySelector(".extblank").style.height=l.querySelector(".extblank").dataset.height+"px")};document.getElementById("coreop").querySelectorAll(".___core_block").forEach(n=>{n.addEventListener("click",(l=>u=>{e(u,l)})(n)),n.addEventListener("contextmenu",(l=>u=>{t(u,l)})(n))})})()});const B=()=>{document.getElementById("coreop").querySelectorAll("p").forEach(e=>{e.style.fontFamily.includes("仿宋")||(e.style.fontFamily="Times New Roman , 宋体")}),document.getElementById("coreop").querySelectorAll("bk u").forEach(e=>{e.innerHTML=e.innerHTML.replace(/【小题(\d*)】/,"$1.______________"),e.outerHTML=e.outerHTML.replace("<u>","<span>").replace("</u>","</span>")})},M=()=>{document.getElementById("coreop").querySelectorAll("p").forEach(e=>{e.style.fontFamily.includes("仿宋")||(e.style.fontFamily="Times New Roman , 宋体")}),document.getElementById("coreop").querySelectorAll("span").forEach(e=>{e.innerHTML=e.innerHTML.replace(/【小题(\d*)】/,"$1.")}),document.getElementById("coreop").querySelectorAll("bk").forEach(e=>{e.innerHTML="<u>&nbsp;&nbsp;&nbsp;"+e.attributes.index.nodeValue+"&nbsp;&nbsp;&nbsp;</u>"})},v=()=>{document.getElementById("coreop").querySelectorAll("span").forEach(e=>{e.innerHTML=e.innerHTML.replace(/【小题(\d*)】/,"$1.")})},I=()=>{document.querySelectorAll(".___core_block").forEach(e=>{e.attributes.data_type.nodeValue=="阅读理解"&&(console.log("hdn yd",e),e.innerHTML=e.innerHTML.replaceAll(/【小题(\d*)】/g,"$1.")),e.attributes.data_type.nodeValue=="七选五"&&(e.querySelectorAll("bk u").forEach(t=>{t.innerHTML=t.innerHTML.replace(/【小题(\d*)】/,"$1.______________"),t.outerHTML=t.outerHTML.replace("<u>","<span>").replace("</u>","</span>")}),e.querySelectorAll("table[name=optionsTable]").forEach(t=>{t.outerHTML=t.innerText.split(`
`).join("<br/>")+"<br/>"})),e.attributes.data_type.nodeValue=="完形填空"&&(e.querySelectorAll("span").forEach(t=>{t.innerHTML=t.innerHTML.replace(/【小题(\d*)】/,"$1.")}),e.querySelectorAll("bk").forEach(t=>{t.innerHTML="<u>&nbsp;&nbsp;&nbsp;"+t.attributes.index.nodeValue+"&nbsp;&nbsp;&nbsp;</u>"}),e.querySelectorAll("table[name=optionsTable]").forEach(t=>{t.style.width="calc(100% - "+t.previousElementSibling.offsetWidth+"px)",t.previousElementSibling.style.display="inline-block",t.parentElement.style.display="block",t.style.display="inline-table",t.style.verticalAlign="middle"})),(e.attributes.data_type.nodeValue="用单词的适当形式完成短文")&&e.querySelectorAll("bk u").forEach(t=>{t.innerHTML=t.innerHTML.replace(/【小题(\d*)】/,"$1.__________________"),t.outerHTML=t.outerHTML.replace("<u>","<span>").replace("</u>","</span>")}),document.getElementById("coreop").querySelectorAll("p").forEach(t=>{t.style.fontFamily.includes("仿宋")||(t.style.fontFamily="Times New Roman , 宋体")})})},H=()=>{localStorage.setItem("___thost___html_export",document.getElementById("corehtml").outerHTML),L.push("/export/"+w.params.id)},C=()=>{document.getElementById("coreop").querySelectorAll("table[name=optionsTable]").forEach(e=>{e.style.width="calc(100% - "+e.previousElementSibling.offsetWidth+"px)",e.previousElementSibling.style.display="inline-block",e.parentElement.style.display="block",e.style.display="inline-table",e.style.verticalAlign="middle"})},N=()=>{document.querySelectorAll("bk").forEach(e=>{e.innerText.includes("_")&&e.innerText.length<15&&(e.innerText=new Array(16).join("_"))})},$=()=>{const e=[];if(document.querySelectorAll(".__ccccimage").forEach(l=>{e.push(l)}),e.length==0)return;const t=document.querySelector(".___core_block").clientWidth;let r=e[0],n=t-r.clientWidth;for(let l=1;l<e.length;l++){if(console.log(e[l],n,e[l].clientWidth),e[l].clientWidth>=n){r=e[l],n=t-r.clientWidth;continue}r.insertAdjacentElement("afterend",e[l]),r=e[l],n=n-e[l].clientWidth}document.querySelectorAll("span[qml-space-size='2']").forEach(l=>{(l.previousElementSibling?.tagName=="BR"||l.nextElementSibling?.tagName=="BR")&&(l.style.display="none",l.previousElementSibling?.tagName=="BR"&&(l.previousElementSibling.style.display="none"),l.nextElementSibling?.tagName=="BR"&&(l.nextElementSibling.style.display="none"))})},R=()=>{function e(t,r){if(r==1)return"<tbody><tr>"+t.join("")+"</tr></tbody>";if(r==2)return`<tbody><tr>${t[0]}${t[1]}</tr><tr>${t[2]}${t[3]}</tr></tbody>`;if(r==4)return"<tbody><tr>"+t.join("</tr><tr>")+"</tr></tbody>"}document.getElementById("coreop").querySelectorAll("table[name=optionsTable]").forEach(t=>{let r=[],n=0;t.querySelectorAll("td").forEach(l=>{n=Math.max(n,l.querySelector("span").clientWidth),r.push(l.outerHTML)}),console.log(n),n>=t.clientWidth/2||(n>=t.clientWidth/4?(t.innerHTML=e(r,2),console.log(2)):(t.innerHTML=e(r,1),console.log(4)))})},W=()=>{document.getElementById("coreop").querySelectorAll("br").forEach(e=>{e.nextSibling?.tagName=="BR"&&(e.nextSibling.style.display="none")}),document.getElementById("coreop").querySelectorAll("br").forEach(e=>{e.style.display=="none"&&e.parentNode.removeChild(e)})};return(e,t)=>(_(),b(q,null,[y("div",j,[o(i(h),null,{default:c(()=>[s("图片处理 Current Function:"+k(a.value.imageonclick)+" ",1),o(i(d),{text:"",onClick:t[0]||(t[0]=r=>a.value.imageonclick="none")},{default:c(()=>[s("Reset")]),_:1})]),_:1}),o(i(d),{class:"noprint",type:"success",onClick:t[1]||(t[1]=r=>a.value.imageonclick="imageresize")},{default:c(()=>[s("图片大小")]),_:1}),o(i(d),{class:"noprint",type:"success",onClick:t[2]||(t[2]=r=>a.value.imageonclick="deleteNum")},{default:c(()=>[s("删除图片下方的题号")]),_:1}),o(i(d),{class:"noprint",onClick:t[3]||(t[3]=r=>$())},{default:c(()=>[s("Picture Reset")]),_:1}),o(i(d),{class:"noprint",type:"success",onClick:t[4]||(t[4]=r=>a.value.imageonclick="picreset")},{default:c(()=>[s("Selected Picture Reset dbclick to do")]),_:1}),o(i(E)),o(i(h),null,{default:c(()=>[s("试题块处理 Current Function:"+k(a.value.blockonclick)+" ",1),o(i(d),{text:"",onClick:t[5]||(t[5]=r=>a.value.blockonclick="none")},{default:c(()=>[s("Reset")]),_:1})]),_:1}),o(i(d),{class:"noprint",type:"success",onClick:t[6]||(t[6]=r=>{a.value.blockonclick="blockextent"})},{default:c(()=>[s("提供空行")]),_:1}),o(i(E)),o(i(h),null,{default:c(()=>[s("全文处理")]),_:1}),o(i(d),{class:"noprint",type:"success",onClick:t[7]||(t[7]=r=>W())},{default:c(()=>[s("删除多余换行")]),_:1}),o(i(d),{class:"noprint",onClick:t[8]||(t[8]=r=>{a.value.bodyonclick="deletedom",a.value.imageonclick="none",a.value.bkonclick="none"})},{default:c(()=>[s("删除选中DOM")]),_:1}),o(i(d),{class:"noprint",onClick:B},{default:c(()=>[s("Blank retheme X._______")]),_:1}),o(i(d),{class:"noprint",onClick:M},{default:c(()=>[s("Blank retheme 完型")]),_:1}),o(i(d),{class:"noprint",onClick:v},{default:c(()=>[s("调节'【小题x】'类展出")]),_:1}),o(i(d),{class:"noprint",type:"success",onClick:I},{default:c(()=>[s("OtherFormatter EN")]),_:1}),o(i(d),{class:"noprint",onClick:N},{default:c(()=>[s("Extendblank")]),_:1}),o(i(d),{class:"noprint",type:"success",onClick:t[9]||(t[9]=r=>a.value.bkonclick="extentblank")},{default:c(()=>[s("Extendblankwhenclick")]),_:1}),o(i(d),{class:"noprint",onClick:C},{default:c(()=>[s("Destroy table")]),_:1}),o(i(d),{class:"noprint",type:"success",onClick:t[10]||(t[10]=r=>R())},{default:c(()=>[s("Optable Reset")]),_:1}),o(i(d),{class:"noprint",type:"success",onClick:t[11]||(t[11]=r=>A())},{default:c(()=>[s("WordWrap")]),_:1}),o(i(E)),o(i(d),{class:"noprint",type:"success",onClick:t[12]||(t[12]=r=>H())},{default:c(()=>[s("导出页")]),_:1}),o(i(d),{class:"noprint",onClick:t[13]||(t[13]=r=>f.value=!f.value)},{default:c(()=>[s("Toggle sPP")]),_:1})]),f.value?(_(),b("div",z,[y("div",O,[(_(),b(q,null,V([1,2,3,4,5,6,7],r=>y("div",{class:"labi-block",key:r,style:{height:"1005px"}},"Page # "+k(r),1)),64))])])):D("",!0),U],64))}};export{re as default};
