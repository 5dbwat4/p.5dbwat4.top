import{v as F,J as b,O as te,aZ as w,i as H,a2 as oe,az as re,b3 as $,aa as le,X as W,a8 as h,j as _,aE as o,m as ne,b7 as t,t as n,s as a,k,bd as q,ag as ie,l as U}from"./runtime-core.esm-bundler-c066f4bf.js";import{i as ae,N as se}from"./APIHelper-5dc80534.js";import{N as O}from"./Card-bfcad74c.js";import{N as A}from"./p-8a064552.js";import{N as L}from"./text-0562d865.js";import{N as D}from"./Divider-32ec1336.js";import{N as ce}from"./InputGroup-62ef3a3b.js";import{N as de}from"./Input-af324e3e.js";import{N as ue,a as z}from"./Button-d0cd9be2.js";import{N as R}from"./Alert-e8d24712.js";import{T as fe}from"./runtime-dom.esm-bundler-caa8590e.js";import{u as me}from"./use-locale-1c262ea4.js";import{c as ge,a as he,b as pe,d as M,e as ve,f as _e,u as be,g as G,h as ye,w as J}from"./light-d6058c0b.js";import{f as we}from"./fade-in-scale-up.cssr-e8989780.js";import{s as Ne,N as xe}from"./Scrollbar-24cda971.js";import{c as Ie,u as Te,N as ke}from"./Code-1a74873b.js";import{t as Ae}from"./throttle-9680347f.js";import{N as Ce}from"./Spin-0f34e434.js";import{N as Pe}from"./Switch-cfc97c15.js";import{N as Se}from"./Modal-0facbb13.js";import"./format-length-c9d165c6.js";import"./Icon-d321f943.js";import"./Warning-3558c7da.js";import"./Close-ebf3a9fb.js";import"./use-memo-b9add725.js";import"./FadeInExpandTransition-ff940b4d.js";import"./light-d7d7fe15.js";import"./use-compitable-42538ef7.js";import"./use-merged-state-89f8109f.js";import"./light-261e8307.js";import"./Suffix-586fb6ff.js";import"./fade-in-height-expand.cssr-cab9cc16.js";import"./index-975a2d8f.js";import"./flatten-a133123b.js";import"./use-false-until-truthy-a506b738.js";import"./utils-d7fa52af.js";import"./index-cbfaa337.js";const Le=e=>{const{textColor2:l,modalColor:i,borderColor:r,fontSize:d,primaryColor:u}=e;return{loaderFontSize:d,loaderTextColor:l,loaderColor:i,loaderBorder:`1px solid ${r}`,loadingColor:u}},Re=ge({name:"Log",common:he,peers:{Scrollbar:Ne,Code:Ie},self:Le}),He=Re,ze=F({name:"LogLoader",props:{clsPrefix:{type:String,required:!0}},setup(){return{locale:me("Log").localeRef}},render(){const{clsPrefix:e}=this;return b("div",{class:`${e}-log-loader`},b(ue,{clsPrefix:e,strokeWidth:24,scale:.85}),b("span",{class:`${e}-log-loader__content`},this.locale.loading))}}),X=pe("n-log"),je=F({props:{line:{type:String,default:""}},setup(e){const{trimRef:l,highlightRef:i,languageRef:r,mergedHljsRef:d}=te(X),u=w(null),N=H(()=>l.value?e.line.trim():e.line);function f(){u.value&&(u.value.innerHTML=m(r.value,N.value))}function m(g,y){const{value:P}=d;return P&&g&&P.getLanguage(g)?P.highlight(y,{language:g}).value:y}return oe(()=>{i.value&&f()}),re($(e,"line"),()=>{i.value&&f()}),{highlight:i,selfRef:u,maybeTrimmedLines:N}},render(){const{highlight:e,maybeTrimmedLines:l}=this;return b("pre",{ref:"selfRef"},e?null:l)}}),Be=M("log",`
 position: relative;
 box-sizing: border-box;
 transition: border-color .3s var(--n-bezier);
`,[ve("pre",`
 white-space: pre-wrap;
 word-break: break-word;
 margin: 0;
 `),M("log-loader",`
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 box-sizing: border-box;
 position: absolute;
 right: 16px;
 top: 8px;
 height: 34px;
 border-radius: 17px;
 line-height: 34px;
 white-space: nowrap;
 overflow: hidden;
 border: var(--n-loader-border);
 color: var(--n-loader-text-color);
 background-color: var(--n-loader-color);
 font-size: var(--n-loader-font-size);
 `,[we(),_e("content",`
 display: inline-block;
 vertical-align: bottom;
 line-height: 34px;
 padding-left: 40px;
 padding-right: 20px;
 white-space: nowrap;
 `),M("base-loading",`
 color: var(--n-loading-color);
 position: absolute;
 left: 12px;
 top: calc(50% - 10px);
 font-size: 20px;
 width: 20px;
 height: 20px;
 display: inline-block;
 `)])]),Ee=Object.assign(Object.assign({},G.props),{loading:Boolean,trim:Boolean,log:String,fontSize:{type:Number,default:14},lines:{type:Array,default:()=>[]},lineHeight:{type:Number,default:1.25},language:String,rows:{type:Number,default:15},offsetTop:{type:Number,default:0},offsetBottom:{type:Number,default:0},hljs:Object,onReachTop:Function,onReachBottom:Function,onRequireMore:Function}),Y=F({name:"Log",props:Ee,setup(e){const{mergedClsPrefixRef:l,inlineThemeDisabled:i}=be(e),r=w(!1),d=H(()=>e.language!==void 0),u=H(()=>`calc(${Math.round(e.rows*e.lineHeight*e.fontSize)}px)`),N=H(()=>{const{log:s}=e;return s?s.split(`
`):e.lines}),f=w(null),m=G("Log","-log",Be,He,e,l);function g(s){const c=s.target,x=c.firstElementChild;if(r.value){W(()=>{r.value=!1});return}const I=c.offsetHeight,p=c.scrollTop,S=x.offsetHeight,B=p,E=S-p-I;if(B<=e.offsetTop){const{onReachTop:T,onRequireMore:v}=e;v&&v("top"),T&&T()}if(E<=e.offsetBottom){const{onReachBottom:T,onRequireMore:v}=e;v&&v("bottom"),T&&T()}}const y=Ae(P,300);function P(s){if(r.value){W(()=>{r.value=!1});return}if(f.value){const{containerRef:c,contentRef:x}=f.value;if(c&&x){const I=c.offsetHeight,p=c.scrollTop,S=x.offsetHeight,B=p,E=S-p-I,T=s.deltaY;if(B===0&&T<0){const{onRequireMore:v}=e;v&&v("top")}if(E<=0&&T>0){const{onRequireMore:v}=e;v&&v("bottom")}}}}function j(s){const{value:c}=f;if(!c)return;const{slient:x,top:I,position:p}=s;x&&(r.value=!0),I!==void 0?c.scrollTo({left:0,top:I}):(p==="bottom"||p==="top")&&c.scrollTo({position:p})}function Z(s=!1){J("log","`scrollToTop` is deprecated, please use `scrollTo({ position: 'top'})` instead."),j({position:"top",slient:s})}function Q(s=!1){J("log","`scrollToTop` is deprecated, please use `scrollTo({ position: 'bottom'})` instead."),j({position:"bottom",slient:s})}le(X,{languageRef:$(e,"language"),mergedHljsRef:Te(e),trimRef:$(e,"trim"),highlightRef:d});const ee={scrollTo:j},V=H(()=>{const{self:{loaderFontSize:s,loaderTextColor:c,loaderColor:x,loaderBorder:I,loadingColor:p},common:{cubicBezierEaseInOut:S}}=m.value;return{"--n-bezier":S,"--n-loader-font-size":s,"--n-loader-border":I,"--n-loader-color":x,"--n-loader-text-color":c,"--n-loading-color":p}}),C=i?ye("log",void 0,V,e):void 0;return Object.assign(Object.assign({},ee),{mergedClsPrefix:l,scrollbarRef:f,mergedTheme:m,styleHeight:u,mergedLines:N,scrollToTop:Z,scrollToBottom:Q,handleWheel:y,handleScroll:g,cssVars:i?void 0:V,themeClass:C?.themeClass,onRender:C?.onRender})},render(){const{mergedClsPrefix:e,mergedTheme:l,onRender:i}=this;return i?.(),b("div",{class:[`${e}-log`,this.themeClass],style:[{lineHeight:this.lineHeight,height:this.styleHeight},this.cssVars],onWheelPassive:this.handleWheel},[b(xe,{ref:"scrollbarRef",theme:l.peers.Scrollbar,themeOverrides:l.peerOverrides.Scrollbar,onScroll:this.handleScroll},{default:()=>b(ke,{internalNoHighlight:!0,internalFontSize:this.fontSize,theme:l.peers.Code,themeOverrides:l.peerOverrides.Code},{default:()=>this.mergedLines.map((r,d)=>b(je,{key:d,line:r}))})}),b(fe,{name:"fade-in-scale-up-transition"},{default:()=>this.loading?b(ze,{clsPrefix:e}):null})])}});var Oe=(e,l)=>{window.EventList=window.EventList||{},window.EventList[e]=l},Me=(e,l=[])=>(window.EventList=window.EventList||{},window.EventList[e](...l));const K="_5dbwat4_proj_thost_r3_be",$e={__name:"APIReminder",setup(e){const l=w("waiting"),i=w("https://example.com"),r=w("n"),d=()=>{r.value="checking",fetch(i.value+"/api/whoareyou").then(m=>m.json()).then(m=>{m.entity==K?(r.value="success",f.value.enterImmediatelyAfterCheckingAPI&&N()):(r.value="error",u.value=`Not Match.==>
`+JSON.stringify(m,null,4))}).catch(m=>{r.value="error",u.value=`Error Fetching.==>
`+m})},u=w("nothing"),N=()=>{localStorage.setItem("__5dbwat_proj__thost_apihost",i.value),console.log("xxx"),localStorage.setItem("__5dbwat_proj__thost_preference",JSON.stringify(f.value)),Me("entryAllowStateUpdate",[!0])};localStorage.getItem("__5dbwat_proj__thost_apihost")?(i.value=localStorage.getItem("__5dbwat_proj__thost_apihost"),l.value="checking",d()):l.value="unspecified";const f=w(JSON.parse(localStorage.getItem("__5dbwat_proj__thost_preference")||'{"enterImmediatelyAfterCheckingAPI":false}'));return ae(),(m,g)=>(h(),_(t(Se),{show:!0},{default:o(()=>[ne("div",null,[l.value=="unspecified"?(h(),_(t(O),{key:0,style:{width:"600px"},title:"你可能需要指定一个API地址",bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{footer:o(()=>[]),default:o(()=>[n(t(A),null,{default:o(()=>[a("你需要配合一个后端API才能正常的使用thost的相关功能。这就要求你指定一个API地址。")]),_:1}),n(t(A),null,{default:o(()=>[a("本版本的thost所需的API为："),n(t(L),{code:""},{default:o(()=>[a("_5dbwat4_proj_thost_r3_be")]),_:1}),a(" 版本为 "),n(t(L),{code:""},{default:o(()=>[a("r3")]),_:1})]),_:1}),n(t(D)),n(t(ce),null,{default:o(()=>[n(t(de),{value:i.value,"onUpdate:value":g[0]||(g[0]=y=>i.value=y)},null,8,["value"]),n(t(z),{type:"primary",loading:r.value=="checking",onClick:d},{default:o(()=>[a(" 检查API状态 ")]),_:1},8,["loading"])]),_:1}),r.value=="success"?(h(),_(t(R),{key:0,title:"API地址验证成功",type:"success"},{default:o(()=>[n(t(A),null,{default:o(()=>[a("API验证成功。开始使用thost吧！")]),_:1}),n(t(z),{type:"primary",onClick:N,disabled:r.value!="success"},{default:o(()=>[a("确定 ")]),_:1},8,["disabled"])]),_:1})):k("",!0),r.value=="error"?(h(),_(t(R),{key:1,title:"API地址验证失败",type:"error"},{default:o(()=>[a(" API验证失败。以下是相关信息: "),n(t(Y),{log:u.value,rows:5},null,8,["log"])]),_:1})):k("",!0)]),_:1})):k("",!0),l.value=="checking"?(h(),_(t(O),{key:1,style:{width:"600px"},title:"我们需要确认你指定的API地址是可用的",bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{footer:o(()=>[]),default:o(()=>[n(t(A),null,{default:o(()=>[a("你需要配合一个后端API才能正常的使用thost的相关功能。你之前可能已经指定过一个。我们需要确认你指定的API地址是可用的。")]),_:1}),n(t(A),null,{default:o(()=>[a("本版本的thost所需的API为："),n(t(L),{code:""},{default:o(()=>[a(q(K))]),_:1}),a(" 版本为 "),n(t(L),{code:""},{default:o(()=>[a("r3")]),_:1})]),_:1}),n(t(A),null,{default:o(()=>[a("您指定的API地址是"),n(t(L),{code:""},{default:o(()=>[a(q(i.value),1)]),_:1}),n(t(z),{type:"text",onClick:g[1]||(g[1]=y=>(l.value="unspecified",r.value="nothing"))},{default:o(()=>[a("(更换API地址)")]),_:1})]),_:1}),n(t(D)),n(t(Ce),{show:r.value=="checking"},{default:o(()=>[r.value=="checking"?(h(),_(t(R),{key:0,title:"正在等待响应",type:"info"})):k("",!0)]),_:1},8,["show"]),r.value=="success"?(h(),_(t(R),{key:0,title:"API地址验证成功",type:"success"},{default:o(()=>[n(t(A),null,{default:o(()=>[a("API验证成功。开始使用thost吧！")]),_:1}),n(t(z),{type:"primary",onClick:N,disabled:r.value!="success"},{default:o(()=>[a("确定 ")]),_:1},8,["disabled"]),n(t(A),null,{default:o(()=>[a("以后加载完成后总是自动进入主页面 "),n(t(Pe),{value:f.value.enterImmediatelyAfterCheckingAPI,"onUpdate:value":g[2]||(g[2]=y=>f.value.enterImmediatelyAfterCheckingAPI=y)},null,8,["value"])]),_:1})]),_:1})):k("",!0),r.value=="error"?(h(),_(t(R),{key:1,title:"API地址验证失败",type:"error"},{default:o(()=>[a(" API验证失败。以下是相关信息: "),n(t(Y),{log:u.value,rows:5},null,8,["log"])]),_:1})):k("",!0)]),_:1})):k("",!0),l.value=="waiting"?(h(),_(t(O),{key:2,style:{width:"600px"},title:"Waiting",bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{default:o(()=>[a(" 正在运行逻辑，请稍等。 ")]),_:1})):k("",!0)])]),_:1}))}},Fe={key:0},Ve={key:1},kt={__name:"main",setup(e){const l=w(!1);return Oe("entryAllowStateUpdate",(i,r)=>{console.log(i,r),l.value=i}),(i,r)=>{const d=ie("router-view");return h(),_(t(se),null,{default:o(()=>[t(l)?(h(),U("div",Fe,[n(d)])):(h(),U("div",Ve,[n($e)]))]),_:1})}}};export{kt as default};
