import{useRoute as A,useRouter as D}from"./vue-router-3740985a.js";import{q as B}from"./define_basic_qtypes-ddf25d69.js";import{A as l}from"./APIHelper-c9b99a18.js";import"./sweetalert.min-9dab74b7.js";import{aZ as i,a8 as n,l as u,t as p,aE as c,s as o,b7 as s,m as r,bd as d,F as x,ae as G,j as U,k as g}from"./runtime-core.esm-bundler-c066f4bf.js";import{N as j}from"./Checkbox-45e1205f.js";import{N as E,a as V}from"./Image-171fe8dd.js";import{N as $}from"./Spin-ff5dfbad.js";import{a as v}from"./Button-68cb5d7d.js";import"./light-5802f424.js";import"./format-length-c9d165c6.js";import"./Icon-fde79c06.js";import"./Warning-459cf3e9.js";import"./Close-10bb4ae3.js";import"./Scrollbar-068db0c3.js";import"./runtime-dom.esm-bundler-caa8590e.js";import"./_commonjsHelpers-725317a4.js";import"./use-merged-state-89f8109f.js";import"./FadeInExpandTransition-ff940b4d.js";import"./use-memo-b9add725.js";import"./fade-in-scale-up.cssr-e615339f.js";import"./flatten-a133123b.js";import"./use-false-until-truthy-a506b738.js";import"./Tooltip-bcde8d3a.js";import"./Popover-df9fe6bd.js";import"./get-aeafa5fe.js";import"./utils-d7fa52af.js";import"./use-compitable-42538ef7.js";import"./next-frame-once-7035a838.js";import"./use-locale-5324fa07.js";import"./index-975a2d8f.js";const z={style:{width:"18.76cm","line-height":"normal"},id:"oonom"},F=r("div",{class:"noprint"},null,-1),P={id:"corehtml",style:{width:"18.76cm",columns:2,"line-height":"normal"}},S={style:{"font-size":"9.5pt","font-family":"Cambria , fangsong",margin:"0px"}},T={style:{"font-size":"9.5pt",margin:"0px","font-family":"Cambria , 仿宋"}},K={style:{"font-family":"'courier new'"}},L={style:{"font-family":"'courier new'"}},W={key:0},X={key:1,style:{margin:"0 0"}},Z=r("div",null,null,-1),Re={__name:"export.a",setup(H){const N=A();D(),i({q:!0,a:!1,p:!1}),i(!1);const k=i(""),_=i({});l.post("/api/group/get",{id:N.params.id}).then(t=>{t.entry.split(",").forEach(a=>{_.value[a]=B}),t.entry.split(","),k.value=t.title,Promise.all(t.entry.split(",").map(a=>new Promise((e,y)=>{l.get("/api/qapi/get/"+a).then(O=>{_.value[a]=O}),R(a)}))).then(()=>{})});const w=i({}),q=t=>Object.entries(t).map(a=>a[1]),R=async t=>{w.value[t]=await l.get("/api/qapi/doneinfo/getbyquuid/"+t)},m=i(!1),h=i({}),I=t=>{console.log(t),m.value=t,m.value&&Object.entries(_.value).forEach(a=>{console.log(a),l.get("/api/xkw-helper/get_more_detail/325/"+a[1].bankid+"/"+a[1].qid).then(e=>{h.value[a[1].id]={a:l.host+"/api/xkw-helper/route-pic?purl="+btoa(e.data.answerImg.replace("@2","@3").replace("c2","c1")),p:l.host+"/api/xkw-helper/route-pic?purl="+btoa(e.data.parseImg.replace("@2","@3").replace("c2","c1"))}})})},f=i({}),C=i({}),b=(t,a)=>{l.post("/ocr-service",{url:h.value[t.id].a,psm:a,lang:"eng+chi_sim"}).then(e=>{f.value[t.id]=e.result})};return(t,a)=>(n(),u(x,null,[p(s(j),{class:"noprint",checked:m.value,"onUpdate:checked":[a[0]||(a[0]=e=>m.value=e),I]},{default:c(()=>[o(" 直接从组卷网获取答案解析数据而非从oss缓存 ")]),_:1},8,["checked"]),r("div",z,[F,o(),p(s(V),null,{default:c(()=>[r("div",P,[r("p",S,"Generated by thost | Group UUID: "+d(t.$route.params.id)+" | Title: "+d(k.value),1),(n(!0),u(x,null,G(q(_.value),e=>(n(),u("div",{key:e.id},[r("p",T,[o("UUID:"),r("span",K,d(e.id),1),o(" | qid:"),r("span",L,d(e.qid),1)]),m.value?(n(),u("div",W,[C.value[e.id]?g("",!0):(n(),U(s(E),{key:0,lazy:"",src:(h.value[e.id]||{a:""}).a},{placeholder:c(()=>[p(s($))]),_:2},1032,["src"])),p(s(v),{onClick:y=>b(e,8),class:"noprint"},{default:c(()=>[o("OCR chars")]),_:2},1032,["onClick"]),o(),p(s(v),{onClick:y=>b(e,3),class:"noprint"},{default:c(()=>[o("OCR block")]),_:2},1032,["onClick"]),f.value[e.id]?(n(),u("p",X,d(f.value[e.id]),1)):g("",!0),p(s(v),{onClick:y=>C.value[e.id]=!0,class:"noprint"},{default:c(()=>[o("Accept OCR Result")]),_:2},1032,["onClick"]),Z])):g("",!0)]))),128))])]),_:1})])],64))}};export{Re as default};
