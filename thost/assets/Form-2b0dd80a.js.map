{"version":3,"file":"Form-2b0dd80a.js","sources":["../../node_modules/.pnpm/naive-ui@2.38.1_vue@3.4.25/node_modules/naive-ui/es/form/src/styles/form.cssr.mjs","../../node_modules/.pnpm/naive-ui@2.38.1_vue@3.4.25/node_modules/naive-ui/es/form/src/Form.mjs"],"sourcesContent":["import { c, cB, cM } from \"../../../_utils/cssr/index.mjs\";\nexport default cB('form', [cM('inline', `\n width: 100%;\n display: inline-flex;\n align-items: flex-start;\n align-content: space-around;\n `, [cB('form-item', {\n  width: 'auto',\n  marginRight: '18px'\n}, [c('&:last-child', {\n  marginRight: 0\n})])])]);","var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport { h, defineComponent, provide, ref } from 'vue';\nimport { useConfig, useTheme } from \"../../_mixins/index.mjs\";\nimport { formLight } from \"../styles/index.mjs\";\nimport style from \"./styles/form.cssr.mjs\";\nimport { keysOf } from \"../../_utils/index.mjs\";\nimport { formInjectionKey, formItemInstsInjectionKey } from \"./context.mjs\";\nexport const formProps = Object.assign(Object.assign({}, useTheme.props), {\n  inline: Boolean,\n  labelWidth: [Number, String],\n  labelAlign: String,\n  labelPlacement: {\n    type: String,\n    default: 'top'\n  },\n  model: {\n    type: Object,\n    default: () => {}\n  },\n  rules: Object,\n  disabled: Boolean,\n  size: String,\n  showRequireMark: {\n    type: Boolean,\n    default: undefined\n  },\n  requireMarkPlacement: String,\n  showFeedback: {\n    type: Boolean,\n    default: true\n  },\n  onSubmit: {\n    type: Function,\n    default: e => {\n      e.preventDefault();\n    }\n  },\n  showLabel: {\n    type: Boolean,\n    default: undefined\n  },\n  validateMessages: Object\n});\nexport default defineComponent({\n  name: 'Form',\n  props: formProps,\n  setup(props) {\n    const {\n      mergedClsPrefixRef\n    } = useConfig(props);\n    useTheme('Form', '-form', style, formLight, props, mergedClsPrefixRef);\n    // from path to form-item\n    const formItems = {};\n    // for label-width = 'auto'\n    const maxChildLabelWidthRef = ref(undefined);\n    const deriveMaxChildLabelWidth = currentWidth => {\n      const currentMaxChildLabelWidth = maxChildLabelWidthRef.value;\n      if (currentMaxChildLabelWidth === undefined || currentWidth >= currentMaxChildLabelWidth) {\n        maxChildLabelWidthRef.value = currentWidth;\n      }\n    };\n    function validate(validateCallback, shouldRuleBeApplied = () => true) {\n      return __awaiter(this, void 0, void 0, function* () {\n        return yield new Promise((resolve, reject) => {\n          const formItemValidationPromises = [];\n          for (const key of keysOf(formItems)) {\n            const formItemInstances = formItems[key];\n            for (const formItemInstance of formItemInstances) {\n              if (formItemInstance.path) {\n                formItemValidationPromises.push(formItemInstance.internalValidate(null, shouldRuleBeApplied));\n              }\n            }\n          }\n          void Promise.all(formItemValidationPromises).then(results => {\n            const formInvalid = results.some(result => !result.valid);\n            const errors = [];\n            const warnings = [];\n            results.forEach(result => {\n              var _a, _b;\n              if ((_a = result.errors) === null || _a === void 0 ? void 0 : _a.length) {\n                errors.push(result.errors);\n              }\n              if ((_b = result.warnings) === null || _b === void 0 ? void 0 : _b.length) {\n                warnings.push(result.warnings);\n              }\n            });\n            if (validateCallback) {\n              validateCallback(errors.length ? errors : undefined, {\n                warnings: warnings.length ? warnings : undefined\n              });\n            }\n            if (formInvalid) {\n              reject(errors.length ? errors : undefined);\n            } else {\n              resolve({\n                warnings: warnings.length ? warnings : undefined\n              });\n            }\n          });\n        });\n      });\n    }\n    function restoreValidation() {\n      for (const key of keysOf(formItems)) {\n        const formItemInstances = formItems[key];\n        for (const formItemInstance of formItemInstances) {\n          formItemInstance.restoreValidation();\n        }\n      }\n    }\n    provide(formInjectionKey, {\n      props,\n      maxChildLabelWidthRef,\n      deriveMaxChildLabelWidth\n    });\n    provide(formItemInstsInjectionKey, {\n      formItems\n    });\n    const formExposedMethod = {\n      validate,\n      restoreValidation\n    };\n    return Object.assign(formExposedMethod, {\n      mergedClsPrefix: mergedClsPrefixRef\n    });\n  },\n  render() {\n    const {\n      mergedClsPrefix\n    } = this;\n    return h(\"form\", {\n      class: [`${mergedClsPrefix}-form`, this.inline && `${mergedClsPrefix}-form--inline`],\n      onSubmit: this.onSubmit\n    }, this.$slots);\n  }\n});"],"names":["style","cB","cM","c","__awaiter","this","thisArg","_arguments","P","generator","adopt","value","resolve","reject","fulfilled","step","e","rejected","result","formProps","useTheme","NForm","defineComponent","props","mergedClsPrefixRef","useConfig","formLight","formItems","maxChildLabelWidthRef","ref","deriveMaxChildLabelWidth","currentWidth","currentMaxChildLabelWidth","validate","validateCallback","shouldRuleBeApplied","formItemValidationPromises","key","keysOf","formItemInstances","formItemInstance","results","formInvalid","errors","warnings","_a","_b","restoreValidation","provide","formInjectionKey","formItemInstsInjectionKey","mergedClsPrefix","h"],"mappings":"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","x_google_ignoreList":[0,1]}