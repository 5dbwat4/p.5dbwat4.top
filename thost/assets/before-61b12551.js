import{u as r,A as a}from"./APIHelper-e0fd8d04.js";import{useRouter as _,useRoute as u}from"./vue-router-3740985a.js";import{_ as p}from"./_plugin-vue_export-helper-c27b6911.js";import{a8 as d,l,ab as h,a9 as m,m as n}from"./runtime-core.esm-bundler-c066f4bf.js";import"./light-185f79ed.js";import"./format-length-c9d165c6.js";import"./Icon-13ca7aa7.js";import"./Warning-9f568e6f.js";import"./Close-869cd549.js";import"./Scrollbar-431c7fad.js";import"./runtime-dom.esm-bundler-caa8590e.js";const c=t=>(h("data-v-151da73c"),t=t(),m(),t),f={class:"loader-container"},g=c(()=>n("div",{class:"loader"},null,-1)),I=c(()=>n("p",{class:"loader-info"},"正在鉴权",-1)),v=[g,I],S={__name:"before",setup(t){const i=r(),o=_();return u(),a.get("/zujuan-ink-be-core/auth/status").then(s=>{if(s.auth)o.push("./home");else if(localStorage.getItem("__thost_zujuanink_auth")){const e=JSON.parse(localStorage.getItem("__thost_zujuanink_auth"));e.autologin?a.post("/zujuan-ink-be-core/auth/json/login",{password:e.authcode}).then(b=>{i.success({content:"已连接至API并成功鉴权。",duration:2e3}),o.push("./home")}):o.push("./settings")}else o.push("./settings")}),(s,e)=>(d(),l("div",f,v))}},E=p(S,[["__scopeId","data-v-151da73c"]]);export{E as default};
