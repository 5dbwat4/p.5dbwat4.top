{"version":3,"file":"manualadd-5d4aa0f0.js","sources":["../../src/views/zujuanink-v3/views/list/manualadd.vue"],"sourcesContent":["<template>\r\n<n-card title=\"手动添加错题\" v-if=\"step==1\">\r\n    <n-p>将使用来自试题篮的数据</n-p>\r\n    <n-cascader\r\n      v-model:value=\"bankid\"\r\n      :options=\"subjectsmap\"\r\n      check-strategy=\"child\"\r\n      :show-path=\"true\"\r\n    />\r\n    <n-button @click=\"confirmI\">CONFIRM</n-button>\r\n</n-card>\r\n\r\n<n-card title=\"确认错题数据\" v-if=\"step==2\">\r\n    <n-button @click=\"step=0\">&gt; BACK</n-button>\r\n    <div v-for=\"ii in TLd\" class=\"centered\"> \r\n    <n-card hoverable>\r\n<question-block :qcontent=\"ii\"/>\r\n</n-card>\r\n</div>\r\n    <n-button @click=\"confirmII\">CONFIRM</n-button>\r\n</n-card>\r\n</template>\r\n<script setup>\r\nimport { NCard,NCascader,NP,NButton } from 'naive-ui';\r\nimport subjectsmap from \"../../basicinfo/subjects.json\"\r\nimport { ZujuanAPI } from '../../utils/zujuan-api';\r\nimport {ref} from \"vue\"\r\nimport { API } from \"../../../../shared/APIHelper\";\r\nimport { router_push } from '../../utils/router-goto';\r\nimport questionBlock from \"../../questionBlock/zjw.vue\"\r\nimport { useRouter,useRoute } from \"vue-router\";\r\nimport { polishingupTlist } from '../preparing-room/polishinguptlist';\r\nimport swal from 'sweetalert';\r\nimport blankPic from \"../../utils/blankpic\"\r\nconst router=useRouter(),route=useRoute()\r\nconst bankid=ref(15)\r\nconst step=ref(1)\r\nconst TLd=ref([])\r\n\r\nif(route.query.bankid){\r\n    bankid.value=parseInt(route.query.bankid)\r\n}\r\n\r\nconst confirmI=async()=>{\r\n    ZujuanAPI(\"/app-server/v1/basket/\"+bankid.value).then(async(v)=>{\r\n        let TL=[]\r\n        v.data.structure.forEach(r=>{\r\n            TL.push(...r.list)\r\n        })\r\n\r\n        TL=await polishingupTlist(bankid.value,TL)\r\n        step.value=2\r\n        TLd.value=TL\r\n//         await API.post(\"/zujuan-ink-be-core/donerec/add\",{\r\n// quid         :     TL[i].quid,\r\n// date         :   (new Date()).toDateString()  ,\r\n// timestamp    :    (new Date()).getTime() ,\r\n// image        :   `data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\"><foreignObject width=\"300\" height=\"50\"><body xmlns=\"http://www.w3.org/1999/xhtml\"><p>以手动添加错题的方式被收录</p></body></foreignObject></svg>` ,\r\n// parent       :  \"unsaved\"  ,\r\n//     })\r\n\r\n    })\r\n}\r\n\r\nconst confirmII=async()=>{\r\n    for (let i = 0; i < TLd.value.length; i++) {\r\n        await API.post(\"/zujuan-ink-be-core/donerec/add\",{\r\nquid         :     TLd.value[i].quid,\r\ndate         :   (new Date()).toDateString()  ,\r\ntimestamp    :    (new Date()).getTime() ,\r\nimage        :    blankPic,\r\nparent       :  \"unsaved\"  ,\r\n    })\r\n    }\r\n    swal({\r\n        icon:\"success\",\r\n        title:\"OK\"\r\n    })\r\n            \r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.centered{\r\n    width: 90%;\r\n    margin: auto auto;\r\n}\r\n</style>"],"names":["useRouter","route","useRoute","bankid","ref","step","TLd","confirmI","ZujuanAPI","v","TL","r","polishingupTlist","confirmII","i","API","blankPic","swal"],"mappings":"qiEAkCAA,EAAA,EAAA,MAAAC,EAAAC,EAAA,EACAC,EAAAC,EAAA,EAAA,EACAC,EAAAD,EAAA,CAAA,EACAE,EAAAF,EAAA,EAAA,EAEAH,EAAA,MAAA,SACAE,EAAA,MAAA,SAAAF,EAAA,MAAA,MAAA,GAGA,MAAAM,EAAA,SAAA,CACAC,EAAA,yBAAAL,EAAA,KAAA,EAAA,KAAA,MAAAM,GAAA,CACA,IAAAC,EAAA,CAAA,EACAD,EAAA,KAAA,UAAA,QAAAE,GAAA,CACAD,EAAA,KAAA,GAAAC,EAAA,IAAA,CACA,CAAA,EAEAD,EAAA,MAAAE,EAAAT,EAAA,MAAAO,CAAA,EACAL,EAAA,MAAA,EACAC,EAAA,MAAAI,CASA,CAAA,CACA,EAEAG,EAAA,SAAA,CACA,QAAAC,EAAA,EAAAA,EAAAR,EAAA,MAAA,OAAAQ,IACA,MAAAC,EAAA,KAAA,kCAAA,CACA,KAAAT,EAAA,MAAAQ,CAAA,EAAA,KACA,KAAA,IAAA,KAAA,EAAA,aAAA,EACA,UAAA,IAAA,KAAA,EAAA,QAAA,EACA,MAAAE,EACA,OAAA,SACA,CAAA,EAEAC,EAAA,CACA,KAAA,UACA,MAAA,IACA,CAAA,CAEA"}