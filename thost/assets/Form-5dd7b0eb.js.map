{"version":3,"file":"Form-5dd7b0eb.js","sources":["../../node_modules/naive-ui/es/form/src/styles/form.cssr.js","../../node_modules/naive-ui/es/form/src/Form.js"],"sourcesContent":["import { c, cB, cM } from '../../../_utils/cssr';\nexport default cB('form', [cM('inline', `\n width: 100%;\n display: inline-flex;\n align-items: flex-start;\n align-content: space-around;\n `, [cB('form-item', {\n  width: 'auto',\n  marginRight: '18px'\n}, [c('&:last-child', {\n  marginRight: 0\n})])])]);","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { h, defineComponent, provide, ref } from 'vue';\nimport { useConfig, useTheme } from '../../_mixins';\nimport { formLight } from '../styles';\nimport style from './styles/form.cssr';\nimport { keysOf } from '../../_utils';\nimport { formInjectionKey, formItemInstsInjectionKey } from './context';\nexport const formProps = Object.assign(Object.assign({}, useTheme.props), { inline: Boolean, labelWidth: [Number, String], labelAlign: String, labelPlacement: {\n        type: String,\n        default: 'top'\n    }, model: {\n        type: Object,\n        default: () => { }\n    }, rules: Object, disabled: Boolean, size: String, showRequireMark: {\n        type: Boolean,\n        default: undefined\n    }, requireMarkPlacement: String, showFeedback: {\n        type: Boolean,\n        default: true\n    }, onSubmit: {\n        type: Function,\n        default: (e) => { e.preventDefault(); }\n    }, showLabel: {\n        type: Boolean,\n        default: undefined\n    }, validateMessages: Object });\nexport default defineComponent({\n    name: 'Form',\n    props: formProps,\n    setup(props) {\n        const { mergedClsPrefixRef } = useConfig(props);\n        useTheme('Form', '-form', style, formLight, props, mergedClsPrefixRef);\n        // from path to form-item\n        const formItems = {};\n        // for label-width = 'auto'\n        const maxChildLabelWidthRef = ref(undefined);\n        const deriveMaxChildLabelWidth = (currentWidth) => {\n            const currentMaxChildLabelWidth = maxChildLabelWidthRef.value;\n            if (currentMaxChildLabelWidth === undefined ||\n                currentWidth >= currentMaxChildLabelWidth) {\n                maxChildLabelWidthRef.value = currentWidth;\n            }\n        };\n        function validate(validateCallback, shouldRuleBeApplied = () => true) {\n            return __awaiter(this, void 0, void 0, function* () {\n                yield new Promise((resolve, reject) => {\n                    const formItemValidationPromises = [];\n                    for (const key of keysOf(formItems)) {\n                        const formItemInstances = formItems[key];\n                        for (const formItemInstance of formItemInstances) {\n                            if (formItemInstance.path) {\n                                formItemValidationPromises.push(formItemInstance.internalValidate(null, shouldRuleBeApplied));\n                            }\n                        }\n                    }\n                    void Promise.all(formItemValidationPromises).then((results) => {\n                        if (results.some((result) => !result.valid)) {\n                            const errors = results\n                                .filter((result) => result.errors)\n                                .map((result) => result.errors);\n                            if (validateCallback) {\n                                validateCallback(errors);\n                            }\n                            reject(errors);\n                        }\n                        else {\n                            if (validateCallback)\n                                validateCallback();\n                            resolve();\n                        }\n                    });\n                });\n            });\n        }\n        function restoreValidation() {\n            for (const key of keysOf(formItems)) {\n                const formItemInstances = formItems[key];\n                for (const formItemInstance of formItemInstances) {\n                    formItemInstance.restoreValidation();\n                }\n            }\n        }\n        provide(formInjectionKey, {\n            props,\n            maxChildLabelWidthRef,\n            deriveMaxChildLabelWidth\n        });\n        provide(formItemInstsInjectionKey, { formItems });\n        const formExposedMethod = {\n            validate,\n            restoreValidation\n        };\n        return Object.assign(formExposedMethod, {\n            mergedClsPrefix: mergedClsPrefixRef\n        });\n    },\n    render() {\n        const { mergedClsPrefix } = this;\n        return (h(\"form\", { class: [\n                `${mergedClsPrefix}-form`,\n                this.inline && `${mergedClsPrefix}-form--inline`\n            ], onSubmit: this.onSubmit }, this.$slots));\n    }\n});\n"],"names":["style","cB","cM","c","__awaiter","this","thisArg","_arguments","P","generator","adopt","value","resolve","reject","fulfilled","step","e","rejected","result","formProps","useTheme","NForm","defineComponent","props","mergedClsPrefixRef","useConfig","formLight","formItems","maxChildLabelWidthRef","ref","deriveMaxChildLabelWidth","currentWidth","currentMaxChildLabelWidth","validate","validateCallback","shouldRuleBeApplied","formItemValidationPromises","key","keysOf","formItemInstances","formItemInstance","results","errors","restoreValidation","provide","formInjectionKey","formItemInstsInjectionKey","mergedClsPrefix","h"],"mappings":"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","x_google_ignoreList":[0,1]}