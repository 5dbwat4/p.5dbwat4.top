import D from"./subjects-8683e557.js";import{Z as j}from"./zujuan-api-f429916a.js";import{A as y}from"./APIHelper-c6c5541a.js";import"./router-goto-2503de32.js";import{C as I}from"./zjw-8fbbdcb1.js";import{useRouter as R,useRoute as F}from"./vue-router-ee92e3b2.js";import{p as O}from"./polishinguptlist-31ae212d.js";import{s as T}from"./sweetalert.min-b990379b.js";import{b as U}from"./blankpic-ca06291d.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";import{N as A}from"./Rate-5cc16828.js";import{aZ as n,a8 as h,l as E,j as g,aE as o,b7 as t,k as q,F as K,t as e,s as u,bd as Z,m as B}from"./index-c2ed52a5.js";import{N as C}from"./p-87ab3748.js";import{N as M}from"./Cascader-e2e09c75.js";import{N as d}from"./Button-591cb8c7.js";import{N as _}from"./Card-bc241d1a.js";import{N as b}from"./Input-b50999c9.js";import{N as f}from"./FormItem-c12520d5.js";import"./light-3c431b54.js";import"./format-length-c9d165c6.js";import"./Icon-9d083982.js";import"./Warning-fc401418.js";import"./Close-4e65a8ab.js";import"./Scrollbar-5b7370f2.js";import"./runtime-dom.esm-bundler-51aad541.js";import"./keysOf-5d5107c5.js";import"./CONFIG-d506a2d4.js";import"./nomorlize_q-tailored-672252d5.js";import"./Divider-3c6a8fe5.js";import"./Ellipsis-96e2d292.js";import"./Tooltip-121d8b6c.js";import"./Popover-4ea150e0.js";import"./index-80752888.js";import"./flatten-30e3eebb.js";import"./use-false-until-truthy-96bf4c79.js";import"./get-8a3b42fc.js";import"./use-memo-13475312.js";import"./cssr-b950d06d.js";import"./utils-20c36e7e.js";import"./use-is-mounted-912be460.js";import"./use-merged-state-5c1c3246.js";import"./use-compitable-c3112252.js";import"./next-frame-once-7035a838.js";import"./Space-0b2fef7a.js";import"./get-slot-1efb97e5.js";import"./_commonjsHelpers-de833af9.js";import"./Loading-b36f50c8.js";import"./light-951fcd76.js";import"./utils-ae16cb7a.js";import"./fade-in-scale-up.cssr-6d358681.js";import"./create-2c70b56a.js";import"./ChevronRight-473b2df6.js";import"./use-locale-ca0d0990.js";import"./index-975a2d8f.js";import"./Suffix-26bafbe6.js";import"./Tag-9a87d369.js";import"./Checkbox-7001ae57.js";import"./index-cbfaa337.js";import"./FadeInExpandTransition-3bfdffc9.js";import"./light-951b0264.js";import"./use-collection-e298bf2f.js";const S={style:{display:"flex","justify-content":"flex-end"}},L={__name:"manualadd",setup(V){R();const k=F(),m=n(15),v=n(1),p=n([]),s=n(0);k.query.bankid&&(m.value=parseInt(k.query.bankid));const w=async()=>{j("/app-server/v1/basket/"+m.value).then(async r=>{let a=[];r.data.structure.forEach(l=>{a.push(...l.list)}),a=await O(m.value,a),v.value=2,p.value=a,s.value=-1,c()})},N=async()=>{for(let r=0;r<p.value.length;r++)await y.post("/zujuan-ink-be-core/donerec/add",{quid:p.value[r].quid,date:new Date().toDateString(),timestamp:new Date().getTime(),image:U,parent:"unsaved"});T({icon:"success",title:"OK"})},i=n({quid:"",insights:"",note:"",rate:0,timestamp:0,times:0,lastfinishdate:0,mastarate:0,bankid:0}),x=r=>{y.post("/zujuan-ink-be-core/ftc/push_to_collection",i.value).then(a=>{c()})},c=()=>{s.value++,i.value={quid:p.value[s.value].quid,insights:"",note:"",rate:0,timestamp:new Date().getTime(),times:1,lastfinishdate:new Date().getTime(),mastarate:0,bankid:m.value}};return(r,a)=>(h(),E(K,null,[v.value==1?(h(),g(t(_),{key:0,title:"\u624B\u52A8\u6DFB\u52A0\u9519\u9898"},{default:o(()=>[e(t(C),null,{default:o(()=>[u("\u5C06\u4F7F\u7528\u6765\u81EA\u8BD5\u9898\u7BEE\u7684\u6570\u636E")]),_:1}),e(t(M),{value:m.value,"onUpdate:value":a[0]||(a[0]=l=>m.value=l),options:t(D),"check-strategy":"child","show-path":!0},null,8,["value","options"]),e(t(d),{onClick:w},{default:o(()=>[u("CONFIRM")]),_:1})]),_:1})):q("",!0),v.value==2?(h(),g(t(_),{key:1,title:"\u8865\u5145\u6570\u636E\uFF0C\u6DFB\u52A0\u9519\u9898("+(s.value+1)+"/"+p.value.length+")"},{default:o(()=>[e(t(d),{onClick:a[1]||(a[1]=l=>v.value=0)},{default:o(()=>[u("> BACK")]),_:1}),e(t(f),{label:"quid"},{default:o(()=>[e(t(b),{disabled:"",value:i.value.quid},null,8,["value"])]),_:1}),e(t(f),{label:"\u4F60\u7684\u611F\u60F3"},{default:o(()=>[e(t(b),{type:"textarea",value:i.value.insights,"onUpdate:value":a[2]||(a[2]=l=>i.value.insights=l),placeholder:"\u5BF9\u8FD9\u9053\u9898\u76EE\u7684\u60F3\u6CD5\uFF0C\u6536\u83B7\u7684\u77E5\u8BC6\u70B9\uFF0C\u7B49\u7B49"},null,8,["value"])]),_:1}),e(t(f),{label:"\u6CE8\u91CA"},{default:o(()=>[e(t(b),{type:"textarea",value:i.value.note,"onUpdate:value":a[3]||(a[3]=l=>i.value.note=l),placeholder:"\u663E\u793A\u5728\u9898\u76EE\u524D\u7684\u4FE1\u606F e.g. \u9519\u9898\u7684\u5C0F\u9898\u53F7"},null,8,["value"])]),_:1}),e(t(f),{label:"\u8BC4\u7EA7"},{default:o(()=>[e(t(A),{"allow-half":"",count:10,"on-update:value":l=>{i.value.rate=l*10}},null,8,["on-update:value"]),e(t(C),null,{default:o(()=>[u(Z(i.value.rate),1)]),_:1})]),_:1}),B("div",S,[e(t(d),{round:"",type:"primary",onClick:x},{default:o(()=>[u(" \u6536\u5F55\u5E76\u524D\u5F80\u4E0B\u4E00\u4E2A ")]),_:1}),e(t(d),{round:"",onClick:c},{default:o(()=>[u(" \u4E0B\u4E00\u4E2A ")]),_:1})]),e(t(_),{hoverable:""},{default:o(()=>[e(I,{qcontent:p.value[s.value]},null,8,["qcontent"])]),_:1}),e(t(d),{onClick:N},{default:o(()=>[u("CONFIRM")]),_:1})]),_:1},8,["title"])):q("",!0)],64))}},P=z(L,[["__scopeId","data-v-e7896168"]]);export{P as default};
