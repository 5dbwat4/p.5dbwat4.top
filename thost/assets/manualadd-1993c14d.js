import D from"./subjects-8683e557.js";import{Z as I}from"./zujuan-api-6553a0fa.js";import{A as y}from"./APIHelper-89899791.js";import"./router-goto-0b03734e.js";import{C as R}from"./zjw-1bb8dc5b.js";import{useRouter as j,useRoute as F}from"./vue-router-85f8dd9e.js";import{p as O}from"./polishinguptlist-d7ae60d0.js";import{s as T}from"./sweetalert.min-b990379b.js";import{b as U}from"./blankpic-ca06291d.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";import{N as A}from"./Rate-17b9e61f.js";import{b2 as n,ab as h,m as K,k as g,aH as o,bc as t,l as q,F as B,u as e,t as u,bi as E,n as M}from"./index-6b27469d.js";import{N as C}from"./p-d63b6958.js";import{N as S}from"./Cascader-3dd91518.js";import{N as d}from"./Button-a421b774.js";import{N as _}from"./Card-b4e38b92.js";import{N as b}from"./Input-c49f615f.js";import{N as f}from"./FormItem-b835bccb.js";import"./light-cb8e5d18.js";import"./format-length-c9d165c6.js";import"./Icon-0741e3aa.js";import"./Warning-ad995842.js";import"./Close-df27b242.js";import"./Scrollbar-6ef5ad24.js";import"./runtime-dom.esm-bundler-4f377a37.js";import"./keysOf-5d5107c5.js";import"./CONFIG-d506a2d4.js";import"./nomorlize_q-tailored-672252d5.js";import"./Divider-7d564df1.js";import"./Ellipsis-b74cfcb8.js";import"./Tooltip-46e4aeaa.js";import"./Popover-d5735fab.js";import"./index-cabd39fd.js";import"./flatten-0afec71b.js";import"./use-false-until-truthy-35c1fbae.js";import"./get-9cb40f85.js";import"./use-memo-7138c88c.js";import"./cssr-752b8ed7.js";import"./utils-eca1999b.js";import"./use-is-mounted-e356ec1d.js";import"./use-merged-state-236ae148.js";import"./use-compitable-182c3d4e.js";import"./next-frame-once-7035a838.js";import"./Space-5a87e743.js";import"./get-slot-1efb97e5.js";import"./_commonjsHelpers-de833af9.js";import"./Loading-a27cceda.js";import"./light-5c2f581c.js";import"./utils-1657c4d7.js";import"./fade-in-scale-up.cssr-59f6c429.js";import"./create-59670860.js";import"./ChevronRight-f0e435af.js";import"./use-locale-13d55c5c.js";import"./index-975a2d8f.js";import"./Suffix-8898b6d6.js";import"./Tag-156be23d.js";import"./Checkbox-d6d0f1db.js";import"./index-cbfaa337.js";import"./FadeInExpandTransition-65435983.js";import"./light-5edeff63.js";import"./use-collection-37ba12f3.js";const Z={style:{display:"flex","justify-content":"flex-end"}},H={__name:"manualadd",setup(P){j();const k=F(),m=n(15),v=n(1),p=n([]),s=n(0);k.query.bankid&&(m.value=parseInt(k.query.bankid));const N=async()=>{I("/app-server/v1/basket/"+m.value).then(async r=>{let a=[];r.data.structure.forEach(l=>{a.push(...l.list)}),a=await O(m.value,a),v.value=2,p.value=a,s.value=-1,c()})},w=async()=>{for(let r=0;r<p.value.length;r++)await y.post("/zujuan-ink-be-core/donerec/add",{quid:p.value[r].quid,date:new Date().toDateString(),timestamp:new Date().getTime(),image:U,parent:"unsaved"});T({icon:"success",title:"OK"})},i=n({quid:"",insights:"",note:"",rate:0,timestamp:0,times:0,lastfinishdate:0,mastarate:0,bankid:0}),x=r=>{y.post("/zujuan-ink-be-core/ftc/push_to_collection",i.value).then(a=>{c()})},c=()=>{s.value++,i.value={quid:p.value[s.value].quid,insights:"",note:"",rate:0,timestamp:new Date().getTime(),times:1,lastfinishdate:new Date().getTime(),mastarate:0,bankid:m.value}};return(r,a)=>(h(),K(B,null,[v.value==1?(h(),g(t(_),{key:0,title:"\u624B\u52A8\u6DFB\u52A0\u9519\u9898"},{default:o(()=>[e(t(C),null,{default:o(()=>[u("\u5C06\u4F7F\u7528\u6765\u81EA\u8BD5\u9898\u7BEE\u7684\u6570\u636E")]),_:1}),e(t(S),{value:m.value,"onUpdate:value":a[0]||(a[0]=l=>m.value=l),options:t(D),"check-strategy":"child","show-path":!0},null,8,["value","options"]),e(t(d),{onClick:N},{default:o(()=>[u("CONFIRM")]),_:1})]),_:1})):q("",!0),v.value==2?(h(),g(t(_),{key:1,title:"\u8865\u5145\u6570\u636E\uFF0C\u6DFB\u52A0\u9519\u9898("+(s.value+1)+"/"+p.value.length+")"},{default:o(()=>[e(t(d),{onClick:a[1]||(a[1]=l=>v.value=0)},{default:o(()=>[u("> BACK")]),_:1}),e(t(f),{label:"quid"},{default:o(()=>[e(t(b),{disabled:"",value:i.value.quid},null,8,["value"])]),_:1}),e(t(f),{label:"\u4F60\u7684\u611F\u60F3"},{default:o(()=>[e(t(b),{type:"textarea",value:i.value.insights,"onUpdate:value":a[2]||(a[2]=l=>i.value.insights=l),placeholder:"\u5BF9\u8FD9\u9053\u9898\u76EE\u7684\u60F3\u6CD5\uFF0C\u6536\u83B7\u7684\u77E5\u8BC6\u70B9\uFF0C\u7B49\u7B49"},null,8,["value"])]),_:1}),e(t(f),{label:"\u6CE8\u91CA"},{default:o(()=>[e(t(b),{type:"textarea",value:i.value.note,"onUpdate:value":a[3]||(a[3]=l=>i.value.note=l),placeholder:"\u663E\u793A\u5728\u9898\u76EE\u524D\u7684\u4FE1\u606F e.g. \u9519\u9898\u7684\u5C0F\u9898\u53F7"},null,8,["value"])]),_:1}),e(t(f),{label:"\u8BC4\u7EA7"},{default:o(()=>[e(t(A),{"allow-half":"",count:10,"on-update:value":l=>{i.value.rate=l*10}},null,8,["on-update:value"]),e(t(C),null,{default:o(()=>[u(E(i.value.rate),1)]),_:1})]),_:1}),M("div",Z,[e(t(d),{round:"",type:"primary",onClick:x},{default:o(()=>[u(" \u6536\u5F55\u5E76\u524D\u5F80\u4E0B\u4E00\u4E2A ")]),_:1}),e(t(d),{round:"",onClick:c},{default:o(()=>[u(" \u4E0B\u4E00\u4E2A ")]),_:1})]),e(t(_),{hoverable:""},{default:o(()=>[e(R,{qcontent:p.value[s.value]},null,8,["qcontent"])]),_:1}),e(t(d),{onClick:w},{default:o(()=>[u("CONFIRM")]),_:1})]),_:1},8,["title"])):q("",!0)],64))}},L=z(H,[["__scopeId","data-v-e7896168"]]);export{L as default};
