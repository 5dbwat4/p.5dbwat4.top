{"version":3,"file":"incorr-coll-4f34d9af.js","sources":["../../src/views/zujuanink-v3/views/list/incorr-coll.vue"],"sourcesContent":["<template>\r\n\r\n    <n-input-group>\r\n      <n-button @click=\"enterFaRETMode\" :disabled=\"FailedColl.length==0\">错题抽查</n-button>\r\n      <n-input-group-label>筛选学科</n-input-group-label>\r\n      <n-cascader\r\n      v-model:value=\"bankid\"\r\n      :options=\"subjectsmap\"\r\n      check-strategy=\"child\"\r\n      :show-path=\"true\"\r\n      @update:value=\"refreshFiCList\"\r\n    />\r\n    <n-input-group-label>共有{{ FailedColl.length }}道错题</n-input-group-label>\r\n    <n-dropdown :options=\"options\">\r\n      <n-button>\r\n      <template #icon>\r\n        <n-icon :component=\"EllipsisVerticalOutline\"></n-icon>\r\n      </template>\r\n    </n-button>\r\n  </n-dropdown>\r\n\r\n    </n-input-group>\r\n<div v-for=\"ii in FailedColl\" class=\"centered\" v-if=\"FailedColl.length>0\"> \r\n    <n-card hoverable>\r\n<question-block :qcontent=\"ii\"/>\r\n<template #action>\r\n      <n-button  type=\"primary\" dashed size=\"small\"  round @click=\"SeeRecord(ii.id)\">查看答题记录</n-button>\r\n      <n-button  type=\"warning\" dashed size=\"small\"  round @click=\"RemoveFromColl(ii.id)\">移除出错题本</n-button>\r\n    </template>\r\n</n-card>\r\n</div>\r\n<div v-else>\r\n  <n-empty description=\"找不到。\">\r\n    <template #extra>\r\n      <n-p>原因可能是：</n-p>\r\n      <n-li>你一道题都没做过（还不快去<n-button text @click=\"$router.push('/zujuanink/preparing-room/all')\">做题</n-button>？？？）</n-li>\r\n      <n-li>你解决了所有错题（祝贺你！所以还不快去<n-button text @click=\"$router.push('/zujuanink/preparing-room/all')\">做更多题</n-button>？？？）</n-li>\r\n    </template>\r\n  </n-empty>\r\n</div>\r\n\r\n\r\n<n-modal v-model:show=\"showRecords\">\r\n    <n-card\r\n      style=\"width: 600px\"\r\n      title=\"答题记录\"\r\n      :bordered=\"false\"\r\n      size=\"huge\"\r\n      role=\"dialog\"\r\n      aria-modal=\"true\"\r\n    >\r\n\r\n\r\n    <n-spin v-if=\"loadingRecords\"/>\r\n\r\n\r\n<div  v-if=\"!loadingRecords\">\r\n      <n-image-group show-toolbar-tooltip>\r\n    <n-space>\r\n        <div v-for=\" ra in recInfo\">\r\n      <n-image\r\n        width=\"100\"\r\n        :src=\"ra.image\"\r\n      />\r\n    </div>\r\n    </n-space>\r\n  </n-image-group>\r\n</div>\r\n\r\n\r\n    </n-card>\r\n  </n-modal>\r\n\r\n\r\n\r\n\r\n</template>\r\n<script setup>\r\nimport { ref, onMounted ,h} from \"vue\";\r\nimport { API } from \"../../../../shared/APIHelper\";\r\n\r\nimport questionBlock from \"../../questionBlock/ild.vue\"\r\nimport { NCard,NButton,NModal,NSpin,NImage,NImageGroup,NSpace,\r\nNInput,NInputGroup,NInputGroupLabel,NCascader,NDropdown,\r\nNEmpty,NP,NLi,NIcon } from \"naive-ui\";\r\nimport subjectsmap from \"../../basicinfo/subjects.json\"\r\nimport {EllipsisVerticalOutline,AddCircleOutline,ExitOutline}from \"@vicons/ionicons5\"\r\n\r\nimport { useRouter,useRoute } from \"vue-router\";\r\nimport { router_push } from \"../../utils/router-goto\";\r\nconst router=useRouter(),route=useRoute()\r\n\r\nconst FailedColl=ref([])\r\n\r\nconst renderIcon = (icon) => {\r\n  return () => {\r\n    return h(NIcon, null, {\r\n      default: () => h(icon)\r\n    });\r\n  };\r\n};\r\n\r\nconst options=[\r\n        {\r\n          label: \"手动添加错题\",\r\n          key: \"manualAdd\",\r\n          icon: renderIcon(AddCircleOutline),\r\n          props: {\r\n            onClick: () => {\r\n              router_push(router,\"/list/incorr-coll/manualadd?bankid=\"+bankid.value)\r\n              \r\n            }\r\n          }\r\n        },        {\r\n          label: \"导出错题\",\r\n          key: \"export\",\r\n          icon: renderIcon(ExitOutline),\r\n          props: {\r\n            onClick: () => {\r\n              window.TList=FailedColl.value\r\n    window.TList.forEach((v,i)=>window.TList[i].quid=window.TList[i].id)\r\n    window.bankid=bankid.value\r\n              router_push(router,\"/export/f\")\r\n            }\r\n          }\r\n        }\r\n      ]\r\n\r\n\r\nconst bankid=ref(12)\r\n\r\n// API.get(\"/zujuan-ink-be-core/data/list/failedcoll\").then(v=>{\r\n//     FailedColl.value=v\r\n// })\r\n\r\nconst refreshFiCList=()=>{\r\n  API.get(\"/zujuan-ink-be-core/data/list/failedcoll/filter/\"+bankid.value).then(v=>{\r\n    FailedColl.value=v\r\n})\r\n}\r\n\r\nrefreshFiCList()\r\n\r\n\r\n\r\nconst showRecords=ref(false),recInfo=ref([]),loadingRecords=ref(true)\r\nconst SeeRecord=(id)=>{\r\n    showRecords.value=true\r\n    API.get(\"/zujuan-ink-be-core/donerec/filter/quuid/all/\"+id).then(v=>{\r\n        recInfo.value=v\r\n        loadingRecords.value=false\r\n    })\r\n}\r\n\r\n\r\nconst enterFaRETMode=()=>{\r\n    window.TList=FailedColl.value\r\n    window.TList.forEach((v,i)=>window.TList[i].quid=window.TList[i].id)\r\n    window.bankid=bankid.value\r\n    window.qcomponent=\"ild\"\r\n    router.push(\"/zujuanink/room\")\r\n}\r\n\r\n\r\nconst RemoveFromColl=(id)=>{\r\n  API.get(\"/zujuan-ink-be-core/data/removeFailedColl/\"+id).then(v=>{\r\n    })\r\n}\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.centered{\r\n    width: 90%;\r\n    margin: auto auto;\r\n}\r\n</style>"],"names":["router","useRouter","useRoute","FailedColl","ref","renderIcon","icon","h","NIcon","options","AddCircleOutline","router_push","bankid","ExitOutline","v","i","refreshFiCList","API","showRecords","recInfo","loadingRecords","SeeRecord","id","enterFaRETMode","RemoveFromColl"],"mappings":"uhFA0FA,MAAAA,EAAAC,EAAA,EAAAC,EAAA,EAEA,MAAAC,EAAAC,EAAA,EAAA,EAEAC,EAAAC,GACA,IACAC,EAAAC,EAAA,KAAA,CACA,QAAA,IAAAD,EAAAD,CAAA,CACA,CAAA,EAIAG,EAAA,CACA,CACA,MAAA,SACA,IAAA,YACA,KAAAJ,EAAAK,CAAA,EACA,MAAA,CACA,QAAA,IAAA,CACAC,EAAAX,EAAA,sCAAAY,EAAA,KAAA,CAEA,CACA,CACA,EAAA,CACA,MAAA,OACA,IAAA,SACA,KAAAP,EAAAQ,CAAA,EACA,MAAA,CACA,QAAA,IAAA,CACA,OAAA,MAAAV,EAAA,MACA,OAAA,MAAA,QAAA,CAAAW,EAAAC,IAAA,OAAA,MAAAA,CAAA,EAAA,KAAA,OAAA,MAAAA,CAAA,EAAA,EAAA,EACA,OAAA,OAAAH,EAAA,MACAD,EAAAX,EAAA,WAAA,CACA,CACA,CACA,CACA,EAGAY,EAAAR,EAAA,EAAA,EAMAY,EAAA,IAAA,CACAC,EAAA,IAAA,mDAAAL,EAAA,KAAA,EAAA,KAAAE,GAAA,CACAX,EAAA,MAAAW,CACA,CAAA,CACA,EAEAE,EAAA,EAIA,MAAAE,EAAAd,EAAA,EAAA,EAAAe,EAAAf,EAAA,CAAA,CAAA,EAAAgB,EAAAhB,EAAA,EAAA,EACAiB,EAAAC,GAAA,CACAJ,EAAA,MAAA,GACAD,EAAA,IAAA,gDAAAK,CAAA,EAAA,KAAAR,GAAA,CACAK,EAAA,MAAAL,EACAM,EAAA,MAAA,EACA,CAAA,CACA,EAGAG,EAAA,IAAA,CACA,OAAA,MAAApB,EAAA,MACA,OAAA,MAAA,QAAA,CAAAW,EAAAC,IAAA,OAAA,MAAAA,CAAA,EAAA,KAAA,OAAA,MAAAA,CAAA,EAAA,EAAA,EACA,OAAA,OAAAH,EAAA,MACA,OAAA,WAAA,MACAZ,EAAA,KAAA,iBAAA,CACA,EAGAwB,EAAAF,GAAA,CACAL,EAAA,IAAA,6CAAAK,CAAA,EAAA,KAAAR,GAAA,CACA,CAAA,CACA"}