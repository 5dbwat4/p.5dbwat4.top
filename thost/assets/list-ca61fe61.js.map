{"version":3,"file":"list-ca61fe61.js","sources":["../../node_modules/@vicons/ionicons5/es/RefreshOutline.js","../../node_modules/@vicons/ionicons5/es/SearchOutline.js","../../src/views/grouping/list.vue"],"sourcesContent":["import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 512 512'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M320 146s24.36-12-64-12a160 160 0 1 0 160 160',\n    fill: 'none',\n    stroke: 'currentColor',\n    'stroke-linecap': 'round',\n    'stroke-miterlimit': '10',\n    'stroke-width': '32'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    fill: 'none',\n    stroke: 'currentColor',\n    'stroke-linecap': 'round',\n    'stroke-linejoin': 'round',\n    'stroke-width': '32',\n    d: 'M256 58l80 80l-80 80'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_4 = [_hoisted_2, _hoisted_3]\nexport default defineComponent({\n  name: 'RefreshOutline',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createElementBlock('svg', _hoisted_1, _hoisted_4)\n  }\n})\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 512 512'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M221.09 64a157.09 157.09 0 1 0 157.09 157.09A157.1 157.1 0 0 0 221.09 64z',\n    fill: 'none',\n    stroke: 'currentColor',\n    'stroke-miterlimit': '10',\n    'stroke-width': '32'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    fill: 'none',\n    stroke: 'currentColor',\n    'stroke-linecap': 'round',\n    'stroke-miterlimit': '10',\n    'stroke-width': '32',\n    d: 'M338.29 338.29L448 448'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_4 = [_hoisted_2, _hoisted_3]\nexport default defineComponent({\n  name: 'SearchOutline',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createElementBlock('svg', _hoisted_1, _hoisted_4)\n  }\n})\n","<template>\r\n    <n-input-group>\r\n<n-input placeholder=\"Search\" v-model:value=\"searchParams\" :loading=\"LoadingSearch\" :on-input=\"SearchUpdate\"/>\r\n<n-button @click=\"handleSearch\">     <template #icon><n-icon :component=\"SearchOutline\"/></template></n-button>\r\n<n-button @click=\"Refresh\">     <template #icon><n-icon :component=\"RefreshOutline\"/></template></n-button>\r\n</n-input-group>\r\n<n-data-table remote :loading=\"loadingData\" :pagination=\"paginationReactive\"\r\n:data=\"data\" :columns=\"columns\"\r\n    @update:checked-row-keys=\"handleCheck\" :row-key=\"(row)=>row.id\" visual-scroll/>\r\n</template>\r\n\r\n<script setup>\r\nimport { NButton, NDataTable,NInputGroup,NInput,NIcon } from \"naive-ui\";\r\nimport { h, ref } from \"vue\";\r\nimport { API } from \"../../shared/APIHelper\"\r\nimport {useRoute,useRouter} from \"vue-router\"\r\nimport { SearchOutline,RefreshOutline } from \"@vicons/ionicons5\";\r\nconst route=useRoute(),router=useRouter()\r\n\r\nconst loadingData=ref(true),LoadingSearch=ref(false),searchParams=ref(\"\")\r\nconst data=ref([])\r\n\r\nconst columns=[{\r\n    type:\"selection\"\r\n},{\r\n    title:\"uuid\",\r\n    key:\"id\"\r\n},{\r\n    title:\"title\",\r\n    key:\"title\"\r\n},{\r\n    title:\"submit time\",\r\n    render(row){\r\n        return h(\"p\",{},(new Date(row.timestamp)).toISOString())\r\n    }\r\n},{\r\n    title:\"view\",\r\n    render(row){\r\n        return h(NButton,{\r\n            text:true,\r\n            onClick:()=>{\r\n                router.push(\"/group/\"+row.id)\r\n            }\r\n        },{default:()=>\"View\"})\r\n    }\r\n}]\r\n\r\nconst checkedRowKeysRef=ref([])\r\nconst handleCheck=(rowKeys) =>{\r\n        checkedRowKeysRef.value = rowKeys;\r\n        console.log(rowKeys);\r\n      }\r\n\r\n      ,gotobatch=()=>{\r\n        router.push(\"/batch/\"+checkedRowKeysRef.value.join(\",\"))\r\n      }\r\n\r\n\r\n      const  paginationReactive = ref({\r\n      page: 1,\r\n      pageSize: 10,\r\n      showSizePicker: true,\r\n      itemCount:0,\r\n      pageSizes: [5,10,20,50],\r\n      onChange: (page) => {\r\n        paginationReactive.value.page = page\r\n        loadingData.value=true\r\n        Refresh()\r\n      },\r\n      onUpdatePageSize: (pageSize) => {\r\n        paginationReactive.value.pageSize = pageSize\r\n        paginationReactive.value.page = 1\r\n        loadingData.value=true\r\n        Refresh()\r\n      }\r\n    })\r\n\r\nconst Refresh=()=>{\r\n    if(searchParams.value==\"\"){\r\n        API.get(`/api/v2/group/list?offset=${(paginationReactive.value.page-1)*paginationReactive.value.pageSize}&pagesize=${paginationReactive.value.pageSize}`).then(v=>{\r\n    data.value=v.data\r\n    paginationReactive.value.itemCount=v.count\r\n    loadingData.value=false\r\n    LoadingSearch.value=false\r\n})\r\n    }else{\r\n        API.get(`/api/v2/group/list/search/uuid?q=${encodeURIComponent(searchParams.value)}&offset=${(paginationReactive.value.page-1)*paginationReactive.value.pageSize}&pagesize=${paginationReactive.value.pageSize}`).then(v=>{\r\n    data.value=v.data\r\n    loadingData.value=false\r\n    LoadingSearch.value=false\r\n    })\r\n}\r\n}\r\n\r\n,SearchUpdate=(v)=>{\r\n    searchParams.value=v\r\n    LoadingSearch.value=true\r\n    Refresh()\r\n}\r\n\r\n// API.get(\"/api/v2/group/list\").then(v=>{\r\n//     data.value=v\r\n//     loadingData.value=false\r\n// })\r\n\r\nRefresh()\r\n\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"],"names":["_hoisted_1","_hoisted_2","_createElementVNode","_hoisted_3","_hoisted_4","RefreshOutline","defineComponent","_ctx","_cache","_openBlock","_createElementBlock","SearchOutline","useRoute","router","useRouter","loadingData","ref","LoadingSearch","searchParams","data","columns","row","h","NButton","checkedRowKeysRef","handleCheck","rowKeys","paginationReactive","page","Refresh","pageSize","API","v","SearchUpdate"],"mappings":"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","x_google_ignoreList":[0,1]}