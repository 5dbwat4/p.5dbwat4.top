import{bc as L,a5 as P,_ as D,b2 as N,b1 as W,J as z,aC as E,aT as Q,a_ as $,b5 as q,bC as B,j as H}from"./index-6b27469d.js";function K(e){return Q()?($(e),!0):!1}function O(e){return typeof e=="function"?e():L(e)}const R=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const U=Object.prototype.toString,X=e=>U.call(e)==="[object Object]",Y=()=>{};function Z(e,n){function t(...o){return new Promise((a,u)=>{Promise.resolve(e(()=>n.apply(this,o),{fn:n,thisArg:this,args:o})).then(a).catch(u)})}return t}const k=e=>e();function ee(e=k){const n=N(!0);function t(){n.value=!1}function o(){n.value=!0}const a=(...u)=>{n.value&&e(...u)};return{isActive:W(n),pause:t,resume:o,eventFilter:a}}function te(e){return e||z()}function ne(e,n,t={}){const{eventFilter:o=k,...a}=t;return E(e,Z(o,n),a)}function re(e,n,t={}){const{eventFilter:o,...a}=t,{eventFilter:u,pause:g,resume:d,isActive:m}=ee(o);return{stop:ne(e,n,{...a,eventFilter:u}),pause:g,resume:d,isActive:m}}function oe(e,n=!0,t){te()?P(e,t):n?e():D(e)}function ae(e){var n;const t=O(e);return(n=t==null?void 0:t.$el)!=null?n:t}const j=R?window:void 0;function T(...e){let n,t,o,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,o,a]=e,n=j):[n,t,o,a]=e,!n)return Y;Array.isArray(t)||(t=[t]),Array.isArray(o)||(o=[o]);const u=[],g=()=>{u.forEach(l=>l()),u.length=0},d=(l,s,w,c)=>(l.addEventListener(s,w,c),()=>l.removeEventListener(s,w,c)),m=E(()=>[ae(n),O(a)],([l,s])=>{if(g(),!l)return;const w=X(s)?{...s}:s;u.push(...t.flatMap(c=>o.map(S=>d(l,c,S,w))))},{immediate:!0,flush:"post"}),v=()=>{m(),g()};return K(v),v}const A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_="__vueuse_ssr_handlers__",ie=se();function se(){return _ in A||(A[_]=A[_]||{}),A[_]}function ue(e,n){return ie[e]||n}function le(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const ce={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},C="vueuse-storage";function fe(e,n,t,o={}){var a;const{flush:u="pre",deep:g=!0,listenToStorageChanges:d=!0,writeDefaults:m=!0,mergeDefaults:v=!1,shallow:l,window:s=j,eventFilter:w,onError:c=r=>{console.error(r)},initOnMounted:S}=o,p=(l?q:N)(typeof n=="function"?n():n);if(!t)try{t=ue("getDefaultStorage",()=>{var r;return(r=j)==null?void 0:r.localStorage})()}catch(r){c(r)}if(!t)return p;const y=O(n),F=le(y),b=(a=o.serializer)!=null?a:ce[F],{pause:M,resume:I}=re(p,()=>V(p.value),{flush:u,deep:g,eventFilter:w});s&&d&&oe(()=>{T(s,"storage",h),T(s,C,G),S&&h()}),S||h();function J(r,i){s&&s.dispatchEvent(new CustomEvent(C,{detail:{key:e,oldValue:r,newValue:i,storageArea:t}}))}function V(r){try{const i=t.getItem(e);if(r==null)J(i,null),t.removeItem(e);else{const f=b.write(r);i!==f&&(t.setItem(e,f),J(i,f))}}catch(i){c(i)}}function x(r){const i=r?r.newValue:t.getItem(e);if(i==null)return m&&y!=null&&t.setItem(e,b.write(y)),y;if(!r&&v){const f=b.read(i);return typeof v=="function"?v(f,y):F==="object"&&!Array.isArray(f)?{...y,...f}:f}else return typeof i!="string"?i:b.read(i)}function h(r){if(!(r&&r.storageArea!==t)){if(r&&r.key==null){p.value=y;return}if(!(r&&r.key!==e)){M();try{(r==null?void 0:r.newValue)!==b.write(p.value)&&(p.value=x(r))}catch(i){c(i)}finally{r?D(I):I()}}}}function G(r){h(r.detail)}return p}const pe=B("settings",()=>{const e=N(0),n=fe("__thost_store__settings",{ImgQuality:"x3"},localStorage,{mergeDefaults:!0});H(()=>e.value*2);function t(o,a){n.value[o]=a}return{settings:n,set:t}});export{pe as u};
