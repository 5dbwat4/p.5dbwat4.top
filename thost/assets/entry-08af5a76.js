import{ab as c,m as I,u as l,aH as o,n as y,bi as u,bc as a,t as p,F as S,ah as K,bh as le,ae as oe,ac as ne,b2 as d,bk as f,av as re,k as E,l as U,__tla as se}from"./index-6b27469d.js";import{useRouter as ue,useRoute as pe}from"./vue-router-85f8dd9e.js";import{n as ie}from"./toScreenDSingle-d0be9dca.js";import{_ as me}from"./_plugin-vue_export-helper-c27b6911.js";import{N as q}from"./Divider-7d564df1.js";import{N as de}from"./Ellipsis-b74cfcb8.js";import{N as Q}from"./Space-5a87e743.js";import{A as W}from"./APIHelper-89899791.js";import{N as _e}from"./Popover-d5735fab.js";import{N as h}from"./Cascader-3dd91518.js";import{N as _}from"./FormItem-b835bccb.js";import{N as ve}from"./Form-2b0dd80a.js";import{N as R}from"./InputNumber-590d7ede.js";import{N as k}from"./Button-a421b774.js";import{N as A}from"./Card-b4e38b92.js";import{N as C}from"./p-d63b6958.js";import"./light-cb8e5d18.js";import"./Tooltip-46e4aeaa.js";import"./Close-df27b242.js";import"./Icon-0741e3aa.js";import"./flatten-0afec71b.js";import"./get-slot-1efb97e5.js";import"./format-length-c9d165c6.js";import"./Warning-ad995842.js";import"./Scrollbar-6ef5ad24.js";import"./runtime-dom.esm-bundler-4f377a37.js";import"./keysOf-5d5107c5.js";import"./index-cabd39fd.js";import"./use-false-until-truthy-35c1fbae.js";import"./get-9cb40f85.js";import"./use-memo-7138c88c.js";import"./cssr-752b8ed7.js";import"./utils-eca1999b.js";import"./use-is-mounted-e356ec1d.js";import"./use-merged-state-236ae148.js";import"./use-compitable-182c3d4e.js";import"./next-frame-once-7035a838.js";import"./utils-1657c4d7.js";import"./fade-in-scale-up.cssr-59f6c429.js";import"./create-59670860.js";import"./Loading-a27cceda.js";import"./ChevronRight-f0e435af.js";import"./use-locale-13d55c5c.js";import"./index-975a2d8f.js";import"./Suffix-8898b6d6.js";import"./Tag-156be23d.js";import"./Checkbox-d6d0f1db.js";import"./index-cbfaa337.js";import"./use-collection-37ba12f3.js";import"./Input-c49f615f.js";import"./light-5edeff63.js";import"./Add-d9842426.js";import"./FadeInExpandTransition-65435983.js";import"./light-5c2f581c.js";let J,ce=Promise.all([(()=>{try{return se}catch{}})()]).then(async()=>{async function L(w,i="GET",m){return await W.post("/api/xkw-helper/____sensitive/get_zujuan_app_content",{url:w,method:i,body:m})}let O,x,j,V,$,z,B,H,M,F;O=w=>(oe("data-v-5adc52e0"),w=w(),ne(),w),x={class:"header-info"},j={class:"header-info"},V={class:"header-info"},$={class:"header-info"},z=["innerHTML"],B=O(()=>y("p",{class:"paperSource"},"Included by:",-1)),H={class:"paperSourceId"},M={__name:"questionBlock.zjw.a",setup(w){return(i,m)=>(c(),I("div",null,[l(a(Q),null,{default:o(()=>[y("p",x,u(i.$attrs.qcontent.diff.name)+"("+u(i.$attrs.qcontent.diff.value)+") ",1),l(a(q),{vertical:""}),y("p",j,u(i.$attrs.qcontent.type.name),1),l(a(q),{vertical:""}),y("p",V,"ID:"+u(i.$attrs.qcontent.id),1),l(a(q),{vertical:""}),y("p",$,[p(" Knowledge: "),l(a(de),{style:{"max-width":"240px"}},{default:o(()=>[p(u(i.$attrs.qcontent.knowledgeInfo),1)]),_:1})])]),_:1}),y("div",{innerHTML:a(ie)(i.$attrs.qcontent.body,{source:i.$attrs.qcontent.title})},null,8,z),y("div",null,[B,(c(!0),I(S,null,K(i.$attrs.qcontent.paperSources,n=>(c(),I("p",{class:"paperSource",style:le({fontWeight:n.name.includes("\u6C5F\u82CF")?600:400})},[p(u(n.name),1),y("span",H," ID:"+u(n.id),1)],4))),256))])]))}},F=me(M,[["__scopeId","data-v-5adc52e0"]]),J={__name:"entry",setup(w){ue(),pe();const i=d(!1),m=d({subjectsmap:[],areasmap:[],diffsmap:[],sourcesmap:[],typesmap:{},orderbymap:[],yearsmap:[],gradesmap:[],knowledgeInfomap:{}});Promise.all([{varname:"subjectsmap",co:()=>f(()=>import("./subjects-1684b75a.js"),[],import.meta.url)},{varname:"areasmap",co:()=>f(()=>import("./areas-f0caec44.js"),[],import.meta.url)},{varname:"diffsmap",co:()=>f(()=>import("./diffs-eb071f26.js"),[],import.meta.url)},{varname:"sourcesmap",co:()=>f(()=>import("./sources-bd18f63f.js"),[],import.meta.url)},{varname:"typesmap",co:()=>f(()=>import("./questypeList.tree-33de5868.js"),[],import.meta.url)},{varname:"orderbymap",co:()=>f(()=>import("./orderby-e842d970.js"),[],import.meta.url)},{varname:"yearsmap",co:()=>f(()=>import("./years-f64383dd.js"),[],import.meta.url)},{varname:"gradesmap",co:()=>f(()=>import("./grades-9cfe1ead.js"),[],import.meta.url)},{varname:"knowledgeInfomap",co:()=>f(()=>import("./knowl-full-58d4a853.js"),[],import.meta.url)}].map(s=>new Promise(async(t,e)=>{m.value[s.varname]=(await s.co()).default,t()}))).then(s=>{i.value=!0}),re(),d(1);const n=d({types:0,sources:0,pageIndex:1,pageSize:10,orderBy:2,areas:0,grades:0,diffs:0,knowledges:0,years:0}),g=d(12);d([]);const T=d({avgdiff:0,avgPaperSourceCount:0,avgUseCount:0}),P=d(!0),N=d(!1),v=d([]),X=async()=>{function s(){return"/app-server/v1/ques/list/"+g.value+"?"+Object.entries(n.value).map(t=>t[0]+"="+t[1]).join("&")}await L(s()).then(t=>{v.value.push(...t.data.list),console.log(v.value),Y(v.value)})};function Y(s){let t=0,e=0,b=0;s.forEach(r=>{t+=r.diff.value,e+=r.useCount,b+=r.paperSources.length,r.danas_info||(r.danas_info={},r.danas_info.day_to_now_CTN=Math.floor((new Date().getTime()-new Date(r.time).getTime())/1e3/60/24),r.danas_info.day_to_now_CTN<7&&(r.danas_info.day_to_now_CTN=7),r.danas_info.uc_t_rate=r.useCount/r.danas_info.day_to_now_CTN,r.danas_info.ucpps_t_rate=(r.useCount+r.paperSources.length*10)/r.danas_info.day_to_now_CTN,r.danas_info.best_t_rate=(r.useCount+r.paperSources.length*10)/r.danas_info.day_to_now_CTN)}),T.value={avgdiff:t/s.length,avgUseCount:e/s.length,avgPaperSourceCount:b/s.length}}const Z=()=>{P.value=!1,N.value=!0,v.value=v.value.sort((s,t)=>t.danas_info.best_t_rate-s.danas_info.best_t_rate)},D=d(5),G=s=>{let t=v.value.slice(0,s);console.log(t),L("/app-server/v1/basket/"+g.value,"POST",{ids:t.map(e=>e.id).join(",")})},ee=async()=>{let s=[],t=[];Promise.all(v.value.map(e=>new Promise((b,r)=>{W.get("/api/qapi/is_collected/"+g.value+"/"+e.id).then(te=>{te.found||t.includes(e.id)||(s.push(e),t.push(e.id)),b()})}))).then(e=>{console.log(s),v.value=s.sort((b,r)=>r.danas_info.best_t_rate-b.danas_info.best_t_rate)})},ae=()=>{P.value=!0,N.value=!1};return(s,t)=>(c(),I(S,null,[P.value?(c(),E(a(A),{key:0},{default:o(()=>[l(a(_),{label:"Subject"},{default:o(()=>[l(a(h),{value:g.value,"onUpdate:value":t[0]||(t[0]=e=>g.value=e),options:m.value.subjectsmap,"check-strategy":"child","show-path":!0,"on-update:value":e=>{n.value.knowledges=0,n.value.types=0,g.value=e}},null,8,["value","options","on-update:value"])]),_:1}),i.value?(c(),E(a(ve),{key:0,"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging"},{default:o(()=>[l(a(_),{label:"\u96BE\u5EA6(diffs)"},{default:o(()=>[l(a(h),{value:n.value.diffs,"onUpdate:value":t[1]||(t[1]=e=>n.value.diffs=e),options:m.value.diffsmap,"check-strategy":"child","show-path":!0},null,8,["value","options"])]),_:1}),l(a(_),{label:"areas"},{default:o(()=>[l(a(h),{value:n.value.areas,"onUpdate:value":t[2]||(t[2]=e=>n.value.areas=e),options:m.value.areasmap,"check-strategy":"child","show-path":!0},null,8,["value","options"])]),_:1}),l(a(_),{label:"sources"},{default:o(()=>[l(a(h),{value:n.value.sources,"onUpdate:value":t[3]||(t[3]=e=>n.value.sources=e),options:m.value.sourcesmap,"check-strategy":"child","show-path":!0},null,8,["value","options"])]),_:1}),l(a(_),{label:"types"},{default:o(()=>[l(a(h),{value:n.value.types,"onUpdate:value":t[4]||(t[4]=e=>n.value.types=e),options:m.value.typesmap[""+g.value],"check-strategy":"all","show-path":!0},null,8,["value","options"])]),_:1}),l(a(_),{label:"knowledgeInfo"},{default:o(()=>[l(a(h),{value:n.value.knowledges,"onUpdate:value":t[5]||(t[5]=e=>n.value.knowledges=e),options:m.value.knowledgeInfomap[""+g.value],"check-strategy":"all","show-path":!0},null,8,["value","options"])]),_:1}),l(a(_),{label:"\u6392\u5E8F(orderBy)"},{default:o(()=>[l(a(h),{value:n.value.orderBy,"onUpdate:value":t[6]||(t[6]=e=>n.value.orderBy=e),options:m.value.orderbymap,"check-strategy":"all","show-path":!0},null,8,["value","options"])]),_:1}),l(a(_),{label:"\u5E74\u4EFD(years)"},{default:o(()=>[l(a(h),{value:n.value.years,"onUpdate:value":t[7]||(t[7]=e=>n.value.years=e),options:m.value.yearsmap,"check-strategy":"all","show-path":!0},null,8,["value","options"])]),_:1}),l(a(_),{label:"\u5E74\u7EA7(grades)"},{default:o(()=>[l(a(h),{value:n.value.grades,"onUpdate:value":t[8]||(t[8]=e=>n.value.grades=e),options:m.value.gradesmap,"check-strategy":"all","show-path":!0},null,8,["value","options"])]),_:1}),l(a(_),{label:"pageIndex"},{default:o(()=>[l(a(R),{value:n.value.pageIndex,"onUpdate:value":t[9]||(t[9]=e=>n.value.pageIndex=e),min:0},null,8,["value"])]),_:1}),l(a(_),{label:"pageSize"},{default:o(()=>[l(a(R),{value:n.value.pageSize,"onUpdate:value":t[10]||(t[10]=e=>n.value.pageSize=e)},null,8,["value"])]),_:1}),l(a(k),{onClick:X},{default:o(()=>[p("\u52A0\u5165\u81F3DA List")]),_:1}),l(a(k),{onClick:Z},{default:o(()=>[p("\u5206\u6790")]),_:1})]),_:1})):U("",!0)]),_:1})):U("",!0),l(a(A),null,{default:o(()=>[l(a(C),null,{default:o(()=>[p("Currently On Queue:")]),_:1}),l(a(C),null,{default:o(()=>[p("Count:"+u(v.value.length),1)]),_:1}),l(a(C),null,{default:o(()=>[p("\u5E73\u5747\u96BE\u5EA6:"+u(T.value.avgdiff),1)]),_:1}),l(a(C),null,{default:o(()=>[p("\u5E73\u5747\u7EC4\u5377\u6B21:"+u(T.value.avgUseCount),1)]),_:1}),l(a(C),null,{default:o(()=>[p("\u5E73\u5747\u7528\u4E8E\u8BD5\u5377:"+u(T.value.avgPaperSourceCount),1)]),_:1})]),_:1}),N.value?(c(),E(a(A),{key:1},{default:o(()=>[l(a(k),{onClick:ae},{default:o(()=>[p("...\u7EE7\u7EED")]),_:1}),l(a(k),{onClick:ee},{default:o(()=>[p("\u5220\u9664\u5DF2\u6536\u5F55")]),_:1}),l(a(k),{onClick:t[11]||(t[11]=e=>G(15))},{default:o(()=>[p("\u6536\u5F5515\u9898")]),_:1}),l(a(k),{onClick:t[12]||(t[12]=e=>G(D.value))},{default:o(()=>[p("\u6536\u5F55...")]),_:1}),l(a(R),{value:D.value,"onUpdate:value":t[13]||(t[13]=e=>D.value=e),width:80},null,8,["value"]),(c(!0),I(S,null,K(v.value,e=>(c(),E(a(_e),{trigger:"hover"},{trigger:o(()=>[l(a(Q),null,{default:o(()=>[l(a(C),null,{default:o(()=>[p("Rate:"+u(e.danas_info.best_t_rate)+" | useCount:"+u(e.useCount)+" | updatedAt:"+u(e.time)+" | ID: "+u(e.id)+" | "+u(e.diff.name)+" | "+u(e.type.name)+" | ",1)]),_:2},1024),l(a(k),{text:"",onClick:b=>s.RemoveDAChunk(e)},{default:o(()=>[p("Remove")]),_:2},1032,["onClick"])]),_:2},1024)]),default:o(()=>[l(F,{style:{width:"700px",height:"300px","overflow-y":"scroll"},qcontent:e},null,8,["qcontent"])]),_:2},1024))),256))]),_:1})):U("",!0)],64))}}});export{ce as __tla,J as default};
