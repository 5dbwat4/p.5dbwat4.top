{"version":3,"file":"nomorlize_q-51f6e8d4.js","sources":["../../src/views/zujuanink-v3/views/export/nomorlize_q.js"],"sourcesContent":["\r\nimport { API } from \"../../../../shared/APIHelper\"\r\n\r\n\r\nfunction normalizeq(q,Nopt){\r\n    const ool=document.createElement(\"div\")\r\n    q=q.replaceAll(\"【题文】\",\"\")\r\n    ool.innerHTML=q\r\n\r\n    ool.querySelectorAll(\"img\").forEach(v=>{\r\n        if(v.src.includes(\"/formula/\")){\r\n            v.src=v.src.replace(\".png\",\".svg\")\r\n            v.style.width=(v.width*.8)+\"px\"\r\n            v.src=v.src.replace(\"https://staticzujuan.xkw.com/quesimg/Upload/formula/\",API.host+\"/api/xkw-helper/route-formula-svg/\").replace(\".svg\",\"\")\r\n        }\r\n        if(v.src.includes(\"/dksih/\")){\r\n            let tmp=/\\?resizew=(\\d*)/.exec(v.src)\r\n            if(tmp&&tmp.length!=0){\r\n                v.style.width=tmp[1]+\"px\"\r\n                v.src=v.src.replace(/\\?resizew=(\\d*)/,\"\")\r\n                v.setAttribute(\"width\",tmp[1])\r\n                v.setAttribute(\"height\",\"\")\r\n            }\r\n        }\r\n    })\r\n\r\n\r\n    ool.querySelectorAll(\"p\").forEach(v=>{\r\n        if(!v.style.fontFamily){\r\n            v.style.fontFamily=\"'Times New Romans' , 宋体\"\r\n        }\r\n        if(!v.style.fontSize){\r\n            v.style.fontSize=\"9.5pt\"\r\n        }\r\n\r\n        // v.style.lineHeight=\"12pt\"\r\n        v.style.margin=\"0px\"\r\n    })\r\n\r\n\r\n    ool.querySelectorAll(\"table[name=optionsTable]\").forEach(v=>{\r\n        if(v.querySelectorAll(\"td\").length==4){\r\n            // console.log(\"oo\",v);\r\n            let opts=[],lns=1\r\n            v.querySelectorAll(\"td\").forEach(oo=>{\r\n                opts.push(oo.outerHTML)\r\n            })\r\n            v.addEventListener(\"click\",()=>{\r\n                console.log(\"click\");\r\n                const {ctn,next_lns}=toTable(opts,lns)\r\n                v.innerHTML=ctn\r\n                lns=next_lns\r\n            })\r\n        }\r\n\r\n    })\r\n\r\n    ool.querySelectorAll(\"table[name=optionsTable] td\").forEach(v=>{\r\n        if(!v.style.fontFamily){\r\n            v.style.fontFamily=\"Cambria , 宋体\"\r\n        }\r\n        if(!v.style.fontSize){\r\n            v.style.fontSize=\"9.5pt\"\r\n        }\r\n\r\n        // v.style.lineHeight=\"12pt\"\r\n        v.style.margin=\"0px\"\r\n    })\r\n\r\n\r\n    //18.76/4\r\n\r\n    ool.style.fontFamily=\"Cambria , 宋体\"\r\n\r\n\r\n    // if(Nopt.ret2){\r\n    //     ool.querySelectorAll(\"span\").forEach(v=>{\r\n    //         v.innerHTML=v.innerHTML.replace(/【小题(\\d*)】/,\"$1.\")\r\n    //     })\r\n    //     ool.querySelectorAll(\"bk\").forEach(v=>{\r\n    //         v.innerHTML=\"<u>&nbsp;&nbsp;&nbsp;\"+v.attributes.index.nodeValue+\"&nbsp;&nbsp;&nbsp;</u>\"\r\n            \r\n    //     })\r\n    // }\r\n\r\n    // console.log(ool.innerHTML);\r\n\r\n\r\n    return ool.outerHTML\r\n}\r\n\r\n\r\nfunction toTable(opts,lns){\r\n    if(lns==1){\r\n        return {ctn:\"<tbody><tr>\"+opts.join(\"\")+\"</tr></tbody>\",next_lns:2}\r\n    }\r\n    if(lns==2){\r\n        return {ctn:`<tbody><tr>${opts[0]}${opts[1]}</tr><tr>${opts[2]}${opts[3]}</tr></tbody>`,next_lns:4}\r\n    }\r\n    if(lns==4){\r\n        return {ctn:\"<tbody><tr>\"+opts.join(\"</tr><tr>\")+\"</tr></tbody>\",next_lns:1}\r\n    }\r\n}\r\n\r\n\r\nfunction normalizeqA(q,Nopt){\r\n    const ool=document.createElement(\"div\")\r\n    q=q.replaceAll(\"【题文】\",\"\")\r\n    ool.innerHTML=q\r\n\r\n    ool.querySelectorAll(\"img\").forEach(v=>{\r\n        if(v.src.includes(\"/formula/\")){\r\n            v.src=v.src.replace(\".png\",\".svg\")\r\n            v.src=v.src.replace(\"https://staticzujuan.xkw.com/quesimg/Upload/formula/\",API.host+\"/api/xkw-helper/route-formula-svg/\").replace(\".svg\",\"\")\r\n                v.style.width=(v.width*.8)+\"px\"\r\n        }\r\n        if(v.src.includes(\"/dksih/\")){\r\n            let tmp=/\\?resizew=(\\d*)/.exec(v.src)\r\n            if(tmp&&tmp.length!=0){\r\n                v.style.width=tmp[1]+\"px\"\r\n                v.src=v.src.replace(/\\?resizew=(\\d*)/,\"\")\r\n                v.setAttribute(\"width\",tmp[1])\r\n                v.setAttribute(\"height\",\"\")\r\n            }\r\n        }\r\n    })\r\n\r\n\r\n    ool.querySelectorAll(\"p\").forEach(v=>{\r\n        if(!v.style.fontFamily){\r\n            v.style.fontFamily=\"'Times New Roman' , 宋体\"\r\n        }\r\n        if(!v.style.fontSize){\r\n            v.style.fontSize=\"9.5pt\"\r\n        }\r\n\r\n        // v.style.lineHeight=\"12pt\"\r\n        v.style.margin=\"0px\"\r\n    })\r\n    ool.querySelectorAll(\"sup\").forEach(v=>{\r\n        if(!v.style.fontSize){\r\n            v.style.fontSize=\"6.5pt\"\r\n        }\r\n\r\n    })\r\n    ool.querySelectorAll(\"sub\").forEach(v=>{\r\n        if(!v.style.fontSize){\r\n            v.style.fontSize=\"6.5pt\"\r\n        }\r\n\r\n    })\r\n\r\n\r\n    ool.querySelectorAll(\"table[name=optionsTable]\").forEach(v=>{\r\n        if(v.querySelectorAll(\"td\").length==4){\r\n            // console.log(\"oo\",v);\r\n            let opts=[],lns=1\r\n            v.querySelectorAll(\"td\").forEach(oo=>{\r\n                opts.push(oo.outerHTML)\r\n            })\r\n            // v.addEventListener(\"click\",()=>{\r\n            //     console.log(\"click\");\r\n                const {ctn,next_lns}=toTable(opts,4)\r\n                v.innerHTML=ctn\r\n                // lns=next_lns\r\n            // })\r\n        }\r\n\r\n    })\r\n\r\n    ool.querySelectorAll(\"table[name=optionsTable] td\").forEach(v=>{\r\n        v.innerHTML=\"<span style='width:fit-content;display:block;'>\"+v.innerHTML+\"</span>\"\r\n        if(!v.style.fontFamily){\r\n            v.style.fontFamily=\"Times New Roman , 宋体\"\r\n        }\r\n        if(!v.style.fontSize){\r\n            v.style.fontSize=\"9.5pt\"\r\n        }\r\n        // console.log(v.querySelector(\"span\").clientWidth);\r\n\r\n        // v.style.lineHeight=\"12pt\"\r\n        v.style.margin=\"0px\"\r\n    })\r\n\r\n\r\n    //18.76/4\r\n\r\n    ool.style.fontFamily=\"Times New Roman , 宋体\"\r\n    ool.style.fontSize=\"9.5pt\"\r\n\r\n\r\n    // if(Nopt.ret2){\r\n    //     ool.querySelectorAll(\"span\").forEach(v=>{\r\n    //         v.innerHTML=v.innerHTML.replace(/【小题(\\d*)】/,\"$1.\")\r\n    //     })\r\n    //     ool.querySelectorAll(\"bk\").forEach(v=>{\r\n    //         v.innerHTML=\"<u>&nbsp;&nbsp;&nbsp;\"+v.attributes.index.nodeValue+\"&nbsp;&nbsp;&nbsp;</u>\"\r\n            \r\n    //     })\r\n    // }\r\n\r\n    // console.log(ool.innerHTML);\r\n    ool.insertAdjacentHTML(\"afterbegin\",`\r\n    ${Nopt.GContentFormat.value==1?(Nopt.index)+\".\":\"\"}\r\n    (${Nopt.qcontent.type.name},${Nopt.qcontent.diff.name }(${ Nopt.qcontent.diff.value }))`)\r\n    // (${Nopt.qcontent.type.name},${Nopt.qcontent.diff.name }(${ Nopt.qcontent.diff.value }))<span style=\"font-family:楷体\">（${Nopt.qcontent.title}）</span>`)\r\n\r\n\r\n    if(Nopt.qcontent.type.id==2808){\r\n        ool.querySelectorAll(\"p\").forEach(v=>{\r\n            if(!v.style.fontFamily.includes(\"仿宋\"))\r\n            v.style.fontFamily=\"Times New Roman , 宋体\"\r\n        })\r\n        ool.querySelectorAll(\"span\").forEach(v=>{\r\n            v.innerHTML=v.innerHTML.replace(/【小题(\\d*)】/,\"$1.\")\r\n        })\r\n        ool.querySelectorAll(\"bk\").forEach(v=>{\r\n            v.innerHTML=\"<u>&nbsp;&nbsp;&nbsp;\"+v.attributes.index.nodeValue+\"&nbsp;&nbsp;&nbsp;</u>\"\r\n            \r\n        })\r\n    }\r\n    if(Nopt.qcontent.type.id==2813||Nopt.qcontent.type.id==281301||Nopt.qcontent.type.id==281302||Nopt.qcontent.type.id==280902){\r\n        ool.querySelectorAll(\"p\").forEach(v=>{\r\n            if(!v.style.fontFamily.includes(\"仿宋\"))\r\n            v.style.fontFamily=\"Times New Roman , 宋体\"\r\n        })\r\n        ool.querySelectorAll(\"bk u\").forEach(v=>{\r\n            v.innerHTML=v.innerHTML.replace(/【小题(\\d*)】/,\"$1.______________\")\r\n            v.outerHTML=v.outerHTML.replace(\"<u>\",\"<span>\").replace(\"</u>\",\"</span>\")\r\n        })\r\n    }\r\n    if(Nopt.qcontent.type.id==280901){\r\n        ool.innerHTML=ool.innerHTML.replaceAll(/【小题(\\d*)】/g,\"$1.\")\r\n    }\r\n\r\n\r\n    return ool.outerHTML\r\n}\r\nexport{normalizeq,normalizeqA}\r\n"],"names":["normalizeq","q","Nopt","ool","v","API","tmp","opts","lns","oo","ctn","next_lns","toTable","normalizeqA"],"mappings":"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"}