{"version":3,"file":"index-d69a0bd1.js","sources":["../../src/views/regener/index.vue"],"sourcesContent":["<template>\r\n<n-card v-if=\"step==1\">\r\n<n-input v-model:value=\"meterial\" type=\"textarea\" />\r\n<n-input v-model:value=\"bid\"/>\r\n<n-button @click=\"help1\">RUN</n-button>\r\n</n-card>\r\n<n-card v-if=\"step==2\">\r\n    <div v-html=\"ranges.join('<br/>')\"></div>\r\n    <div v-html=\"meterial.replaceAll('\\n','<br/>')\"></div>\r\n        <n-button @click=\"help2\">RUN</n-button>\r\n        <n-button @click=\"help3\">RUN using ifr</n-button>\r\n</n-card>\r\n<n-card v-if=\"step==32\">\r\n    <n-button @click=\"regenatteachedHelper\">GOTO zujuan.xkw.com</n-button>\r\n</n-card>\r\n<n-card v-if=\"step==32\">\r\n    <div v-for=\"ror in ranges\" :key=\"ror.key\">\r\n        <div  v-if=\"ror.display\">\r\n        <p>{{ror.met}}</p>\r\n        <iframe  :src=\"'https://zujuan.xkw.com/quessearch/?keyword='+ror.met\"></iframe>\r\n        <n-button @click=\"ranges[helpertmp_i].display=false;helpertmp_i++;ranges[helpertmp_i].display=true\">&lt; next</n-button>\r\n        <n-button @click=\"ranges[helpertmp_i].display=false;helpertmp_i--;ranges[helpertmp_i].display=true\">prev &gt;</n-button>\r\n        </div>\r\n    </div>\r\n\r\n</n-card>\r\n<n-card v-if=\"step==31\">\r\n    <div v-for=\"ror in ranges\" :key=\"ror.met\">\r\n        <p>{{ror.met}}</p>\r\n        <div v-html=\"ror.tdp.body\"></div>\r\n        <p>QID:{{ror.tdp.id}}   ||   {{foundlist[ror.tdp.id]}}</p>\r\n        <n-button @click=\"Save(ror.tdp.id)\" :loading=\"saving[ror.tdp.id]\">SAVE</n-button>\r\n        <n-button @click=\"ror.tdp=ror.list[--ror.index]\">&lt; CHANGE</n-button>\r\n        <n-button @click=\"ror.tdp=ror.list[++ror.index]\">CHANGE &gt;</n-button>\r\n    </div>\r\n\r\n</n-card>\r\n<div></div>\r\n</template>\r\n\r\n<script setup>\r\nimport {NInput,NButton,NCard}from \"naive-ui\"\r\nimport { ref } from \"vue\";\r\nimport { API } from \"../../shared/APIHelper\";\r\n\r\n\r\n\r\nconst meterial=ref(\"\"),step=ref(1),ranges=ref([]),bid=ref(\"\"),foundlist=ref({}),saving=ref({})\r\n\r\nconst _kpafunc=(e)=>{\r\n    if(e.key==\"Enter\"){\r\n        let range=window.getSelection().toString() \r\n        // .slice(0,25)\r\n        ranges.value.push(range)\r\n    }\r\n}\r\nconst help1=()=>{\r\nstep.value=2\r\ndocument.addEventListener(\"keypress\",_kpafunc)\r\n}\r\nconst help2=async()=>{\r\nstep.value=31\r\nlet ooo=ranges.value\r\nranges.value=ranges.value.map(o=>{return {met:o,list:[],tdp:{}}})\r\nfor (let i = 0; i < ranges.value.length; i++) {\r\n    await API.get(\"/api/xkw-helper/qsearch/\"+bid.value+\"/\"+ranges.value[i].met.slice(0,40)).then(r=>{\r\n        ranges.value[i].list=r.data.list\r\n        ranges.value[i].index=0\r\n        ranges.value[i].tdp=ranges.value[i].list[ranges.value[i].index]\r\n        r.data.list.forEach((o,j) => {\r\n            if(j<6){\r\n                WhetherFound(bid.value,o.id)\r\n            }\r\n        });\r\n    })\r\n}\r\n\r\n}\r\n\r\nconst helpertmp_i=ref(0)\r\nconst help3=async()=>{\r\nstep.value=32\r\nlet ooo=ranges.value\r\nranges.value=ranges.value.map(o=>{return {met:o,list:[],tdp:{}}})\r\nfor (let i = 0; i < ranges.value.length; i++) {\r\nranges.value[i].display=false\r\n}\r\nranges.value[0].display=!false\r\n\r\n}\r\n\r\nconst WhetherFound=async(bid,qid)=>{\r\n    await API.get(\"/api/qapi/is_collected/\"+bid+\"/\"+qid).then(r=>{\r\n        foundlist.value[qid]=JSON.stringify(r)\r\n    })\r\n}\r\n\r\nconst Save=async(qid)=>{\r\n    saving.value[qid]=true\r\n    await API.get(\"/api/xkw-helper/get_pure_question/\"+bid.value+\"/\"+qid).then(async(o1)=>{\r\n        const o=o1.data\r\n        const op={\r\n            bankid:bid.value,\r\n            qid,\r\n            q:o.body,\r\n            a:\"<answerparser>unsaved|u</answerparser>\",\r\n            extra:JSON.stringify({\r\n                from:o.paperSources[0]?o.paperSources[0].name:\"\",\r\n                knowledgepoint:o.knowledgeInfo.split(\"ï¼Œ\"),\r\n                info:[o.type.name,o.diff.name+\"(\"+o.diff.value+\")\"]\r\n\r\n            }),\r\n            timestamp:(new Date()).getTime()\r\n        }\r\n        API.post(\"/api/add\",op).then(p=>{\r\n            saving.value[qid]=false\r\n        })\r\n\r\n    })\r\n}\r\n\r\n\r\n\r\nconst regenatteachedHelper=()=>{\r\n    API.post(\"/api/regen-attach/state-update/contentupd\",ranges.value.map(v=>encodeURIComponent( v.met.replaceAll(\"\\r\\n\",\" \").replaceAll(/[ \\t]/g,\" \").slice(0,100)))).then(p=>{\r\n            location.href=API.host+\"/api/regen-attach/router/begin\"\r\n        })\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"names":["meterial","ref","step","ranges","bid","foundlist","saving","_kpafunc","e","range","help1","help2","o","i","API","r","j","WhetherFound","helpertmp_i","help3","qid","Save","o1","op","p","regenatteachedHelper","v"],"mappings":"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"}