{"version":3,"file":"index-3e86b53a.js","sources":["../../src/views/server-status/index.vue"],"sourcesContent":["<template>\r\n<n-button @click=\"initWS\">开始监听</n-button>\r\n<n-statistic label=\"已进行的Request\">\r\n        {{ States.count }}\r\n      </n-statistic>\r\n      <n-statistic label=\"最新Req时间(ms)\">\r\n        {{ States.aliveTime }}\r\n      </n-statistic>\r\n      <n-log :log=\"States.recentReqList.toReversed().join('\\n')\" :rows=\"50\"></n-log>\r\n</template>\r\n<script setup>\r\nimport { NButton,NStatistic,NLog } from 'naive-ui';\r\nimport { API } from '../../shared/APIHelper';\r\nimport { ref } from 'vue';\r\n\r\n\r\nconst States=ref({\r\n    count:0,\r\n    serverHealthy:false,\r\n    recentReqList:[],\r\n    aliveTime:0\r\n})\r\nconst initWS=()=>{\r\n    var ws = new WebSocket('ws://'+(new URL(API.host)).host);\r\nws.onmessage = function(event) { \r\n    States.value.count=JSON.parse(event.data).count\r\n    States.value.aliveTime=JSON.parse(event.data).aliveTime\r\n    States.value.recentReqList.push(JSON.parse(event.data).msg)\r\n };\r\n}\r\n</script>"],"names":["States","ref","initWS","ws","API","event"],"mappings":"01BAgBA,MAAAA,EAAAC,EAAA,CACA,MAAA,EACA,cAAA,GACA,cAAA,CAAA,EACA,UAAA,CACA,CAAA,EACAC,EAAA,IAAA,CACA,IAAAC,EAAA,IAAA,UAAA,QAAA,IAAA,IAAAC,EAAA,IAAA,EAAA,IAAA,EACAD,EAAA,UAAA,SAAAE,EAAA,CACAL,EAAA,MAAA,MAAA,KAAA,MAAAK,EAAA,IAAA,EAAA,MACAL,EAAA,MAAA,UAAA,KAAA,MAAAK,EAAA,IAAA,EAAA,UACAL,EAAA,MAAA,cAAA,KAAA,KAAA,MAAAK,EAAA,IAAA,EAAA,GAAA,CACA,CACA;"}