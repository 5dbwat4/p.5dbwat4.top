{"version":3,"file":"index-65f8577d.js","sources":["../../src/views/regener/index.vue"],"sourcesContent":["<template>\r\n<n-card v-if=\"step==1\">\r\n<n-input v-model:value=\"meterial\" type=\"textarea\" />\r\n<n-input v-model:value=\"bid\"/>\r\n<n-button @click=\"help1\">RUN</n-button>\r\n</n-card>\r\n<n-card v-if=\"step==2\">\r\n    <div v-html=\"ranges.join('<br/>')\"></div>\r\n    <div v-html=\"meterial.replaceAll('\\n','<br/>')\"></div>\r\n        <n-button @click=\"help2\">RUN</n-button>\r\n        <n-button @click=\"help3\">RUN using ifr</n-button>\r\n</n-card>\r\n<n-card v-if=\"step==32\">\r\n    <n-button @click=\"regenatteachedHelper\">GOTO zujuan.xkw.com</n-button>\r\n</n-card>\r\n<n-card v-if=\"step==32\">\r\n    <div v-for=\"ror in ranges\" :key=\"ror.key\">\r\n        <div  v-if=\"ror.display\">\r\n        <p>{{ror.met}}</p>\r\n        <iframe  :src=\"'https://zujuan.xkw.com/quessearch/?keyword='+ror.met\"></iframe>\r\n        <n-button @click=\"ranges[helpertmp_i].display=false;helpertmp_i++;ranges[helpertmp_i].display=true\">&lt; next</n-button>\r\n        <n-button @click=\"ranges[helpertmp_i].display=false;helpertmp_i--;ranges[helpertmp_i].display=true\">prev &gt;</n-button>\r\n        </div>\r\n    </div>\r\n\r\n</n-card>\r\n<n-card v-if=\"step==31\">\r\n    <div v-for=\"ror in ranges\" :key=\"ror.met\">\r\n        <p>{{ror.met}}</p>\r\n        <div v-html=\"ror.tdp.body\"></div>\r\n        <p>QID:{{ror.tdp.id}}   ||   {{foundlist[ror.tdp.id]}}</p>\r\n        <n-button @click=\"Save(ror.tdp.id)\" :loading=\"saving[ror.tdp.id]\">SAVE</n-button>\r\n        <n-button @click=\"ror.tdp=ror.list[--ror.index]\">&lt; CHANGE</n-button>\r\n        <n-button @click=\"ror.tdp=ror.list[++ror.index]\">CHANGE &gt;</n-button>\r\n    </div>\r\n\r\n</n-card>\r\n<div></div>\r\n</template>\r\n\r\n<script setup>\r\nimport {NInput,NButton,NCard}from \"naive-ui\"\r\nimport { ref } from \"vue\";\r\nimport { API } from \"../../shared/APIHelper\";\r\n\r\n\r\n\r\nconst meterial=ref(\"\"),step=ref(1),ranges=ref([]),bid=ref(\"\"),foundlist=ref({}),saving=ref({})\r\n\r\nconst _kpafunc=(e)=>{\r\n    if(e.key==\"Enter\"){\r\n        let range=window.getSelection().toString() \r\n        // .slice(0,25)\r\n        ranges.value.push(range)\r\n    }\r\n}\r\nconst help1=()=>{\r\nstep.value=2\r\ndocument.addEventListener(\"keypress\",_kpafunc)\r\n}\r\nconst help2=async()=>{\r\nstep.value=31\r\nlet ooo=ranges.value\r\nranges.value=ranges.value.map(o=>{return {met:o,list:[],tdp:{}}})\r\nfor (let i = 0; i < ranges.value.length; i++) {\r\n    await API.get(\"/api/xkw-helper/qsearch/\"+bid.value+\"/\"+ranges.value[i].met.slice(0,40)).then(r=>{\r\n        ranges.value[i].list=r.data.list\r\n        ranges.value[i].index=0\r\n        ranges.value[i].tdp=ranges.value[i].list[ranges.value[i].index]\r\n        r.data.list.forEach((o,j) => {\r\n            if(j<6){\r\n                WhetherFound(bid.value,o.id)\r\n            }\r\n        });\r\n    })\r\n}\r\n\r\n}\r\n\r\nconst helpertmp_i=ref(0)\r\nconst help3=async()=>{\r\nstep.value=32\r\nlet ooo=ranges.value\r\nranges.value=ranges.value.map(o=>{return {met:o,list:[],tdp:{}}})\r\nfor (let i = 0; i < ranges.value.length; i++) {\r\nranges.value[i].display=false\r\n}\r\nranges.value[0].display=!false\r\n\r\n}\r\n\r\nconst WhetherFound=async(bid,qid)=>{\r\n    await API.get(\"/api/qapi/is_collected/\"+bid+\"/\"+qid).then(r=>{\r\n        foundlist.value[qid]=JSON.stringify(r)\r\n    })\r\n}\r\n\r\nconst Save=async(qid)=>{\r\n    saving.value[qid]=true\r\n    await API.get(\"/api/xkw-helper/get_pure_question/\"+bid.value+\"/\"+qid).then(async(o1)=>{\r\n        const o=o1.data\r\n        const op={\r\n            bankid:bid.value,\r\n            qid,\r\n            q:o.body,\r\n            a:\"<answerparser>unsaved|u</answerparser>\",\r\n            extra:JSON.stringify({\r\n                from:o.paperSources[0]?o.paperSources[0].name:\"\",\r\n                knowledgepoint:o.knowledgeInfo.split(\"ï¼Œ\"),\r\n                info:[o.type.name,o.diff.name+\"(\"+o.diff.value+\")\"]\r\n\r\n            }),\r\n            timestamp:(new Date()).getTime()\r\n        }\r\n        API.post(\"/api/add\",op).then(p=>{\r\n            saving.value[qid]=false\r\n        })\r\n\r\n    })\r\n}\r\n\r\n\r\n\r\nconst regenatteachedHelper=()=>{\r\n    API.post(\"/api/regen-attach/state-update/contentupd\",ranges.value.map(v=>encodeURIComponent( v.met.replaceAll(\"\\r\\n\",\" \").replaceAll(/[ \\t]/g,\" \").slice(0,100)))).then(p=>{\r\n            location.href=API.host+\"/api/regen-attach/router/begin\"\r\n        })\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"names":["meterial","ref","step","ranges","bid","foundlist","saving","_kpafunc","e","range","help1","help2","o","i","API","r","j","WhetherFound","helpertmp_i","help3","qid","Save","o1","op","p","regenatteachedHelper","v"],"mappings":"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"}